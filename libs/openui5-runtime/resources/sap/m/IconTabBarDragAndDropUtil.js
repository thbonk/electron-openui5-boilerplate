/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['sap/ui/core/dnd/DragInfo','sap/ui/core/dnd/DropInfo',"sap/ui/events/KeyCodes"],function(D,a,K){"use strict";var I="Before",b="insertBefore",c="insertAfter",i,d="IconTabReorder";var e={_insertControl:function(i,$,f){if(i===c){$.insertAfter(f);}else{$.insertBefore(f);}},handleDrop:function(f,s,o,g,h){var B=f.indexOfItem(o),j=f.indexOfItem(g),$=o.$(),k=g.$(),A=0,r=sap.ui.getCore().getConfiguration().getRTL(),l=s===I;if(r&&!h){if(l){A=B<j?j:j+1;i=c;}else{A=B<j?j-1:j;i=b;}}else{if(l){A=B<j?j-1:j;i=b;}else{A=B<j?j:j+1;i=c;}}e._insertControl(i,$,k);e._handleConfigurationAfterDragAndDrop.call(f,o,A);},_updateAccessibilityInfo:function(){var o=this.getItems(),A=1,f;o.forEach(function(g){f=g.getDomRef();if(f&&f.getAttribute("aria-posinset")!==null){f.setAttribute("aria-posinset",A++);}});},_handleConfigurationAfterDragAndDrop:function(o,f){this.removeAggregation('items',o,true);this.insertAggregation('items',o,f,true);e._updateAccessibilityInfo.call(this);},_decreaseDropIndex:function(B){if(B===0){i=c;return B;}i=b;return B-1;},_increaseDropIndex:function(B,C){if(B===C-1){i=b;return B;}i=c;return B+1;},moveItem:function(o,k){var $=o.$(),f=this.getItems(),B=this.indexOfItem(o),r=sap.ui.getCore().getConfiguration().getRTL(),n,g,h=K;switch(k){case h.HOME:n=0;i=b;break;case h.END:n=f.length-1;i=c;break;case h.ARROW_LEFT:if(r){n=e._increaseDropIndex(B,f.length);}else{n=e._decreaseDropIndex(B);}break;case h.ARROW_RIGHT:if(r){n=e._decreaseDropIndex(B);}else{n=e._increaseDropIndex(B,f.length);}break;case h.ARROW_DOWN:n=e._increaseDropIndex(B,f.length);break;case h.ARROW_UP:n=e._decreaseDropIndex(B);break;default:return;}g=f[n].$();e._insertControl(i,$,g);e._handleConfigurationAfterDragAndDrop.call(this,o,n);return true;},getDraggedDroppedItemsFromList:function(f,o,g){var h,j,s,k,l;l=o._tabFilter?o._tabFilter.getId():o.getId();k=g._tabFilter?g._tabFilter.getId():g.getId();if(!f&&!o&&!g){return;}f.forEach(function(m){s=m._tabFilter.getId();if(!s){return;}if(s===k){h=m;}if(s===l){j=m;}});return{oDraggedControlFromList:j,oDroppedControlFromList:h};},setDragDropAggregations:function(f,s){var o=f._iconTabHeader?f._iconTabHeader:f;var g=o.getId();f.addDragDropConfig(new D({sourceAggregation:"items",groupName:d+g}));f.addDragDropConfig(new a({targetAggregation:"items",dropPosition:"Between",dropLayout:s,drop:f._handleDragAndDrop.bind(f),groupName:d+g}));}};return e;});
