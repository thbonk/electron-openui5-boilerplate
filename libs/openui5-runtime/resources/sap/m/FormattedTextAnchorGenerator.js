/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2017 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["jquery.sap.global","sap/ui/base/Metadata"],function(q,M){"use strict";var A=M.createClass("sap.m.FormattedTextAnchorGenerator",{});var L=/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim;var W=/(www\.[^\s><]+(\b|$))/gim;var c="//";var D=/<(?:"[^"]*"['"]*|'[^']*'['"]*|[^'">])+(?!\/\s\*)>/gim;var E=/<a[^>]*>([^<]+)<\/a>/gim;var d=[D,E];A.generateAnchors=function(t,l,T){if(l===sap.m.LinkConversion.ProtocolOnly){t=A._createAnchors(t,L,T);}if(l===sap.m.LinkConversion.All){t=A._createAnchors(t,L,T);t=A._createAnchors(t,W,T,c);}return t;};A._createPositionObject=function(i,l){return{iStartPos:i,iEndPos:i+l};};A._isNested=function(f,s){return f.iStartPos<s.iStartPos&&f.iEndPos>s.iEndPos;};A._isAllowed=function(b,C){return b.some(function(B){return A._isNested(B,C);});};A._shouldBeProcessed=function(u,C,b){return q.sap.validateUrl(u)&&!A._isAllowed(b,C);};A._scanForEntitiesToSkip=function(r,t){var e=[],C;while((C=r.exec(t))!==null){e.push(A._createPositionObject(C.index,C[0].length));}return e;};A._getEntitiesToSkipWhileSearchingForLinks=function(t){return d.map(function(s){return A._scanForEntitiesToSkip(s,t);}).reduce(function(a,b){return a.concat(b);});};A._createAnchors=function(t,r,T,p){var e=A._getEntitiesToSkipWhileSearchingForLinks(t),C;p=p||'';C=function(P){var o=A._createPositionObject(arguments[3],P.length);if(!A._shouldBeProcessed(P,o,e)){return P;}return"<a href=\""+p+P+"\" target=\""+T+"\">"+P+"</a>";};return t.replace(r,C);};return A;},false);
