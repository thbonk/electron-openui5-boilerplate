/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2017 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["jquery.sap.global","sap/ui/support/library"],function(q,S){"use strict";var C=S.Categories;var a=S.Severity;var A=S.Audiences;return{addRulesToRuleSet:function(r,c){c=c||{};r.addRule({id:"controllerSyncCodeCheck",audiences:[A.Internal],categories:[C.Consistency],enabled:true,minversion:"1.32",title:"Synchronous calls in controller code",description:"Synchronous calls are deprecated within the Google Chrome browser and block the UI.",resolution:"Use asynchronous XHR calls instead",resolutionurls:[{text:'Documentation: Loading a Module',href:'https://sapui5.hana.ondemand.com/#docs/guide/d12024e38385472a89c1ad204e1edb48.html'}],check:function(i,o,s){var O=c.aObsoleteFunctionNames||[];var e=s.getElementsByClassName(sap.ui.core.mvc.View);var b=[];e.forEach(function(E){if(E.getController){var d=E.getController();if(d){b.push({controller:d,viewId:E.getId()});}}});var g=function(d,f,I,p){var _=[];Object.keys(d).forEach(function(P){var F=d[P].toString().replace(/(\r\n|\n|\r)/gm,"");I.forEach(function(h){if(F.indexOf(h)>0){p(d.getMetadata().getName(),P,h,f);}});});return _;};var v={};b.forEach(function(d){var m=function(j,F,I,V){v[V]=v[V]||[];v[V].push({controllerName:j,functionName:F,invalidContent:I});};var f=d.controller;while(f){g(f,d.viewId,O,m);var h=Object.getPrototypeOf(f);if(f===h||h===sap.ui.core.mvc.Controller.prototype){break;}f=h;}});Object.keys(v).forEach(function(V){var d=v[V];i.addIssue({severity:a.Medium,details:d.map(function(f){return"\nSynchronous call "+f.invalidContent+" found in "+f.controllerName+"#"+f.functionName;}),context:{id:V}});});}});}};},true);
