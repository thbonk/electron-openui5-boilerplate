/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2017 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['jquery.sap.global','sap/ui/unified/calendar/CalendarUtils','sap/ui/unified/calendar/CalendarDate','./library','sap/ui/unified/CalendarDateInterval','sap/ui/unified/CalendarDateIntervalRenderer','sap/ui/unified/calendar/OneMonthDatesRow'],function(q,C,a,l,b,c,O){"use strict";var d=b.extend("CalendarOneMonthInterval",{renderer:c});d.prototype.init=function(){b.prototype.init.apply(this,arguments);this._bShowOneMonth=true;};d.prototype._createMonth=function(i){return new O(i);};d.prototype._handleFocus=function(e){var o=!!e.getParameter("_outsideBorder"),D=e.getParameter("date"),f=a.fromLocalJSDate(D),g=a.fromLocalJSDate(this.getStartDate()),i=!C._isSameMonthAndYear(f,g),h,F,s;if(o||i){if(C._isLastDateInMonth(f)){this._oFocusDateOneMonth=f;}else{this._oFocusDateOneMonth=C._getFirstDateOfMonth(f);}h=f.isBefore(g)?-1:1;F=new a(this._getFocusedDate(),this.getPrimaryCalendarType());s=new a(this._getStartDate(),this.getPrimaryCalendarType());b.prototype._shiftStartFocusDates.call(this,F,s,h);}return b.prototype._handleFocus.apply(this,arguments);};d.prototype._focusDateExtend=function(D,o,n){var e,L;if(!this._oFocusDateOneMonth){return b.prototype._focusDateExtend.apply(this,arguments);}e=this.getAggregation("month")[0];L=this._oFocusDateOneMonth.toLocalJSDate();this._setFocusedDate(this._oFocusDateOneMonth);e._bNoRangeCheck=true;e.setDate(L);e._bNoRangeCheck=false;if(this.getSelectedDates().length){this._setRowsStartDate(this.getSelectedDates()[0].getStartDate());}this._oFocusDateOneMonth=null;return!n;};d.prototype._setDisplayMode=function(m){this.getAggregation("month")[0].setMode(m);};d.prototype._shiftStartFocusDates=function(s,f,D){var S=D,o=this.getAggregation("month")[0];if(S!==0){S=S>0?1:-1;}s.setMonth(s.getMonth()+S);f.setYear(s.getYear());f.setMonth(s.getMonth());f.setDate(s.getDate());this._setFocusedDate(f);this._setStartDate(s,true);o.selectDate(s.toLocalJSDate());};d.prototype._adjustFocusedDateUponMonthChange=function(f,m){f.setMonth(m);if(m!=f.getMonth()){f.setDate(0);}this._adjustSelectedDate(f,true);};d.prototype._adjustFocusedDateUponYearChange=function(f,y){var Y=this.getAggregation("yearPicker"),D=a.fromLocalJSDate(Y.getDate(),this.getPrimaryCalendarType());D.setMonth(f.getMonth());D.setDate(f.getDate());f=D;this._adjustSelectedDate(f,true);return f;};d.prototype._adjustSelectedDate=function(D,u){var m=this.getAggregation("month")[0],s;s=u?C._getFirstDateOfMonth(D):D;if(m.getMode&&m.getMode()<2){this._selectDate(s);}};d.prototype._selectDate=function(D){var m=this.getAggregation("month")[0],L=D.toLocalJSDate();this.removeAllSelectedDates();this.addSelectedDate(new sap.ui.unified.DateRange({startDate:L}));m.selectDate(L);};d.prototype._dateMatchesVisibleRange=function(D){return C._isSameMonthAndYear(a.fromLocalJSDate(this.getStartDate()),a.fromLocalJSDate(D));};return d;},true);
