/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2017 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['jquery.sap.global','sap/ui/unified/calendar/CalendarUtils','sap/ui/core/date/UniversalDate','./library','sap/ui/unified/CalendarDateInterval','sap/ui/unified/CalendarDateIntervalRenderer','sap/ui/unified/calendar/OneMonthDatesRow'],function(q,C,U,l,a,b,O){"use strict";var c=a.extend("CalendarOneMonthInterval",{renderer:b});c.prototype.init=function(){a.prototype.init.apply(this,arguments);this._bShowOneMonth=true;};c.prototype._createMonth=function(i){return new O(i);};c.prototype._handleFocus=function(e){var o=!!e.getParameter("_outsideBorder"),d=e.getParameter("date"),u=C._createUniversalUTCDate(d),i=C.monthsDiffer(u,C._createUniversalUTCDate(this.getStartDate())),D,f,s;if(o||i){d=e.getParameter("date");if(C.isDateLastInMonth(u)){this._oFocusDateOneMonth=u;}else{this._oFocusDateOneMonth=C.getFirstDateOfMonth(u);}D=d.getTime()<this.getStartDate().getTime()?-1:1;f=this._newUniversalDate(this._getFocusedDate());s=this._newUniversalDate(this._getStartDate());a.prototype._shiftStartFocusDates.call(this,f,s,D);}return a.prototype._handleFocus.apply(this,arguments);};c.prototype._focusDateExtend=function(d,o,n){var e,L;if(!this._oFocusDateOneMonth){return a.prototype._focusDateExtend.apply(this,arguments);}e=this.getAggregation("month")[0];L=C._createLocalDate(this._oFocusDateOneMonth.getJSDate());this._setFocusedDate(this._oFocusDateOneMonth);e._bNoRangeCheck=true;e.setDate(L);e._bNoRangeCheck=false;if(this.getSelectedDates().length){this._setRowsStartDate(this.getSelectedDates()[0].getStartDate());}this._oFocusDateOneMonth=null;return!n;};c.prototype._setDisplayMode=function(m){this.getAggregation("month")[0].setMode(m);};c.prototype._shiftStartFocusDates=function(s,f,d){var S=d,o=this.getAggregation("month")[0];if(S!==0){S=S>0?1:-1;}s.setUTCMonth(s.getUTCMonth()+S);f.getJSDate().setTime(s.getTime());this._setFocusedDate(f);this._setStartDate(s,true);o.selectDate(s.getJSDate());};c.prototype._adjustFocusedDateUponMonthChange=function(f,m){f.setUTCMonth(m);if(m!=f.getUTCMonth()){f.setUTCDate(0);}this._adjustSelectedDate(f,true);};c.prototype._adjustFocusedDateUponYearChange=function(f,y){var Y=this.getAggregation("yearPicker"),d=C._createUniversalUTCDate(Y.getDate(),this.getPrimaryCalendarType());d.setUTCMonth(f.getUTCMonth(),f.getUTCDate());f=d;this._adjustSelectedDate(f,true);return f;};c.prototype._adjustSelectedDate=function(d,u){var m=this.getAggregation("month")[0],s;d=d instanceof U?d.getJSDate():d;s=u?C.getFirstDateOfMonth(d).getJSDate():d;if(m.getMode&&m.getMode()<2){this._selectDate(s);}};c.prototype._selectDate=function(d){var m=this.getAggregation("month")[0];this.removeAllSelectedDates();this.addSelectedDate(new sap.ui.unified.DateRange({startDate:d}));m.selectDate(d);};c.prototype._dateMatchesVisibleRange=function(d){return!C.monthsDiffer(this.getStartDate(),d);};return c;},true);
