/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2017 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['jquery.sap.global','sap/ui/core/Control','./library'],function(q,C,l){"use strict";var a=C.extend("sap.ui.unified.CalendarLegend",{metadata:{library:"sap.ui.unified",properties:{columnWidth:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:'120px'}},aggregations:{items:{type:"sap.ui.unified.CalendarLegendItem",multiple:true,singularName:"item"},_standardItems:{type:"sap.ui.unified.CalendarLegendItem",multiple:true,visibility:"hidden"}}}});a.prototype.init=function(){this._addStandardItems(a._All_Standard_Items);};a.prototype.onAfterRendering=function(){if(sap.ui.Device.browser.msie){if(sap.ui.Device.browser.version<10){q(".sapUiUnifiedLegendItem").css("width",this.getColumnWidth()+4+"px").css("display","inline-block");}}};a.prototype._addStandardItems=function(s,r){var i,b=sap.ui.getCore().getLibraryResourceBundle("sap.ui.unified"),I=this.getId();if(r){this.destroyAggregation("_standardItems");}for(i=0;i<s.length;i++){var o=new sap.ui.unified.CalendarLegendItem(I+"-"+s[i],{text:b.getText(a._Standard_Items_TextKeys[s[i]])});this.addAggregation("_standardItems",o);}};a._All_Standard_Items=[sap.ui.unified.StandardCalendarLegendItem.Today,sap.ui.unified.StandardCalendarLegendItem.Selected,sap.ui.unified.StandardCalendarLegendItem.WorkingDay,sap.ui.unified.StandardCalendarLegendItem.NonWorkingDay];a._Standard_Items_TextKeys={"Today":"LEGEND_TODAY","Selected":"LEGEND_SELECTED","WorkingDay":"LEGEND_NORMAL_DAY","NonWorkingDay":"LEGEND_NON_WORKING_DAY"};a.prototype._getItemType=function(i,I){var t=i.getType(),n,f;if(t&&t!==sap.ui.unified.CalendarDayType.None){return t;}f=this._getUnusedItemTypes(I);n=I.filter(function(b){return!b.getType()||b.getType()===sap.ui.unified.CalendarDayType.None;}).indexOf(i);if(n<0){q.sap.log.error('Legend item is not in the legend',this);return t;}if(f[n]){t=f[n];}else{t="Type"+(Object.keys(sap.ui.unified.CalendarDayType).length+n-f.length-1);}return t;};a.prototype._getItemByType=function(t){var I,b=this.getItems(),i;for(i=0;i<b.length;i++){if(this._getItemType(b[i],b)===t){I=b[i];break;}}return I;};a.prototype._getUnusedItemTypes=function(I){var f=q.extend({},sap.ui.unified.CalendarDayType),t,i;delete f[sap.ui.unified.CalendarDayType.None];delete f[sap.ui.unified.CalendarDayType.NonWorking];for(i=0;i<I.length;i++){t=I[i].getType();if(f[t]){delete f[t];}}return Object.keys(f);};a.typeARIATexts={};a.getTypeAriaText=function(t){var r,T;if(t.indexOf("Type")!==0){return;}if(!a.typeARIATexts[t]){r=sap.ui.getCore().getLibraryResourceBundle("sap.ui.unified");T=r.getText("LEGEND_UNNAMED_TYPE",parseInt(t.slice(4),10).toString());a.typeARIATexts[t]=new sap.ui.core.InvisibleText({text:T});a.typeARIATexts[t].toStatic();}return a.typeARIATexts[t];};return a;},true);
