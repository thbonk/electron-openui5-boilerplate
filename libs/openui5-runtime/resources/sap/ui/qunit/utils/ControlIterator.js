/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2017 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['jquery.sap.global','sap/ui/core/Core','sap/ui/base/Object','sap/ui/core/Control'],function(q,C,B,a){"use strict";var b={};b._aControlsThatCannotBeRenderedGenerically=["sap.ui.comp.smartform.Group","sap.ui.comp.smartform.GroupElement","sap.ui.core.UIComponent","sap.ui.core.mvc.HTMLView","sap.ui.core.mvc.JSONView","sap.ui.core.mvc.JSView","sap.ui.core.mvc.XMLView","sap.ui.core.mvc.TemplateView","sap.ui.core.mvc.View","sap.ui.core.tmpl.Template","sap.m.FacetFilterItem","sap.m.LightBox","sap.m.Menu","sap.m.NotificationListItem","sap.m.NotificationListBase","sap.m.QuickViewBase","sap.m.QuickViewGroup","sap.m.QuickViewGroupElement","sap.m.TabStripItem","sap.m.TimePickerSlider","sap.m.TimePickerSliders","sap.m.UploadCollectionToolbarPlaceholder","sap.m.Wizard","sap.tnt.NavigationList","sap.ui.demokit.IndexLayout._Tile","sap.ui.layout.BlockLayoutRow","sap.ui.richtexteditor.RichTextEditor","sap.ui.richtexteditor.ToolbarWrapper","sap.ui.suite.TaskCircle","sap.ui.table.ColumnMenu","sap.ui.unified.Menu","sap.ui.ux3.ActionBar","sap.ui.ux3.ExactList.LB","sap.ui.ux3.NotificationBar","sap.ui.rta.ContextMenu","sap.ui.rta.AddElementsDialog","sap.ui.comp.valuehelpdialog.ValueHelpDialog","sap.chart.Chart","sap.makit.Chart","sap.me.TabContainer","sap.suite.ui.microchart.InteractiveBarChart","sap.suite.ui.microchart.InteractiveDonutChart","sap.uxap.AnchorBar","sap.uxap.BlockBase","sap.uxap.BreadCrumbs","sap.uxap.ObjectPageHeader","sap.uxap.ObjectPageSubSection","sap.uiext.inbox.SubstitutionRulesManager","sap.uiext.inbox.composite.InboxTaskTitleControl","sap.uiext.inbox.InboxFormattedTextView","sap.uiext.inbox.InboxToggleTextView","sap.uiext.inbox.InboxTaskDetails","sap.viz.ui5.controls.common.BaseControl","sap.viz.ui5.core.BaseChart","sap.viz.ui5.controls.VizTooltip"];b.controlCanBeRendered=function(e){if(!b.controlCanBeInstantiated(e)){return false;}if(b._aControlsThatCannotBeRenderedGenerically.indexOf(e)>-1){return false;}return true;};b.controlCanBeInstantiated=function(e){if(["sap.ui.codeeditor.CodeEditor","sap.ui.demokit.IndexLayout._Tile","sap.ui.commons.SearchField","sap.ui.commons.SearchField.CB","sap.ui.commons.SearchFieldCB","sap.ui.commons.Tab","sap.ui.comp.transport.TransportDialog","sap.ui.core.ComponentContainer","sap.ui.core.FragmentControl","sap.ui.core.mvc.View","sap.ui.core.mvc.XMLView","sap.ui.core.XMLComposite","sap.ui.core.mvc.JSView","sap.ui.core.mvc.JSONView","sap.ui.core.mvc.HTMLView","sap.ui.core.mvc.TemplateView","sap.makit.Chart","sap.ui.rta.AddElementsDialog","sap.ui.rta.ContextMenu"].indexOf(e)>-1){return false;}var o=q.sap.getObject(e);if(!o){return false;}var M=o.getMetadata();if(M.isAbstract()){return false;}return true;};var k=["sap.ui.core","sap.chart","sap.f","sap.m","sap.makit","sap.me","sap.ndc","sap.suite.ui.microchart","sap.tnt","sap.ui.codeeditor","sap.ui.commons","sap.ui.comp","sap.ui.dt","sap.ui.fl","sap.ui.generic.app","sap.ui.generic.template","sap.ui.layout","sap.ui.mdc","sap.ui.richtexteditor","sap.ui.rta","sap.ui.suite","sap.ui.table","sap.ui.unified","sap.ui.ux3","sap.uxap","sap.viz"];var c=function(L){if(k.indexOf(L)>-1){return true;}else{return false;}};function g(E,I){var L=sap.ui.getCore().getLoadedLibraries(),n,N,o,i;o=sap.ui.getVersionInfo();for(i=0;i<o.libraries.length;i++){n=o.libraries[i].name;if(q.inArray(n,E)===-1&&!L[n]){q.sap.log.info("Libary '"+n+"' is not loaded!");try{sap.ui.getCore().loadLibrary(n);N=true;}catch(e){}}}if(N){L=sap.ui.getCore().getLoadedLibraries();}E.forEach(function(r){L[r]=undefined;});if(!I){for(var p in L){if(!c(p)){L[p]=undefined;}}}return L;}function d(L){var e=sap.ui.getCore().getLoadedLibraries(),n,i;for(i=0;i<L.length;i++){if(!e[L[i]]){sap.ui.getCore().loadLibrary(L[i]);n=true;}}if(n){e=sap.ui.getCore().getLoadedLibraries();}for(var o in e){if(L.indexOf(o)===-1){e[o]=undefined;}}return e;}var f=function(L,e,i,Q){var n=L?d(L):g(e,i);Q.test("Should load at least one library and some controls",function(o){o.expect(2);var p=false;for(var r in n){if(n[r]){if(!p){o.ok(n[r],"Should have loaded at least one library");p=true;}var t=n[r].controls?n[r].controls.length:0;if(t>0){o.ok(t>0,"Should find at least 10 controls in a library");break;}}}});return n;};var s=function(e,E,i,I){if(!e){return false;}if(E.indexOf(e)>-1){return false;}if(!i&&!b.controlCanBeRendered(e)){return false;}if(!I&&!b.controlCanBeInstantiated(e)){return false;}return true;};var l=function(e,E,I,n,o){return new Promise(function(r,p){var t=0;var u=function(i){if(i<e.length){var v=e[i];h(v,E,I,n,o).then(function(w){if(w){t++;}u(i+1);});}else{r(t);}};u(0);});};function h(e,E,i,I,n){return new Promise(function(r){var o=false;if(s(e,E,i,I)){o=true;var p=q.sap.getObject(e);n(e,p,{canInstantiate:b.controlCanBeInstantiated(e),canRender:b.controlCanBeRendered(e)});}window.setTimeout(function(){r(o);},0);});}b.run=function(e,o){window.setTimeout(function(){_(e,o);},1);};function _(e,o){if(!o){o={};}var D=o.done||function(){};var L=o.librariesToTest||undefined;var E=o.excludedLibraries||[];var i=o.excludedControls||[];var I=(o.includeDistLayer!==undefined)?o.includeDistLayer:false;var n=(o.includeElements!==undefined)?o.includeElements:false;var p=(o.includeNonRenderable!==undefined)?o.includeNonRenderable:true;var r=(o.includeNonInstantiable!==undefined)?o.includeNonInstantiable:false;var Q=o.qunit;if(Q){Q.test("Checking the given QUnit object",function(u){u.ok(true,"The given QUnit should be able to assert");});}else{var t=function(){};var u={ok:function(w,T){if(!w){throw new Error(T);}},expect:t};Q={module:t,test:function(w,e){e(u);}};}Q.test("Checking the given options",function(u){u.ok(o.librariesToTest===undefined||q.isArray(o.librariesToTest),"The given librariesToTest must be undefined or an array, but is: "+o.librariesToTest);u.ok(o.excludedLibraries===undefined||q.isArray(o.excludedLibraries),"The given excludedLibraries must be undefined or an array, but is: "+o.excludedLibraries);u.ok(o.excludedControls===undefined||q.isArray(o.excludedControls),"The given excludedControls must be undefined or an array, but is: "+o.excludedControls);u.ok(o.includeDistLayer===undefined||typeof o.includeDistLayer==="boolean","The given includeDistLayer must be undefined or a boolean, but is: "+o.includeDistLayer);u.ok(o.includeElements===undefined||typeof o.includeElements==="boolean","The given includeElements must be undefined or a boolean, but is: "+o.includeElements);u.ok(o.includeNonRenderable===undefined||typeof o.includeNonRenderable==="boolean","The given includeNonRenderable must be undefined or a boolean, but is: "+o.includeNonRenderable);u.ok(o.includeNonInstantiable===undefined||typeof o.includeNonInstantiable==="boolean","The given includeNonInstantiable must be undefined or a boolean, but is: "+o.includeNonInstantiable);u.ok(D===undefined||typeof D==="function","The given done callback must be undefined or a function, but is: "+D);});var v=f(L,E,I,Q);j(v,n,i,p,r,e).then(function(R){D({testedControlCount:R[0],testedLibraryCount:R[1]});});}function j(L,I,e,n,o,p){return new Promise(function(r){var t=0,u=0;var v=[];for(var w in L){v.push(w);}var x=function(i){if(i<v.length){var w=v[i];m(L,w,I,e,n,o,p).then(function(R){t+=R[0];if(R[1]){u++;}x(i+1);});}else{r([t,u]);}};x(0);});}function m(L,e,i,E,I,n,o){return new Promise(function(r){var p=L[e];if(!p){r([0,false]);}var t=p.controls;if(i){t=t.concat(p.elements.slice());}l(t,E,I,n,o).then(function(A){r([A,true]);});});}return b;},true);
