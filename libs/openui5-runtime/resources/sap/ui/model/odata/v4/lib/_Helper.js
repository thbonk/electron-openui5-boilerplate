/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2017 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["jquery.sap.global"],function(q){"use strict";var r=/&/g,a=/\=/g,b=/#/g,c=/\+/g,d=/'/g,H;H={buildPath:function(){var i,p=[],s;for(i=0;i<arguments.length;i++){s=arguments[i];if(s||s===0){p.push(s==="/"?"":s);}}return p.join("/");},buildQuery:function(p){var k,Q;if(!p){return"";}k=Object.keys(p);if(k.length===0){return"";}Q=[];k.forEach(function(K){var v=p[K];if(Array.isArray(v)){v.forEach(function(i){Q.push(H.encodePair(K,i));});}else{Q.push(H.encodePair(K,v));}});return"?"+Q.join("&");},createError:function(j){var B=j.responseText,C=j.getResponseHeader("Content-Type"),R=new Error(j.status+" "+j.statusText);R.status=j.status;R.statusText=j.statusText;if(j.status===0){R.message="Network error";return R;}if(C){C=C.split(";")[0];}if(j.status===412){R.isConcurrentModification=true;}if(C==="application/json"){try{R.error=JSON.parse(B).error;R.message=R.error.message;}catch(e){q.sap.log.warning(e.toString(),B,"sap.ui.model.odata.v4.lib._Helper");}}else if(C==="text/plain"){R.message=B;}return R;},encode:function(p,e){var E=encodeURI(p).replace(r,"%26").replace(b,"%23").replace(c,"%2B");if(e){E=E.replace(a,"%3D");}return E;},encodePair:function(k,v){return H.encode(k,true)+"="+H.encode(v,false);},formatLiteral:function(v,t){if(v===undefined){throw new Error("Illegal value: undefined");}if(v===null){return"null";}switch(t){case"Edm.Binary":return"binary'"+v+"'";case"Edm.Boolean":case"Edm.Byte":case"Edm.Double":case"Edm.Int16":case"Edm.Int32":case"Edm.SByte":case"Edm.Single":return String(v);case"Edm.Date":case"Edm.DateTimeOffset":case"Edm.Decimal":case"Edm.Guid":case"Edm.Int64":case"Edm.TimeOfDay":return v;case"Edm.Duration":return"duration'"+v+"'";case"Edm.String":return"'"+v.replace(d,"''")+"'";default:throw new Error("Unsupported type: "+t);}},getKeyPredicate:function(e,E){var k=[],s=e.$Key.length===1;if(!E){throw new Error("No instance to calculate key predicate");}e.$Key.forEach(function(n){var v=E[n];if(v===undefined){throw new Error("Missing value for key property '"+n+"'");}v=encodeURIComponent(H.formatLiteral(v,e[n].$Type));k.push(s?v:encodeURIComponent(n)+"="+v);});return"("+k.join(",")+")";},isSafeInteger:function(n){if(typeof n!=="number"||!isFinite(n)){return false;}n=Math.abs(n);return n<=9007199254740991&&Math.floor(n)===n;},namespace:function(n){var i=n.indexOf("/");if(i>=0){n=n.slice(0,i);}i=n.lastIndexOf(".");return i<0?"":n.slice(0,i);},toArray:function(e){if(e===undefined||e===null){return[];}if(Array.isArray(e)){return e;}return[e];},updateCache:function(C,p,o,P){function f(s,v){var l=C[s],i;if(l){for(i=0;i<l.length;i++){l[i].onChange(v);}}}function e(p,v,R){Object.keys(v).forEach(function(s){var g=H.buildPath(p,s),V=v[s];if(V&&typeof V==="object"){e(g,V,R);}else{f(g,R?undefined:V);}});}Object.keys(o).forEach(function(s){var g=H.buildPath(p,s),O=o[s],n;if(s in P){n=P[s];if(n&&typeof n==="object"){if(O){H.updateCache(C,g,O,n);}else{o[s]=n;e(g,n,false);}}else if(O&&typeof O==="object"){e(g,O,true);o[s]=n;}else{if(O!==n){f(g,n);}o[s]=n;}}});}};return H;},false);
