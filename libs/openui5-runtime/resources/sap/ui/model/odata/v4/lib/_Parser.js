/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2017 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define([],function(){"use strict";var d="[=(),; \"']|%(20|22|27|28|29|2c|2C|3b|3B)",s="\\$\\w+",o="[a-zA-Z_\\u0080-\\uFFFF][\\w\\u0080-\\uFFFF]*",S="(?:\\*|%2[aA])",n=o+"(?:[./]"+o+")*"+"(?:[./]"+S+"|/\\$ref|/\\$count)?",a=S+"(?:/\\$ref)?",p=n+"|"+a,v='(?:[-+:./\\w"]|%2[bB])+',r=new RegExp("^(?:"+d+"|("+p+")|("+v+")|("+s+"))"),b=/^[0-9a-f]{2}$/i,P;function e(w,T,O){var m="Expected "+w+" but instead saw ";if(T){m+="'"+T.value+"' at "+T.at;}else{m+="end of input";}throw new SyntaxError(m+": "+O);}function f(c,i){var v="",R={},T;function m(){for(;;){T=i.advance();if(!T||T.id===';'){e("')'",T,i.option);}v+=T.value;if(T.id===")"){return;}if(T.id==="("){m();}}}i.advance("=");for(;;){T=i.current();if(!T||T.id===")"||T.id===";"){break;}v+=i.advance().value;if(T.id==="("){m();}}if(!v){e("an option value",T,i.option);}R[c.value]=v;return R;}function g(c){var E={},i,q,Q,V;c.advance("=");do{V=null;i=c.advance("PATH").value.replace(/%2a/i,"*");if(c.advanceIf("(")){V={};do{q=c.systemQueryOption();Q=Object.keys(q)[0];V[Q]=q[Q];}while(c.advanceIf(";"));c.advance(")");}E[i]=V;}while(c.advanceIf(","));return{"$expand":E};}function h(c){var p,i,m=[],T;c.advance("=");do{T=c.advance("PATH");p=T.value.replace(/%2a/i,"*");if(c.advanceIf("(")){i="(";do{p+=i+c.advance("PATH").value;i=",";}while(c.advanceIf(","));p+=c.advance(")").value;}m.push(p);}while(c.advanceIf(","));return{"$select":m};}function j(T,O){var c=0,R,i;function m(E){var i=T[c];if(E&&(!i||i.id!==E)){if(E==="OPTION"){E="system query option";}else if(E.length===1){E="'"+E+"'";}e(E,i,O);}c+=1;return i;}function q(E){var i=T[c];if(i&&i.id===E){c+=1;return true;}return false;}function w(){return T[c];}function x(){var y={advance:m,advanceIf:q,current:w,systemQueryOption:x,option:O};i=m('OPTION');switch(i.value){case"$expand":return g(y);case"$select":return h(y);default:return f(i,y);}}R=x();if(c<T.length){e("end of input",T[c],O);}return R;}function u(E){return String.fromCharCode(parseInt(E,16));}function t(N,O,A){var i;function m(C){var c=N[i];if(C){i+=1;}if(c==="%"&&N[i]==="2"&&N[i+1]==="7"){c="'";if(C){i+=2;}}return c;}for(i=1;i<N.length;){if(m(true)==="'"){if(m(false)!=="'"){return N.slice(0,i);}m(true);}}throw new SyntaxError("Unterminated string at "+A+": "+O);}function k(N,O,A){var c,E,m=false,i;for(i=1;i<N.length;i+=1){if(m){m=false;}else{c=N[i];if(c==="%"){E=N.slice(i+1,i+3);if(b.test(E)){c=u(E);i+=2;}}if(c==='"'){return N.slice(0,i+1);}m=c==='\\';}}throw new SyntaxError("Unterminated string at "+A+": "+O);}function l(O){var A=1,i,m,N=O,T,c=[],v;while(N.length){m=r.exec(N);if(m){v=m[0];if(m[4]){i="OPTION";}else if(m[3]){i="VALUE";}else if(m[2]){i="PATH";}else if(m[1]){i=u(m[1]);}else{i=m[0];}if(i==='"'){i="VALUE";v=k(N,O,A);}else if(i==="'"){i="VALUE";v=t(N,O,A);}T={at:A,id:i,value:v};}else{throw new SyntaxError("Unknown character '"+N[0]+"' at "+A+": "+O);}N=N.slice(v.length);A+=v.length;c.push(T);}return c;}P={parseSystemQueryOption:function(O){return j(l(O),O);}};return P;},false);
