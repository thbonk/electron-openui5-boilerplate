/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2017 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./_Helper"],function(_){"use strict";var M,a={"AnnotationPath":{__postProcessor:q},"Binary":{__postProcessor:q},"Bool":{__postProcessor:q},"Date":{__postProcessor:q},"DateTimeOffset":{__postProcessor:q},"Decimal":{__postProcessor:q},"Duration":{__postProcessor:q},"EnumMember":{__postProcessor:q},"Float":{__postProcessor:q},"Guid":{__postProcessor:q},"Int":{__postProcessor:q},"LabeledElementReference":{__postProcessor:n},"NavigationPropertyPath":{__postProcessor:q},"Path":{__postProcessor:q},"PropertyPath":{__postProcessor:q},"String":{__postProcessor:q},"TimeOfDay":{__postProcessor:q}},e=[a],A={"Annotation":{__processor:y,__postProcessor:p,__include:e}},b=[a,A],o={__processor:x,__postProcessor:v,__include:b},c={"And":o,"Apply":{__processor:x,__postProcessor:h,__include:b},"Cast":{__processor:x,__postProcessor:k,__include:b},"Collection":{__postProcessor:l,__include:e},"Eq":o,"Ge":o,"Gt":o,"If":o,"IsOf":{__processor:x,__postProcessor:k,__include:b},"LabeledElement":{__processor:x,__postProcessor:m,__include:b},"Le":o,"Lt":o,"Ne":o,"Null":{__processor:x,__postProcessor:s,__include:[A]},"Not":{__processor:x,__postProcessor:r,__include:b},"Or":o,"Record":{__processor:x,__postProcessor:u,__include:[A],"PropertyValue":{__processor:B,__postProcessor:t,__include:b}},"UrlRef":{__postProcessor:w,__include:e}},d={"Annotations":{__processor:z,__include:[A]}};e.push(c);b.push(c);A.Annotation.Annotation=A.Annotation;function g(T,V,j){var i,C,D;switch(T){case"AnnotationPath":case"NavigationPropertyPath":case"Path":case"PropertyPath":V=M.resolveAliasInPath(V,j);case"Binary":case"Date":case"DateTimeOffset":case"Decimal":case"Duration":case"Guid":case"TimeOfDay":case"UrlRef":C={};C["$"+T]=V;return C;case"Bool":return V==="true";case"EnumMember":D=V.trim().replace(/ +/g," ").split(" ");for(i=0;i<D.length;i++){D[i]=M.resolveAliasInPath(D[i],j);}return{$EnumMember:D.join(" ")};case"Float":if(V==="NaN"||V==="INF"||V==="-INF"){return{$Float:V};}return parseFloat(V);case"Int":C=parseInt(V,10);return _.isSafeInteger(C)?C:{$Int:V};case"String":return V;default:return undefined;}}function f(E,j){var C,D=E.attributes,i,V;for(i=D.length-1;i>=0;i--){C=D.item(i);V=g(C.name,C.value,j);if(V!==undefined){return V;}}return true;}function p(E,R,i){var j=i.annotatable.parent;j.target[j.qualifiedName]=R.length?R[0]:f(E,i);}function h(E,R,i){var j=i.annotatable.target;j.$Apply=R;j.$Function=M.resolveAlias(E.getAttribute("Function"),i);return j;}function k(E,R,i){var N=E.localName,j=i.annotatable.target;j["$"+N]=R[0];i.processTypedCollection(E.getAttribute("Type"),j,i);i.processFacetAttributes(E,j);return j;}function l(E,R,i){return R;}function m(E,R,i){var j=i.annotatable.target;j.$LabeledElement=R.length?R[0]:f(E,i);j.$Name=E.getAttribute("Name");return j;}function n(E,R,i){return{"$LabeledElementReference":M.resolveAlias(E.textContent,i)};}function q(E,R,i){return g(E.localName,E.textContent,i);}function r(E,R,i){var j=i.annotatable.target;j.$Not=R[0];return j;}function s(E,R,i){var j=i.annotatable,C=null;if(j.qualifiedName){C=j.target;C.$Null=null;}return C;}function t(E,R,i){return{property:E.getAttribute("Property"),value:R.length?R[0]:f(E,i)};}function u(E,R,j){var i,P,C=j.annotatable.target,T=E.getAttribute("Type");if(T){C.$Type=M.resolveAlias(T,j);}for(i=0;i<R.length;i++){P=R[i];C[P.property]=P.value;}return C;}function v(E,R,i){var j=i.annotatable.target;j["$"+E.localName]=R;return j;}function w(E,R){return{$UrlRef:R[0]};}function x(E,i){M.annotatable(i,{});}function y(E,i){var j=i.annotatable,C,Q=j.prefix+"@"+M.resolveAlias(E.getAttribute("Term"),i),D=j.qualifier||E.getAttribute("Qualifier");if(D){Q+="#"+D;}if(typeof j.target==="string"){C=M.getOrCreateObject(i.schema,"$Annotations");j.target=C[j.target]={};}j.qualifiedName=Q;j.target[Q]=true;M.annotatable(i,j.target,Q);}function z(E,i){M.annotatable(i,M.resolveAliasInPath(E.getAttribute("Target"),i),undefined,E.getAttribute("Qualifier"));}function B(E,i){M.annotatable(i,i.annotatable.target,E.getAttribute("Property"));}M={oAnnotationConfig:A,oAnnotationsConfig:d,rCollection:/^Collection\((.*)\)$/,annotatable:function(i,T,P,Q){var j,C,D;if(typeof T==="string"){j=i.annotatable;T=_.buildPath(j.path,T);D=T;C=i.schema.$Annotations;if(C&&C[T]){T=C[T];}}i.annotatable={parent:i.annotatable,path:D,prefix:P||"",qualifier:Q,target:T};},getOrCreateArray:function(P,i){var R=P[i];if(!R){R=P[i]=[];}return R;},getOrCreateObject:function(P,i){var R=P[i];if(!R){R=P[i]={};}return R;},processAlias:function(E,i){var j=E.getAttribute("Alias");if(j){i.aliases[j]=E.getAttribute("Namespace")+".";}},processAttributes:function(E,T,C){var P;for(P in C){var V=C[P](E.getAttribute(P));if(V!==undefined&&V!==null){T["$"+P]=V;}}},processSchema:function(E,i){i.namespace=E.getAttribute("Namespace")+".";i.result[i.namespace]=i.schema={"$kind":"Schema"};M.annotatable(i,i.schema);},resolveAlias:function(N,i){var D=N.indexOf("."),j;if(D>=0&&N.indexOf(".",D+1)<0){j=i.aliases[N.slice(0,D)];if(j){return j+N.slice(D+1);}}return N;},resolveAliasInPath:function(P,j){var C,i,S,T="";if(P.indexOf(".")<0){return P;}C=P.indexOf("@");if(C>=0){T="@"+M.resolveAlias(P.slice(C+1),j);P=P.slice(0,C);}S=P.split("/");for(i=0;i<S.length;i++){S[i]=M.resolveAlias(S[i],j);}return S.join("/")+T;},resolveTargetPath:function(P,i){var S;if(!P){return P;}P=M.resolveAliasInPath(P,i);S=P.indexOf("/");if(S>=0&&P.indexOf("/",S+1)<0){if(P.slice(0,S)===i.result.$EntityContainer){return P.slice(S+1);}}return P;},setIfFalse:function(V){return V==="false"?false:undefined;},setIfTrue:function(V){return V==="true"?true:undefined;},setNumber:function(V){return V?parseInt(V,10):undefined;},setValue:function(V){return V;},traverse:function(E,C,D){var F=C.annotatable,G,H=E.childNodes,I,J,i,K,j,N,R,L=[];if(D.__processor){D.__processor(E,C);}for(i=0;i<H.length;i++){I=H.item(i);if(I.nodeType===1){N=I.localName;G=D[N];if(!G&&D.__include){K=D.__include;for(j=0;j<K.length;j++){G=K[j][N];if(G){break;}}}if(G){J=M.traverse(I,C,G);if(J!==undefined&&D.__postProcessor){L.push(J);}}}}if(D.__postProcessor){R=D.__postProcessor(E,L,C);}C.annotatable=F;return R;}};return M;},false);
