/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2017 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['sap/ui/base/ManagedObject','sap/ui/dt/ElementUtil','sap/ui/dt/OverlayRegistry','sap/ui/fl/registry/ChangeRegistry'],function(M,E,O,C){"use strict";var c=function(o,k,A){var s;if(typeof(A)==="string"){s=A;}else{s=A&&A.changeType;}if(!s){return false;}k.setChangeType(s);return true;};var f=function(o,s,D){var n=s.element||sap.ui.getCore().byId(s.element.id);var A=D.getAggregationAction("createContainer",n)[0];return A;};var a=function(o,s,D){var k=s.movedElements[0].element||sap.ui.getCore().byId(s.movedElements[0].id);var A=D.getAction("move",k);if(!A&&D.getMetadata().getName()==="sap.ui.dt.ElementDesignTimeMetadata"){var S=s.source.aggregation;var l=D.createAggregationDesignTimeMetadata(S);A=l.getAction("move",k);l.destroy();}return A;};var b=function(o,s,D){var r=s.renamedElement;var A=D.getAction("rename",r);return A;};var d=function(o,s,D){var r=s.removedElement;if(!r){r=o;}else if(!(r instanceof M)){throw new Error("No valid 'removedElement' found");}var A=D.getAction("remove",r);return A;};var e=function(o,s,D){var k=s.source;var A=D.getAction("combine",k);return A;};var g=function(o,s,D){var S=s.source;var A=D.getAction("split",S);return A;};var h=function(o,s,D){var n=s.element;var A=D.getAction("addODataProperty",n);return A;};var i=function(o,s,D){var r=s.directParent;var A=D.getAction("reveal",r);return A;};var m={"composite":{clazz:'sap.ui.rta.command.CompositeCommand'},"property":{clazz:'sap.ui.rta.command.Property'},"bindProperty":{clazz:'sap.ui.rta.command.BindProperty'},"createContainer":{clazz:'sap.ui.rta.command.CreateContainer',configure:f},"move":{clazz:'sap.ui.rta.command.Move',configure:a},"remove":{clazz:'sap.ui.rta.command.Remove',configure:d},"rename":{clazz:'sap.ui.rta.command.Rename',configure:b},"addODataProperty":{clazz:'sap.ui.rta.command.AddODataProperty',configure:h},"reveal":{clazz:'sap.ui.rta.command.Reveal',configure:i},"combine":{clazz:'sap.ui.rta.command.Combine',configure:e},"split":{clazz:'sap.ui.rta.command.Split',configure:g},"settings":{clazz:'sap.ui.rta.command.Settings'},"addLibrary":{clazz:'sap.ui.rta.command.appDescriptor.AddLibrary'}};var _=function(v,s,S,D,F,V){s=s[0].toLowerCase()+s.slice(1);var k=m[s];if(!k){throw new Error("Command '"+s+"' doesn't exist, check typing");}var l=k.clazz;jQuery.sap.require(l);var n=jQuery.sap.getObject(l);var I=v instanceof sap.ui.base.ManagedObject;S=jQuery.extend(S,{element:I?v:undefined,selector:I?undefined:v,name:s});var A;if(k.configure){A=k.configure(v,S,D);}var o;if(A&&A.changeOnRelevantContainer){o=O.getOverlay(v);S=jQuery.extend(S,{element:o.getRelevantContainer()});v=S.element;}if(A&&A.getState){S=jQuery.extend(S,{fnGetState:A.getState});}if(A&&A.restoreState){S=jQuery.extend(S,{fnRestoreState:A.restoreState});}var p=new n(S);var q=true;if(k.configure){q=c(v,p,A);}var P=q&&p.prepare(F,V);if(P){return p;}else{p.destroy();return undefined;}};var j=M.extend("sap.ui.rta.command.CommandFactory",{metadata:{library:"sap.ui.rta",properties:{"flexSettings":{type:"object"}},associations:{},events:{}}});j.prototype.init=function(){this.setProperty("flexSettings",{layer:"CUSTOMER",developerMode:true});};j.prototype.setFlexSettings=function(F){this.setProperty("flexSettings",jQuery.extend(this.getFlexSettings(),F));};j.prototype.getCommandFor=function(v,s,S,D,V){return _(v,s,S,D,this.getFlexSettings(),V);};j.getCommandFor=function(v,s,S,D,F){return _(v,s,S,D,F);};return j;},true);
