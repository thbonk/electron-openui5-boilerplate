/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2017 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['sap/ui/rta/plugin/Plugin','sap/ui/rta/Utils','sap/ui/dt/ElementOverlay','sap/ui/dt/OverlayRegistry','sap/ui/dt/OverlayUtil','sap/ui/fl/changeHandler/BaseTreeModifier','sap/ui/fl/Utils','sap/ui/base/ManagedObject'],function(P,U,E,O,a,B,f,M){"use strict";E.prototype._variantManagement=undefined;E.prototype.getVariantManagement=function(){return this._variantManagement;};E.prototype.setVariantManagement=function(k){this._variantManagement=k;};E.prototype.hasVariantManagement=function(){this._variantManagement?true:false;};var C=P.extend("sap.ui.rta.plugin.ControlVariant",{metadata:{library:"sap.ui.rta",properties:{},associations:{},events:{}}});C.prototype.registerElementOverlay=function(o){if(o.getElementInstance().getMetadata().getName()==="sap.ui.fl.variants.VariantManagement"){var c=o.getElementInstance();var A=c.getAssociation("for");var v=!jQuery.isArray(A)?[A]:A;v.forEach(function(V){var b=V instanceof M?V:sap.ui.getCore().byId(V);var d=O.getOverlay(b);var s=B.getSelector(c,f.getComponentForControl(c)).id;this._propagateVariantManagement(d,s);}.bind(this));}};C.prototype._propagateVariantManagement=function(p,v){var e=[];p.setVariantManagement(v);e=a.getAllChildOverlays(p);e.forEach(function(o){e=e.concat(this._propagateVariantManagement(o,v));}.bind(this));return e;};C.prototype.deregisterElementOverlay=function(o){};return C;},true);
