/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2017 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['sap/ui/rta/plugin/Remove'],function(R){"use strict";var E=R.extend("sap.ui.rta.plugin.EasyRemove",{metadata:{library:"sap.ui.rta",properties:{},associations:{},events:{}}});E.prototype.registerElementOverlay=function(o){this._oDelegate={"onAfterRendering":function(){var a=function(o){this._handleRemove([o]);}.bind(this);if(o.$().hasClass("sapUiRtaPersDelete")&&o.$().children(".sapUiRtaPersDeleteClick").length<=0){var i=o.getId()+"-DeleteIcon";var h=jQuery("<div class='sapUiRtaPersDeleteClick' draggable='true'> </div>");var H=jQuery("<div class='sapUiRtaPersDeleteIconOuter'> </div>");o._oDeleteIcon=new sap.ui.core.Icon(i,{src:"sap-icon://decline",tooltip:sap.ui.getCore().getLibraryResourceBundle("sap.ui.rta").getText("CTX_REMOVE"),press:function(e){var o=sap.ui.getCore().byId(e.getSource().getId().replace("-DeleteIcon",""));a(o);e.cancelBubble();},noTabStop:true}).placeAt(H.get(0));h.append(H);o.$().append(h);o._oDeleteIcon.attachBrowserEvent("contextmenu",function(e){e.stopPropagation();e.preventDefault();});h[0].addEventListener("dragstart",function(e){e.stopPropagation();e.preventDefault();});}o.removeEventDelegate(this._oDelegate,this);}};var c=o.getElementInstance();if(c.getMetadata().getName()==="sap.uxap.ObjectPageSection"&&this.hasStableId(o)){o.addStyleClass("sapUiRtaPersDelete");}o.addEventDelegate(this._oDelegate,this);R.prototype.registerElementOverlay.apply(this,arguments);};E.prototype.deregisterElementOverlay=function(o){var c=o.getElementInstance();if(c.getMetadata().getName()==="sap.uxap.ObjectPageSection"){o.removeStyleClass("sapUiRtaPersDelete");o.removeEventDelegate(this._oDelegate,this);if(o._oDeleteIcon){o._oDeleteIcon.destroy();}}};return E;},true);
