/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2017 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine('sap/ui/rta/ControlTreeModifier',["sap/ui/fl/changeHandler/JsControlTreeModifier"],function(J){"use strict";var _;var R={startRecordingUndo:function(){_=[];},stopRecordingUndo:function(){var r=_;_=undefined;return r;},performUndo:function(u){while(u.length){var o=u.pop();this[o.name].apply(this,o.properties);}},_saveUndoOperation:function(f,p){if(_){_.push({name:f,properties:p});}},setVisible:function(c,v){var o=this.getVisible(c);var r=J.setVisible.apply(this,arguments);if(o!==this.getVisible(c)){this._saveUndoOperation("setVisible",[c,o]);}return r;},setStashed:function(c,s){var o;var C=c.getId();if(c.getVisible){o=!c.getVisible();}else{o=c.getStashed();}J.setStashed.apply(this,arguments);var S=sap.ui.getCore().byId(C);if(o!==s){this._saveUndoOperation("setStashed",[S,!s]);}},bindProperty:function(c,p,b){var o=c.getBindingInfo(p);var O;var m=c.getMetadata().getPropertyLikeSetting(p);if(m){var P=m._sGetter;O=c[P]();}J.bindProperty.apply(this,arguments);if(o){this._saveUndoOperation("bindProperty",[c,p,o]);}else{this._saveUndoOperation("unbindProperty",[c,p]);}if(O){this._saveUndoOperation("setProperty",[c,p,O]);}},unbindProperty:function(c,p){var o=c.getBindingInfo(p);J.unbindProperty.apply(this,arguments);if(o){this._saveUndoOperation("bindProperty",[c,p,o]);}},setProperty:function(c,p,P){var o;var m=c.getMetadata().getPropertyLikeSetting(p);if(m){var s=m._sGetter;o=c[s]();}var r=J.setProperty.apply(this,arguments);if(o!==P){this._saveUndoOperation("setProperty",[c,p,o]);}return r;},setPropertyBinding:function(c,p,P){var o;var m=c.getMetadata().getPropertyLikeSetting(p);if(m){var s=m._sGetter;o=c[s]();}J.setPropertyBinding.apply(this,arguments);if(o!==P){this._saveUndoOperation("setPropertyBinding",[c,p,o]);}},createControl:function(c,a,v,s){var e=this.bySelector(s,a);var r=J.createControl.apply(this,arguments);if(!e){var C=this.bySelector(s,a);this._saveUndoOperation("destroy",[C]);}return r;},destroy:function(c){if(c){c.destroy();}},insertAggregation:function(p,n,o,i){var O=J.getAggregation.call(this,p,n);J.insertAggregation.apply(this,arguments);if(p){if(p.getMetadata){var m=p.getMetadata();var a=m.getAllAggregations();if(a){var A=a[n];if(A){if(A.multiple){this._saveUndoOperation("removeAggregation",[p,n,o]);}else{this._saveUndoOperation("insertAggregation",[p,n,O]);}}}}}},removeAggregation:function(p,n,o){var O;var a;if(p&&o){a=J.getAggregation.call(this,p,n);if(a){a.some(function(e,i){if(e===o){O=i;return true;}});}}J.removeAggregation.apply(this,arguments);if(O||O===0){this._saveUndoOperation("insertAggregation",[p,n,o,O]);}},removeAllAggregation:function(p,n){var o=[];var a;if(p){a=J.getAggregation.call(this,p,n);}if(a&&a instanceof Array){o=a.slice();}else if(a&&a instanceof Object){o[0]=a;}J.removeAllAggregation(p,n);if(o){o.forEach(function(e){this._saveUndoOperation("insertAggregation",[p,n,e]);},this);}}};return jQuery.sap.extend(true,{},J,R);},true);
sap.ui.predefine('sap/ui/rta/RuntimeAuthoring',["jquery.sap.global","sap/ui/base/ManagedObject","sap/ui/rta/toolbar/Fiori","sap/ui/rta/toolbar/Standalone","sap/ui/rta/toolbar/Personalization","sap/ui/dt/ElementUtil","sap/ui/dt/DesignTime","sap/ui/dt/OverlayRegistry","sap/ui/dt/Overlay","sap/ui/rta/command/Stack","sap/ui/rta/command/CommandFactory","sap/ui/rta/command/LREPSerializer","sap/ui/rta/plugin/Rename","sap/ui/rta/plugin/DragDrop","sap/ui/rta/plugin/RTAElementMover","sap/ui/rta/plugin/CutPaste","sap/ui/rta/plugin/Remove","sap/ui/rta/plugin/CreateContainer","sap/ui/rta/plugin/additionalElements/AdditionalElementsPlugin","sap/ui/rta/plugin/additionalElements/AddElementsDialog","sap/ui/rta/plugin/additionalElements/AdditionalElementsAnalyzer","sap/ui/rta/plugin/Combine","sap/ui/rta/plugin/Split","sap/ui/rta/plugin/Selection","sap/ui/rta/plugin/Settings","sap/ui/dt/plugin/ContextMenu","sap/ui/dt/plugin/TabHandling","sap/ui/fl/FlexControllerFactory","sap/ui/rta/ui/SettingsDialog","sap/ui/rta/Utils","sap/ui/fl/transport/Transports","sap/ui/fl/transport/TransportSelection","sap/ui/fl/Utils","sap/ui/fl/registry/Settings","sap/m/MessageBox","sap/m/MessageToast","sap/ui/rta/util/PopupManager","sap/ui/core/BusyIndicator","sap/ui/dt/DOMUtil","sap/ui/rta/util/StylesLoader","sap/ui/rta/appVariant/ManageAppsLoader","sap/ui/Device"],function(q,M,F,S,P,E,D,O,a,C,b,L,R,c,d,e,f,g,A,h,i,j,k,l,m,n,T,o,p,U,r,s,t,u,v,w,x,B,y,z,G,H){"use strict";var I="sap-ui-fl-max-layer";
var J=M.extend("sap.ui.rta.RuntimeAuthoring",{
metadata:{library:"sap.ui.rta",associations:{"rootControl":{type:"sap.ui.core.Control"}},properties:{"customFieldUrl":"string","showCreateCustomField":"boolean","showToolbars":{type:"boolean",defaultValue:true},"triggeredFromDialog":{type:"boolean",defaultValue:false},"showSettingsDialog":{type:"boolean",defaultValue:true},"showWindowUnloadDialog":{type:"boolean",defaultValue:true},"commandStack":{type:"any"},"plugins":{type:"any",defaultValue:{}},"flexSettings":{type:"object",defaultValue:{layer:"CUSTOMER",developerMode:true}},"mode":{type:"string",defaultValue:"adaptation"}},events:{"start":{parameters:{editablePluginsCount:{type:"int"}}},"stop":{},"failed":{},"selectionChange":{parameters:{selection:{type:"sap.ui.dt.Overlay[]"}}},"modeChanged":{},"undoRedoStackModified":{}}},
_sAppTitle:null,
_dependents:null,
constructor:function(){M.apply(this,arguments);this._dependents={};this.iEditableOverlaysCount=0;this.addDependent(new x(),'popupManager');if(this.getShowToolbars()){this.getPopupManager().attachOpen(this.onPopupOpen,this);this.getPopupManager().attachClose(this.onPopupClose,this);}}
});
J.prototype.getDefaultPlugins=function(){if(!this._mDefaultPlugins){var d1=new b({flexSettings:this.getFlexSettings()});this._mDefaultPlugins={};this._mDefaultPlugins["selection"]=new l({commandFactory:d1,multiSelectionRequiredPlugins:[j.getMetadata().getName(),f.getMetadata().getName()],elementEditableChange:this._onElementEditableChange.bind(this)});var e1=new d({commandFactory:d1});this._mDefaultPlugins["dragDrop"]=new c({elementMover:e1,commandFactory:d1,dragStarted:this._handleStopCutPaste.bind(this)});this._mDefaultPlugins["cutPaste"]=new e({elementMover:e1,commandFactory:d1});this._mDefaultPlugins["remove"]=new f({commandFactory:d1});this._mDefaultPlugins["additionalElements"]=new A({commandFactory:d1,analyzer:i,dialog:new h()});this._mDefaultPlugins["rename"]=new R({commandFactory:d1,editable:this._handleStopCutPaste.bind(this)});this._mDefaultPlugins["settings"]=new m({commandFactory:d1});this._mDefaultPlugins["createContainer"]=new g({commandFactory:d1});this._mDefaultPlugins["combine"]=new j({commandFactory:d1});this._mDefaultPlugins["split"]=new k({commandFactory:d1});this._mDefaultPlugins["contextMenu"]=new n({styleClass:U.getRtaStyleClassName()});this._mDefaultPlugins["tabHandling"]=new T();}return q.extend({},this._mDefaultPlugins);};
J.prototype.addDependent=function(d1,e1){if(!(e1 in this._dependents)){if(e1){this['get'+q.sap.charToUpperCase(e1,0)]=this.getDependent.bind(this,e1);}this._dependents[e1||d1.getId()]=d1;}};
J.prototype.getDependent=function(d1){return this._dependents[d1];};
J.prototype.getDependents=function(){return this._dependents;};
J.prototype._destroyDefaultPlugins=function(d1){for(var e1 in this._mDefaultPlugins){var f1=this._mDefaultPlugins[e1];if(f1&&!f1.bIsDestroyed){if(!d1||d1[e1]!==f1){f1.destroy();}}}if(!d1){this._mDefaultPlugins=null;}};
J.prototype.onPopupOpen=function(d1){if(d1.getParameters()instanceof sap.m.Dialog&&this.getToolbar()instanceof F){this.getToolbar().setColor("contrast");}this.getToolbar().bringToFront();};
J.prototype.onPopupClose=function(d1){if(d1.getParameters()instanceof sap.m.Dialog){this.getToolbar().setColor();}};
J.prototype.setPlugins=function(d1){if(this._oDesignTime){throw new Error('Cannot replace plugins: runtime authoring already started');}this.setProperty("plugins",d1);};
J.prototype.setFlexSettings=function(d1){var e1=q.sap.getUriParameters();var f1=e1.mParams["sap-ui-layer"];d1=q.extend({},this.getFlexSettings(),d1);if(f1&&f1.length>0){d1.layer=f1[0];}U.setRtaStyleClassName(d1.layer);this.setProperty("flexSettings",d1);};
J.prototype.getLayer=function(d1){return this.getFlexSettings().layer;};
J.prototype._getFlexController=function(){var d1=this._oRootControl||sap.ui.getCore().byId(this.getRootControl());return o.createForControl(d1);};
J.prototype._getTextResources=function(){return sap.ui.getCore().getLibraryResourceBundle("sap.ui.rta");};
J.prototype.start=function(){if(!this._oDesignTime){this._oRootControl=sap.ui.getCore().byId(this.getRootControl());return this._handlePersonalizationChangesOnStart().then(function(d1){if(!d1){if(!this.getPlugins()||!Object.keys(this.getPlugins()).length){this.setPlugins(this.getDefaultPlugins());}this._destroyDefaultPlugins(this.getPlugins());Object.keys(this.getPlugins()).forEach(function(g1){if(this.getPlugins()[g1].attachElementModified){this.getPlugins()[g1].attachElementModified(this._handleElementModified,this);}}.bind(this));if(this.getPlugins()["settings"]){this.getPlugins()["settings"].setCommandStack(this.getCommandStack());}this._buildContextMenu();this._oSerializer=new L({commandStack:this.getCommandStack(),rootControl:this.getRootControl()});var e1=Object.keys(this.getPlugins());var f1=e1.map(function(g1){return this.getPlugins()[g1];},this);q.sap.measure.start("rta.dt.startup","Measurement of RTA: DesignTime start up");this._oDesignTime=new D({rootElements:[this._oRootControl],plugins:f1});q(a.getOverlayContainer()).addClass("sapUiRta");if(this.getLayer()==="USER"){q(a.getOverlayContainer()).addClass("sapUiRtaPersonalize");}this._oRootControl.addStyleClass("sapUiRtaRoot");this._oDesignTime.attachSelectionChange(function(g1){this.fireSelectionChange({selection:g1.getParameter("selection")});},this);this._oDesignTime.attachEventOnce("synced",function(){this.fireStart({editablePluginsCount:this.iEditableOverlaysCount});q.sap.measure.end("rta.dt.startup","Measurement of RTA: DesignTime start up");},this);this._oDesignTime.attachEventOnce("syncFailed",function(){this.fireFailed();},this);this._$document=q(document);this.fnKeyDown=this._onKeyDown.bind(this);this._$document.on("keydown",this.fnKeyDown);this._oldUnloadHandler=window.onbeforeunload;window.onbeforeunload=this._onUnload.bind(this);sap.ui.getCore().getEventBus().subscribe("sap.ushell.renderers.fiori2.Renderer","appClosed",this._onAppClosed,this);}return Promise.resolve(d1);}.bind(this)).then(function(d1){var e1;if(this.getShowToolbars()&&!d1){return u.getInstance(t.getComponentClassName(this._oRootControl)).then(function(f1){e1=G.hasAppVariantsSupport(this.getLayer(),f1.isAtoEnabled()&&f1.isAtoAvailable());return!f1.isProductiveSystem()&&!f1.hasMergeErrorOccured();}.bind(this)).catch(function(f1){return false;}).then(function(f1){this._createToolsMenu(f1,e1);return this.getToolbar().show();}.bind(this));}}.bind(this)).then(function(){this.getPopupManager().setRta(this);var d1=this.getPopupManager().getRelevantPopups();if(d1.aDialogs||d1.aPopovers){return this.getShowToolbars()&&this.getToolbar().bringToFront();}}.bind(this)).then(function(){z.loadStyles('InPageStyles').then(function(d1){var e1=d1.replace(/%scrollWidth%/g,y.getScrollbarWidth()+'px');y.insertStyles(e1);});});}};
var K=function(d1){var e1=d1.stack||d1.message||d1.status||d1;var f1=sap.ui.getCore().getLibraryResourceBundle("sap.ui.rta");q.sap.log.error("Failed to transfer runtime adaptation changes to layered repository",e1);var g1=f1.getText("MSG_LREP_TRANSFER_ERROR")+"\n"+f1.getText("MSG_ERROR_REASON",e1);v.error(g1,{styleClass:U.getRtaStyleClassName()});};
J.prototype._onAppClosed=function(){this.stop(true,true);};
J.prototype.setCommandStack=function(d1){var e1=this.getProperty("commandStack");if(e1){e1.detachModified(this._onStackModified,this);}if(this._oInternalCommandStack){this._oInternalCommandStack.destroy();delete this._oInternalCommandStack;}var f1=this.setProperty("commandStack",d1);if(d1){d1.attachModified(this._onStackModified,this);}if(this.getPlugins()&&this.getPlugins()["settings"]){this.getPlugins()["settings"].setCommandStack(d1);}return f1;};
J.prototype.getCommandStack=function(){var d1=this.getProperty("commandStack");if(!d1){d1=new C();this._oInternalCommandStack=d1;this.setCommandStack(d1);}return d1;};
J.prototype._onStackModified=function(){var d1=this.getCommandStack();var e1=d1.canUndo();var f1=d1.canRedo();var g1=U.getUshellContainer();if(this.getShowToolbars()){this.getToolbar().setUndoRedoEnabled(e1,f1);this.getToolbar().setPublishEnabled(this._bChangesExist||e1);this.getToolbar().setRestoreEnabled(this._bChangesExist||e1);}this.fireUndoRedoStackModified();if(g1){if(e1){g1.setDirtyFlag(true);}else{g1.setDirtyFlag(false);}}};
J.prototype._closeToolbar=function(){if(this.getShowToolbars()){return this.getToolbar().hide();}};
J.prototype.getSelection=function(){if(this._oDesignTime){return this._oDesignTime.getSelection();}else{return[];}};
J.prototype.stop=function(d1,e1){return((d1)?Promise.resolve():this._serializeToLrep()).then(this._closeToolbar.bind(this)).then(e1?Promise.resolve():this._handlePersonalizationChangesOnExit.bind(this)).then(function(){this.exit();this.fireStop();}.bind(this))['catch'](K);};
J.prototype.restore=function(){this._onRestore();};
J.prototype.transport=function(){this._onTransport();};
J.prototype.undo=function(){return this._onUndo();};
J.prototype.redo=function(){return this._onRedo();};
J.prototype.canUndo=function(){return this.getCommandStack().canUndo();};
J.prototype.canRedo=function(){return this.getCommandStack().canRedo();};
J.prototype._onKeyDown=function(d1){var e1=H.os.macintosh;var f1=a.getOverlayContainer().contains(document.activeElement);var g1=this.getShowToolbars()&&this.getToolbar().getDomRef().contains(document.activeElement);var h1=document.body===document.activeElement;var i1=q(document.activeElement).parents('.sapUiRtaEditableField').length>0;if((f1||g1||h1)&&!i1){var j1=e1?d1.metaKey:d1.ctrlKey;if(d1.keyCode===q.sap.KeyCodes.Z&&d1.shiftKey===false&&d1.altKey===false&&j1===true){this._onUndo().then(d1.stopPropagation.bind(d1));}else if(((e1&&d1.keyCode===q.sap.KeyCodes.Z&&d1.shiftKey===true)||(!e1&&d1.keyCode===q.sap.KeyCodes.Y&&d1.shiftKey===false))&&d1.altKey===false&&j1===true){this._onRedo().then(d1.stopPropagation.bind(d1));}}};
J.prototype._onUnload=function(){var d1=this.getCommandStack();var e1=d1.canUndo()||d1.canRedo();if(e1&&this.getShowWindowUnloadDialog()){var f1=this._getTextResources().getText("MSG_UNSAVED_CHANGES");return f1;}else{window.onbeforeunload=this._oldUnloadHandler;}};
J.prototype._serializeToLrep=function(){return this._oSerializer.saveCommands();};
J.prototype._onUndo=function(){this._handleStopCutPaste();return this.getCommandStack().undo();};
J.prototype._onRedo=function(){this._handleStopCutPaste();return this.getCommandStack().redo();};
J.prototype._createToolsMenu=function(d1,e1){if(!this.getDependent('toolbar')){var f1;if(this.getLayer()==="USER"){f1=P;}else if(U.getFiori2Renderer()){f1=F;}else{f1=S;}if(this.getLayer()==="USER"){this.addDependent(new f1({textResources:this._getTextResources(),exit:this.stop.bind(this,false,false),restore:this._onRestore.bind(this)}),'toolbar');}else{this.addDependent(new f1({modeSwitcher:this.getMode(),publishVisible:d1,textResources:this._getTextResources(),manageAppsVisible:e1,exit:this.stop.bind(this,false,false),transport:this._onTransport.bind(this),restore:this._onRestore.bind(this),undo:this._onUndo.bind(this),redo:this._onRedo.bind(this),modeChange:this._onModeChange.bind(this),manageApps:G.load.bind(null,this.getRootControl())}),'toolbar');}this._checkChangesExist().then(function(g1){this._bChangesExist=g1;this.getToolbar().setPublishEnabled(g1);this.getToolbar().setRestoreEnabled(g1);}.bind(this));}};
J.prototype.exit=function(){q.map(this._dependents,function(e1){e1.destroy();});if(this._oDesignTime){q(a.getOverlayContainer()).removeClass("sapUiRta");this._oDesignTime.destroy();this._oDesignTime=null;this._$document.off("keydown",this.fnKeyDown);this._destroyDefaultPlugins();this.setPlugins(null);}if(this._oRootControl){this._oRootControl.removeStyleClass("sapUiRtaRoot");}this.setCommandStack(null);var d1=U.getUshellContainer();if(d1){d1.setDirtyFlag(false);}window.onbeforeunload=this._oldUnloadHandler;sap.ui.getCore().getEventBus().unsubscribe("sap.ushell.renderers.fiori2.Renderer","appClosed",this._onAppClosed,this);};
J.prototype._onTransport=function(){var d1=function(e1){B.hide();if(e1.message!=='createAndApply failed'){t.log.error("transport error"+e1);return this._showMessage(v.Icon.ERROR,"HEADER_TRANSPORT_ERROR","MSG_TRANSPORT_ERROR",e1);}}.bind(this);this._handleStopCutPaste();return this._openSelection().then(this._checkTransportInfo).then(function(e1){if(e1){return this._serializeToLrep().then(function(){return this._getFlexController().getComponentChanges({currentLayer:this.getLayer()}).then(function(f1){if(f1.length>0){B.show(0);return this._createAndApplyChanges(f1).then(this._transportAllLocalChanges.bind(this,e1))['catch'](d1);}}.bind(this));}.bind(this))['catch'](K);}}.bind(this));};
J.prototype._checkTransportInfo=function(d1){if(d1&&d1.transport&&d1.packageName!=="$TMP"){return d1;}else{return false;}};
J.prototype._openSelection=function(){return new s().openTransportSelection(null,this._oRootControl,U.getRtaStyleClassName());};
J.prototype._createAndApplyChanges=function(d1){var e1=[];return Promise.resolve().then(function(){function f1(g1){return g1&&g1.selector&&g1.selector.id;}d1.filter(f1).forEach(function(g1){var h1=sap.ui.getCore().byId(g1.selector.id);e1.push(function(){return Promise.resolve().then(function(){return this._getFlexController().createAndApplyChange(g1,h1);}.bind(this));}.bind(this));}.bind(this));return t.execPromiseQueueSequentially(e1);}.bind(this)).catch(function(f1){t.log.error("Create and apply error: "+f1);return f1;}).then(function(f1){return this._getFlexController().saveAll().then(function(){if(f1){throw f1;}});}.bind(this)).catch(function(f1){t.log.error("Create and apply and/or save error: "+f1);return this._showMessage(v.Icon.ERROR,"HEADER_TRANSPORT_APPLYSAVE_ERROR","MSG_TRANSPORT_APPLYSAVE_ERROR",f1);}.bind(this));};
J.prototype._deleteChanges=function(){var d1=new s();var e1=this.getLayer();var f1=this.getCommandStack().getAllExecutedCommands().reduce(function(g1,h1){if(h1.getPreparedChange){g1.push(h1.getPreparedChange());}return g1;},[]);this._getFlexController().getComponentChanges({currentLayer:e1}).then(function(g1){g1=g1.concat(f1);return u.getInstance(t.getComponentClassName(this._oRootControl)).then(function(h1){if(!h1.isProductiveSystem()&&!h1.hasMergeErrorOccured()){return d1.setTransports(g1,this._oRootControl);}}.bind(this)).then(function(){return this._getFlexController().discardChanges(g1,e1==="USER");}.bind(this)).then(function(){return window.location.reload();});}.bind(this))["catch"](function(g1){return this._showMessage(v.Icon.ERROR,"HEADER_RESTORE_FAILED","MSG_RESTORE_FAILED",g1);}.bind(this));};
J.prototype._showMessage=function(d1,e1,f1,g1){var h1=this._getTextResources().getText(f1,g1?[g1.message||g1]:undefined);var i1=this._getTextResources().getText(e1);return new Promise(function(j1){v.show(h1,{icon:d1,title:i1,onClose:j1,styleClass:U.getRtaStyleClassName()});});};
J.prototype._showMessageToast=function(d1){var e1=this._getTextResources().getText(d1);w.show(e1);};
J.needsRestart=function(d1){var e1=!!window.localStorage.getItem("sap.ui.rta.restart."+d1);return e1;};
J.enableRestart=function(d1){window.localStorage.setItem("sap.ui.rta.restart."+d1,true);};
J.disableRestart=function(d1){window.localStorage.removeItem("sap.ui.rta.restart."+d1);};
J.prototype._onRestore=function(){var d1=this.getLayer()==="USER"?this._getTextResources().getText("FORM_PERS_RESET_MESSAGE_PERSONALIZATION"):this._getTextResources().getText("FORM_PERS_RESET_MESSAGE");var e1=this.getLayer()==="USER"?this._getTextResources().getText("BTN_RESTORE"):this._getTextResources().getText("FORM_PERS_RESET_TITLE");var f1=function(g1){if(g1==="OK"){J.enableRestart(this.getLayer());this._deleteChanges();this.getCommandStack().removeAllCommands();}}.bind(this);this._handleStopCutPaste();v.confirm(d1,{icon:v.Icon.WARNING,title:e1,onClose:f1,styleClass:U.getRtaStyleClassName()});};
J.prototype._transportAllLocalChanges=function(d1){return this._getFlexController().getComponentChanges({currentLayer:this.getLayer()}).then(function(e1){var f1=new r();var g1=f1._convertToChangeTransportData(e1);var h1={};h1.package=d1.packageName;h1.transportId=d1.transport;h1.changeIds=g1;return f1.makeChangesTransportable(h1).then(function(){e1.forEach(function(i1){if(i1.getPackage()==='$TMP'){var j1=i1.getDefinition();j1.packageName=d1.packageName;i1.setResponse(j1);}});}).then(function(){B.hide();this._showMessageToast("MSG_TRANSPORT_SUCCESS");}.bind(this));}.bind(this));};
J.prototype._isEqualParentInfo=function(d1,e1){var f1=!!d1&&!!e1;if(f1&&(d1.parent&&e1.parent)){f1=d1.parent.getId()===e1.parent.getId();}if(f1&&(d1.index||e1.index)){f1=d1.index===e1.index;}if(f1&&(d1.aggregation||e1.aggregation)){f1=d1.aggregation===e1.aggregation;}return f1;};
J.prototype._setRenameOnCreatedContainer=function(d1,e1){var f1=this.getPlugins()["createContainer"].getCreatedContainerOverlay(d1,e1);if(f1){f1.setSelected(true);if(this.getPlugins()["rename"]){var g1={"onAfterRendering":function(){setTimeout(function(){this.getPlugins()["rename"].startEdit(f1);}.bind(this),0);f1.removeEventDelegate(g1);}.bind(this)};f1.addEventDelegate(g1);}}};
J.prototype._handleElementModified=function(d1){this._handleStopCutPaste();var e1=d1.getParameter("action");var f1=d1.getParameter("newControlId");var g1=d1.getParameter("command");if(g1 instanceof sap.ui.rta.command.BaseCommand){return this.getCommandStack().pushAndExecute(g1).then(function(){if(e1&&f1){this._setRenameOnCreatedContainer(e1,f1);}}.bind(this));}return Promise.resolve();};
J.prototype._onElementEditableChange=function(d1){var e1=d1.getParameter("editable");if(e1){this.iEditableOverlaysCount+=1;}else{this.iEditableOverlaysCount-=1;}};
J.prototype._handleRemoveElement=function(d1){this.getPlugins()["remove"].removeElement(d1);};
J.prototype._openSettingsDialog=function(d1){var e1=(d1.mParameters)?d1.getParameter("selectedOverlays"):d1;var f1=e1[0].getElementInstance();this._handleStopCutPaste();if(!this._oSettingsDialog){this._oSettingsDialog=new p();}this._oSettingsDialog.setCommandStack(this.getCommandStack());this._oSettingsDialog.open(f1);};
var N=function(d1){return this._oDesignTime.getSelection().length<2;};var Q=function(d1){return d1.getMovable();};var V=function(d1){return this.getPlugins()["remove"].isRemoveAvailable(d1);};var W=function(d1){return this.getPlugins()["remove"].isRemoveEnabled(d1);};var X=function(d1){return this.getPlugins()["rename"].isRenameAvailable(d1);};var Y=function(d1){return this.getPlugins()["rename"].isRenameEnabled(d1);};var Z=function(d1){return this.getPlugins()["settings"].isSettingsAvailable(d1);};var $=function(d1){return this.getPlugins()["settings"].isSettingsEnabled(d1);};var _=function(d1){return this.getPlugins()["combine"].isCombineAvailable(d1);};var a1=function(d1){return this.getPlugins()["combine"].isCombineEnabled(d1);};var b1=function(d1){return this.getPlugins()["split"].isSplitAvailable(d1);};var c1=function(d1){return this.getPlugins()["split"].isSplitEnabled(d1);};
J.prototype._buildContextMenu=function(){var d1=this.getPlugins()["contextMenu"];if(!d1){return;}var e1=this.getPlugins()["additionalElements"];var f1=this.getPlugins()["createContainer"];if(this.getPlugins()["rename"]){d1.addMenuItem({id:"CTX_RENAME_LABEL",text:this._getTextResources().getText("CTX_RENAME"),handler:this._handleRename.bind(this),available:X.bind(this),enabled:function(g1){return(N.call(this,g1)&&Y.call(this,g1));}.bind(this)});}if(e1){d1.addMenuItem({id:"CTX_ADD_ELEMENTS_AS_SIBLING",text:e1.getContextMenuTitle.bind(e1,true),handler:e1.showAvailableElements.bind(e1,true),available:e1.isAvailable.bind(e1,true),enabled:function(g1){return N.call(this,g1)&&e1.isEnabled(true,g1);}.bind(this)});d1.addMenuItem({id:"CTX_ADD_ELEMENTS_AS_CHILD",text:e1.getContextMenuTitle.bind(e1,false),handler:e1.showAvailableElements.bind(e1,false),available:e1.isAvailable.bind(e1,false),enabled:function(g1){return N.call(this,g1)&&e1.isEnabled(false,g1);}.bind(this)});}if(f1){d1.addMenuItem({id:"CTX_CREATE_CHILD_CONTAINER",text:f1.getCreateContainerText.bind(f1,false),handler:this._createContainer.bind(this,false),available:f1.isCreateAvailable.bind(f1,false),enabled:f1.isCreateEnabled.bind(f1,false)});d1.addMenuItem({id:"CTX_CREATE_SIBLING_CONTAINER",text:f1.getCreateContainerText.bind(f1,true),handler:this._createContainer.bind(this,true),available:f1.isCreateAvailable.bind(f1,true),enabled:f1.isCreateEnabled.bind(f1,true)});}if(this.getPlugins()["remove"]){d1.addMenuItem({id:"CTX_REMOVE",text:this._getTextResources().getText("CTX_REMOVE"),handler:this._handleRemoveElement.bind(this),available:V.bind(this),enabled:W.bind(this)});}d1.addMenuItem({id:"CTX_CUT",text:this._getTextResources().getText("CTX_CUT"),handler:this._handleCutElement.bind(this),available:Q,enabled:function(){return this._oDesignTime.getSelection().length===1;}.bind(this)});if(this.getPlugins()["cutPaste"]){d1.addMenuItem({id:"CTX_PASTE",text:this._getTextResources().getText("CTX_PASTE"),handler:this._handlePasteElement.bind(this),available:Q,enabled:function(g1){return this.getPlugins()["cutPaste"].isElementPasteable(g1);}.bind(this)});}d1.addMenuItem({id:"CTX_GROUP_FIELDS",text:this._getTextResources().getText("CTX_GROUP_FIELDS"),handler:this._handleCombineElements.bind(this),available:_.bind(this),enabled:a1.bind(this)});d1.addMenuItem({id:"CTX_UNGROUP_FIELDS",text:this._getTextResources().getText("CTX_UNGROUP_FIELDS"),handler:this._handleSplitElements.bind(this),available:b1.bind(this),enabled:c1.bind(this)});if(this.getPlugins()["settings"]){d1.addMenuItem({id:"CTX_SETTINGS",text:this._getTextResources().getText("CTX_SETTINGS"),handler:this._handleSettings.bind(this),available:Z.bind(this),enabled:$.bind(this)});}};
J.prototype._createContainer=function(d1,e1){this._handleStopCutPaste();var f1=e1[0];this.getPlugins()["createContainer"].handleCreate(d1,f1);};
J.prototype._handleRename=function(d1){var e1=d1[0];this.getPlugins()["rename"].startEdit(e1);};
J.prototype._handleCutElement=function(d1){var e1=d1[0];this.getPlugins()["cutPaste"].cut(e1);};
J.prototype._handlePasteElement=function(d1){var e1=d1[0];this.getPlugins()["cutPaste"].paste(e1);};
J.prototype._handleStopCutPaste=function(){this.getPlugins()["cutPaste"].stopCutAndPaste();};
J.prototype._handleCombineElements=function(){this._handleStopCutPaste();var d1=this.getPlugins()["contextMenu"].getContextElement();this.getPlugins()["combine"].handleCombine(d1);};
J.prototype._handleSplitElements=function(){this._handleStopCutPaste();var d1=this.getPlugins()["contextMenu"].getContextElement();this.getPlugins()["split"].handleSplit(d1);};
J.prototype._handleSettings=function(d1){this.getPlugins()["settings"].handleSettings(d1);};
J.prototype._getApplicationTitle=function(){var d1="";var e1=sap.ui.core.Component.getOwnerComponentFor(this._oRootControl);if(e1){d1=e1.getMetadata().getManifestEntry("sap.app").title;}return d1;};
J.prototype._checkChangesExist=function(){if(this._getFlexController().getComponentName().length>0){return this._getFlexController().getComponentChanges({currentLayer:this.getLayer()}).then(function(d1){return d1.length>0;});}else{return Promise.resolve(false);}};
J.prototype._getURLParsedHash=function(){var d1=sap.ushell.Container.getService("URLParsing");if(d1.parseShellHash&&d1.getHash){return d1.parseShellHash(d1.getHash(window.location.href));}};
J.prototype._buildNavigationArguments=function(d1){return{target:{semanticObject:d1.semanticObject,action:d1.action,context:d1.contextRaw},params:d1.params,appSpecificRoute:d1.appSpecificRoute,writeHistory:false};};
J.prototype._hasCustomerLayerParameter=function(d1){return d1.params&&d1.params[I]&&d1.params[I][0]==="CUSTOMER";};
J.prototype._reloadWithoutPersonalizationChanges=function(d1,e1){if(!this._hasCustomerLayerParameter(d1)){if(!d1.params){d1.params={};}d1.params[I]=["CUSTOMER"];J.enableRestart("CUSTOMER");e1.toExternal(this._buildNavigationArguments(d1));return Promise.resolve(true);}};
J.prototype._reloadWithPersonalizationChanges=function(d1,e1){if(this._hasCustomerLayerParameter(d1)){delete d1.params[I];e1.toExternal(this._buildNavigationArguments(d1));return Promise.resolve(true);}};
J.prototype._handlePersonalizationMessageBoxOnStart=function(){return this._showMessage(v.Icon.INFORMATION,"HEADER_PERSONALIZATION_EXISTS","MSG_PERSONALIZATION_EXISTS");};
J.prototype._handlePersonalizationChangesOnStart=function(){var d1=U.getUshellContainer();if(d1&&this.getLayer()!=="USER"){var e1=this._getURLParsedHash();return this._getFlexController().isPersonalized({ignoreMaxLayerParameter:false}).then(function(f1){if(f1){return this._handlePersonalizationMessageBoxOnStart().then(function(){var g1=sap.ushell.Container.getService("CrossApplicationNavigation");if(g1.toExternal&&e1){return this._reloadWithoutPersonalizationChanges(e1,g1);}}.bind(this));}}.bind(this));}else{return Promise.resolve(false);}};
J.prototype._handlePersonalizationMessageBoxOnExit=function(){return new Promise(function(d1){var e1=this._getTextResources().getText("MSG_LOAD_PERSONALIZATION_CHANGES");var f1=this._getTextResources().getText("HEADER_LOAD_PERSONALIZATION_CHANGES");var g1=this._getTextResources().getText("MSG_PERSONALIZATION_CONFIRM_BUTTON_TEXT");var h1=this._getTextResources().getText("MSG_PERSONALIZATION_CANCEL_BUTTON_TEXT");var i1=function(j1){if(j1===g1){return d1(true);}else if(j1===h1){return d1(false);}};v.confirm(e1,{icon:v.Icon.QUESTION,title:f1,actions:[g1,h1],onClose:i1,styleClass:U.getRtaStyleClassName()});}.bind(this));};
J.prototype._handlePersonalizationChangesOnExit=function(){var d1=U.getUshellContainer();sap.ui.getCore().getEventBus().unsubscribe("sap.ushell.renderers.fiori2.Renderer","appClosed",this._onAppClosed,this);if(d1&&this.getLayer()!=="USER"){return this._getFlexController().isPersonalized({ignoreMaxLayerParameter:true}).then(function(e1){if(e1){return this._handlePersonalizationMessageBoxOnExit().then(function(f1){if(f1){var g1=sap.ushell.Container.getService("CrossApplicationNavigation");var h1=this._getURLParsedHash();if(g1.toExternal&&h1){return this._reloadWithPersonalizationChanges(h1,g1);}}}.bind(this));}}.bind(this));}else{return Promise.resolve(false);}};
J.prototype._onModeChange=function(d1){this.setMode(d1.getParameter('key'));};
J.prototype.setMode=function(d1){if(this.getProperty('mode')!==d1){var e1=this.getShowToolbars()&&this.getToolbar().getControl('modeSwitcher');var f1=d1==='adaptation';if(e1){e1.setSelectedButton(e1.getItems().filter(function(g1){return g1.getKey()===d1;}).pop().getId());}this._oDesignTime.setEnabled(f1);this.getPlugins()['tabHandling'][f1?'removeTabIndex':'restoreTabIndex']();this.setProperty('mode',d1);this.fireModeChanged({mode:d1});}};
return J;},true);
sap.ui.predefine('sap/ui/rta/Utils',['jquery.sap.global','sap/ui/fl/Utils','sap/ui/dt/OverlayUtil','sap/ui/dt/OverlayRegistry','sap/ui/fl/registry/Settings'],function(q,F,O,a,S){"use strict";var U={};U.RESOLVED_PROMISE=Promise.resolve(true);U._sFocusableOverlayClass=".sapUiDtOverlaySelectable";U._sRtaStyleClassName="";
U.getRtaStyleClassName=function(){return U._sRtaStyleClassName;};
U.setRtaStyleClassName=function(l){if(l==="USER"){U._sRtaStyleClassName="";}else if(F.getLayerIndex(l)>-1){if(sap.ui.getCore().getConfiguration().getTheme()==="sap_belize"){U._sRtaStyleClassName="sapContrast";}else if(sap.ui.getCore().getConfiguration().getTheme()==="sap_belize_plus"){U._sRtaStyleClassName="sapContrastPlus";}}};
U.isExtensibilityEnabledInSystem=function(c){var C=F.getComponentClassName(c);if(!C||C==""){return Promise.resolve(false);}return S.getInstance(C).then(function(s){if(s.isModelS){return s.isModelS();}return false;});};
U.getRelevantContainerDesigntimeMetadata=function(o){var r=o.getRelevantContainer();if(!r||!o.getParent()){return undefined;}var R=a.getOverlay(r);return R?R.getDesignTimeMetadata():undefined;};
U.isServiceUpToDate=function(c){return this.isExtensibilityEnabledInSystem(c).then(function(e){if(e){q.sap.require("sap.ui.fl.fieldExt.Access");var m=c.getModel();if(m){var s=sap.ui.fl.fieldExt.Access.isServiceOutdated(m.sServiceUrl);if(s){sap.ui.fl.fieldExt.Access.setServiceValid(m.sServiceUrl);sap.ui.getCore().getEventBus().publish("sap.ui.core.UnrecoverableClientStateCorruption","RequestReload",{});return Promise.reject();}}}});};
U.isCustomFieldAvailable=function(c){return this.isExtensibilityEnabledInSystem(c).then(function(s){if(!s){return false;}else if(!c.getModel()){return false;}else{var b=c.getModel().sServiceUrl;var e=this.getBoundEntityType(c).name;try{q.sap.require("sap.ui.fl.fieldExt.Access");var j=sap.ui.fl.fieldExt.Access.getBusinessContexts(b,e);return Promise.resolve(j).then(function(r){if(r){if(r.BusinessContexts){if(r.BusinessContexts.length>0){r.EntityType=e;return r;}}}else{return false;}}).catch(function(E){if(E){if(q.isArray(E.errorMessages)){for(var i=0;i<E.errorMessages.length;i++){q.sap.log.error(E.errorMessages[i].text);}}}return false;});}catch(E){q.sap.log.error("exception occured in sap.ui.fl.fieldExt.Access.getBusinessContexts",E);return false;}}}.bind(this));};
U.openRemoveConfirmationDialog=function(e,t){var T=sap.ui.getCore().getLibraryResourceBundle("sap.ui.rta");var s;return new Promise(function(r,b){s=T.getText("CTX_REMOVE_TITLE");var d={messageText:t,titleText:s,icon:"sap-icon://question-mark",removeText:T.getText("BTN_FREP_REMOVE"),cancelText:T.getText("BTN_FREP_CANCEL")};var m=new sap.ui.model.json.JSONModel();m.setData(d);var f;var c=function(){if(f){f.close();f.destroy();f=null;}};var o={removeField:function(){c();r(true);},closeDialog:function(){c();r(false);}};if(!f){f=sap.ui.xmlfragment("sap.ui.rta.view.RemoveElementDialog",o);f.setModel(m);}f.addStyleClass(U.getRtaStyleClassName());f.open();});};
U.isOverlaySelectable=function(o){return o.isSelectable()&&o.$().is(":visible");};
U.getPropertyValue=function(e,p){var m=e.getMetadata().getPropertyLikeSetting(p);var P=m._sGetter;return e[P]();};
U.getOverlayInstanceForDom=function(d){var i=q(d).attr("id");if(i){return sap.ui.getCore().byId(i);}};
U.getFocusedOverlay=function(){if(document.activeElement){var e=sap.ui.getCore().byId(document.activeElement.id);if(e instanceof sap.ui.dt.ElementOverlay){return e;}}};
U.getFocusableParentOverlay=function(o){if(!o){return undefined;}var f=o.getParentElementOverlay();while(f&&!f.getSelectable()){f=f.getParentElementOverlay();}return f;};
U.getFirstFocusableDescendantOverlay=function(o){return O.getFirstDescendantByCondition(o,this.isOverlaySelectable);};
U.getNextFocusableSiblingOverlay=function(o){var n=O.getNextSiblingOverlay(o);while(n&&!this.isOverlaySelectable(n)){n=O.getNextSiblingOverlay(n);}return n;};
U.getPreviousFocusableSiblingOverlay=function(o){var p=O.getPreviousSiblingOverlay(o);while(p&&!this.isOverlaySelectable(p)){p=O.getPreviousSiblingOverlay(p);}return p;};
U.getIndex=function(p,c,A,g){var i;if(g&&typeof g==="function"){i=g.call(null,p,c);}else{var m=p.getMetadata();var o=m.getAggregation(A);var G=o._sGetter;var C=p[G]();if(Array.isArray(C)){if(c){i=C.indexOf(c)+1;}else{i=C.length;}}else{i=0;}}return i;};
U.createFieldLabelId=function(p,e,b){return(p.getId()+"_"+e+"_"+b).replace("/","_");};
U.getLabelForElement=function(e,f){if(f){return f(e);}else{var s=e.getText&&e.getText();if(!s){s=e.getLabelText&&e.getLabelText();}if(!s){s=e.getLabel&&e.getLabel();if(s&&s.getText){s=s.getText();}}if(!s){s=e.getTitle&&e.getTitle();}if(!s){s=e.getId&&e.getId();}return(typeof s)==="string"?s:undefined;}};
U.getBoundEntityType=function(e,m){m||(m=e.getModel());var b=e.getBindingContext();if(b){return U.getEntityTypeByPath(m,b.getPath())||{};}return{};};
U.openNewWindow=function(u){window.open(u,"_blank");};
U.getElementBindingPaths=function(e){var p={};if(e.mBindingInfos){for(var i in e.mBindingInfos){var P=e.mBindingInfos[i].parts[0].path?e.mBindingInfos[i].parts[0].path:"";P=P.split("/")[P.split("/").length-1];p[P]={valueProperty:i};}}return p;};
U.getFiori2Renderer=function(){var c=U.getUshellContainer()||{};return typeof c.getRenderer==="function"?c.getRenderer("fiori2"):undefined;};
U.getUshellContainer=function(){return sap.ushell&&sap.ushell.Container;};
U.getEntityTypeByPath=function(m,p){return m.oMetadata._getEntityTypeByPath(p);};
U.mergeWith=function(d,s,c){if(!(typeof c==="function")){throw new Error('In order to use mergeWith() utility function fnCustomizer should be provided!');}for(var b in s){if(s.hasOwnProperty(b)){d[b]=d.hasOwnProperty(b)?c(d[b],s[b],b,d,s):s[b];}}return d;};
U.isElementInViewport=function(d){if(d instanceof q){d=d.get(0);}var r=d.getBoundingClientRect();return(r.top>=0&&r.left>=0&&r.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&r.right<=(window.innerWidth||document.documentElement.clientWidth));};
return U;},true);
sap.ui.predefine('sap/ui/rta/appVariant/ManageAppsDialog',['sap/ui/base/ManagedObject','sap/ui/core/ComponentContainer','sap/m/Dialog','sap/ui/rta/appVariant/manageApps/webapp/Component',"sap/ui/fl/Utils"],function(M,C,D,a,F){"use strict";var _;
var b=M.extend("sap.ui.rta.appVariant.ManageAppsDialog",{
metadata:{properties:{rootControl:{name:"rootControl",type:"object"}},events:{"opened":{},"close":{}}},
constructor:function(){_=arguments[0].rootControl;M.prototype.constructor.apply(this,arguments);}
});
b.prototype.init=function(){this._oTextResources=sap.ui.getCore().getLibraryResourceBundle("sap.ui.rta");this._oDialog=new D("manageAppsDialog");var r=_;var A=F.getAppDescriptor(r);var i=A["sap.app"].id;var o={title:A["sap.app"].title,subTitle:A["sap.app"].subTitle||'',description:A["sap.app"].description||'',icon:A["sap.ui"].icons.icon||'',componentName:A["sap.ui5"].componentName,idAppAdapted:i};this.oManageAppsComponent=new a("manageApps",{adaptedAppProperties:o});this.oManageAppsComponentContainer=new C({component:this.oManageAppsComponent});this._oDialog.addContent(this.oManageAppsComponentContainer);var B=this._createButton();this._oDialog.addButton(B);this._oDialog.setContentWidth("1000px");this._oDialog.setContentHeight("300px");this._oDialog.setShowHeader(false);};
b.prototype.open=function(){return new Promise(function(r){this._oDialog.oPopup.attachOpened(function(){this.fireOpened();r(this);}.bind(this));this._oDialog.open();}.bind(this));};
b.prototype._createButton=function(){var c=new sap.m.Button({text:this._oTextResources.getText("MAA_CLOSE_BUTTON"),press:[this._closeDialog,this]});return c;};
b.prototype._closeDialog=function(){return new Promise(function(r){this._oDialog.oPopup.attachClosed(function(){this._oDialog.destroy();r(true);}.bind(this));this._oDialog.close();this.fireClose();}.bind(this));};
b.prototype.exit=function(){this._oDialog.destroy();};
return b;},true);
sap.ui.predefine('sap/ui/rta/appVariant/ManageAppsLoader',["jquery.sap.global","sap/ui/rta/Utils"],function(q,R){"use strict";var _;var m;return{load:function(r){var o=sap.ui.getCore().byId(r);if(!_){_=new Promise(function(a){sap.ui.require(["sap/ui/rta/appVariant/ManageAppsDialog"],function(M){return a(M);});});}return _.then(function(M){if(!m){m=new M({rootControl:o,close:function(){this.destroy();m=null;}});}return m.open();});},hasAppVariantsSupport:function(l,i){if(i&&R.getUshellContainer()&&l==="CUSTOMER"){var u=q.sap.getUriParameters();var U=u.mParams["sap-ui-xx-rta-save-as"];if(U&&U.length>0){return U[0]==='true'?true:false;}}return false;}};});
sap.ui.predefine('sap/ui/rta/appVariant/Utils',["jquery.sap.global"],function(q){"use strict";var U={};var _="/sap/bc/ui2/app_index/?basedOnId=";var a="/sap/bc/ui2/app_index/?sap.app/id=";
U.ajaxRequest=function(r){return new Promise(function(b,c){q.ajax(r).done(function(R){return b(R);}).fail(function(e){return c(e);});});};
U.getAppVariants=function(c,t){var r={url:_+c+'&fields=descriptorUrl',type:"GET"};return this.ajaxRequest(r).then(function(R){var A=R.results;return this.getAppVariantDescriptorInfo(A,t);}.bind(this));};
U.getAppVariantDescriptorInfo=function(A,t){var b=[];var c=this;A.some(function(o){b.push(c.getAppVariantsProperties(o,t));});return Promise.all(b).then(function(r){return r;});};
U.getAppVariantsProperties=function(A,t){var o={},r;r={url:A["descriptorUrl"],type:"GET"};return this.ajaxRequest(r).then(function(R){var b=R;o.id=b["sap.app"].id;o.title=b["sap.app"].title;o.subTitle=b["sap.app"].subTitle;o.description=b["sap.app"].description;o.icon=b["sap.ui"].icons.icon;o.componentName=b["sap.ui5"].componentName;o.type=t;return Promise.resolve(o);});};
U.getOriginalAppProperties=function(o,t){var r={url:a+o+'&fields=descriptorUrl',type:"GET"};return this.ajaxRequest(r).then(function(R){var A=R.results;return this.getAppVariantDescriptorInfo(A,t);}.bind(this));};
return U;},true);
sap.ui.predefine('sap/ui/rta/appVariant/manageApps/webapp/Component',["sap/ui/core/UIComponent"],function(U){"use strict";var _;return U.extend("sap.ui.rta.appVariant.manageApps.webapp.Component",{metadata:{"manifest":"json","library":"sap.ui.rta","version":"0.9","properties":{adaptedAppProperties:{type:"object"}}},constructor:function(){_=arguments[1].adaptedAppProperties;U.prototype.constructor.apply(this,arguments);},init:function(){this.setAdaptedAppProperties(_);U.prototype.init.apply(this,arguments);}});});
sap.ui.predefine('sap/ui/rta/appVariant/manageApps/webapp/controller/ManageApps.controller',["jquery.sap.global","sap/ui/core/mvc/Controller","sap/ui/rta/appVariant/manageApps/webapp/model/models","sap/ui/rta/appVariant/Utils","sap/m/MessageBox"],function(q,C,M,a,b){"use strict";var _,m,I;return C.extend("sap.ui.rta.appVariant.manageApps.webapp.controller.ManageApps",{onInit:function(){_=this.getOwnerComponent().getAdaptedAppProperties();var o=_.componentName;m=q.sap.getModulePath("sap.ui.rta.appVariant.manageApps.webapp");I=q.sap.resources({url:m+"/i18n/i18n.properties"});var A=I.getText("MAA_APP_VARIANT_TYPE");return a.getAppVariants(o,A).then(function(c){return this._addAppVariantsProperties(c).then(function(){return this._paintCurrentlyAdaptedApp();}.bind(this));}.bind(this))["catch"](function(e){return this._showMessage(b.Icon.ERROR,"HEADER_MANAGE_APPS_FAILED","MSG_MANAGE_APPS_FAILED",e).then(function(){return this._closeManageAppsDialog();}.bind(this));}.bind(this));},_showMessage:function(o,t,s,e){var c=sap.ui.getCore().getLibraryResourceBundle("sap.ui.rta");var d=c.getText(s,e?[e.message||e]:undefined);var T=c.getText(t);return new Promise(function(r){b.show(d,{icon:o,title:T,onClose:r});});},_addAppVariantsProperties:function(A){var o={title:_.title,subTitle:_.subTitle,description:_.description,icon:_.icon,id:_.idAppAdapted,componentName:_.componentName,currentStatus:I.getText("MAA_CURRENTLY_ADAPTING")};if(_.idAppAdapted===_.componentName){o.type=I.getText("MAA_ORIGINAL_TYPE");A.unshift(o);return this._bindModelData(A);}else{var f=A.filter(function(c){return c.id!==o.id;});o.type=I.getText("MAA_APP_VARIANT_TYPE");f.unshift(o);return a.getOriginalAppProperties(_.componentName,I.getText("MAA_ORIGINAL_TYPE")).then(function(O){f.unshift(O[0]);return this._bindModelData(f);}.bind(this));}},_bindModelData:function(A){var o={appVariants:A};var c=M.createModel(o);this.getView().setModel(c);return Promise.resolve(true);},_closeManageAppsDialog:function(){var o=sap.ui.getCore().byId("manageAppsDialog");o.oPopup.attachClosed(function(){o.destroy();return Promise.resolve(true);});o.close();},_paintCurrentlyAdaptedApp:function(){var t=this.getView().byId("Table1");q('.maaCurrentStatus,.maaSubTitle').css("font-size",'12px');function c(){var r=t.getVisibleRowCount();var d=t.getFirstVisibleRow();var e;for(var i=0;i<r;i++){e=t.getContextByIndex(d+i);if(e&&e.getProperty("currentStatus")===I.getText("MAA_CURRENTLY_ADAPTING")){var s=sap.ui.core.theming.Parameters.get("sapUiHighlight");t.getRows()[i].$().find("span").css({color:s});break;}}return Promise.resolve(true);}return c();}});});
sap.ui.predefine('sap/ui/rta/appVariant/manageApps/webapp/model/models',["sap/ui/model/json/JSONModel"],function(J){"use strict";return{createModel:function(d){var m=new J(d);m.setDefaultBindingMode("OneWay");return m;}};});
sap.ui.predefine('sap/ui/rta/command/AddODataProperty',['sap/ui/rta/command/FlexCommand'],function(F){"use strict";
var A=F.extend("sap.ui.rta.command.AddODataProperty",{metadata:{library:"sap.ui.rta",properties:{index:{type:"int"},newControlId:{type:"string"},bindingString:{type:"string"},parentId:{type:"string"},oDataServiceVersion:{type:"string"}}}});
A.prototype._getChangeSpecificData=function(){return{changeType:this.getChangeType(),index:this.getIndex(),newControlId:this.getNewControlId(),bindingPath:this.getBindingString(),parentId:this.getParentId(),oDataServiceVersion:this.getODataServiceVersion()};};
return A;},true);
sap.ui.predefine('sap/ui/rta/command/BaseCommand',['sap/ui/base/ManagedObject'],function(M){"use strict";
var B=M.extend("sap.ui.rta.command.BaseCommand",{metadata:{library:"sap.ui.rta",properties:{name:{type:"string"}},associations:{element:{type:"sap.ui.core.Element"}},events:{}}});
B.prototype.getElement=function(){var i=this.getAssociation("element");return sap.ui.getCore().byId(i);};
B.prototype.prepare=function(){return true;};
B.prototype.execute=function(){return Promise.resolve();};
B.prototype.undo=function(){return Promise.resolve();};
B.prototype.isEnabled=function(){return true;};
return B;},true);
sap.ui.predefine('sap/ui/rta/command/BindProperty',['sap/ui/rta/command/FlexCommand',"sap/ui/rta/Utils"],function(F,U){"use strict";
var B=F.extend("sap.ui.rta.command.BindProperty",{metadata:{library:"sap.ui.rta",properties:{propertyName:{type:"string"},newBinding:{type:"string",bindable:false},changeType:{type:"string",defaultValue:"propertyBindingChange"}},associations:{},events:{}}});
B.prototype.bindProperty=function(n,b){if(n==="newBinding"){return this.setNewBinding(b.bindingString);}return F.prototype.bindProperty.apply(this,arguments);};
B.prototype._getChangeSpecificData=function(){var e=this.getElement();var s={changeType:this.getChangeType(),selector:{id:e.getId(),type:e.getMetadata().getName()},content:{property:this.getPropertyName(),newBinding:this.getNewBinding()}};return s;};
return B;},true);
sap.ui.predefine('sap/ui/rta/command/Combine',['sap/ui/rta/command/FlexCommand'],function(F){"use strict";
var C=F.extend("sap.ui.rta.command.Combine",{metadata:{library:"sap.ui.rta",properties:{source:{type:"any"},combineFields:{type:"any[]"}},associations:{},events:{}}});
C.prototype._getChangeSpecificData=function(){var f=[];this.getCombineFields().forEach(function(o){f.push(o.getId());});var s={changeType:this.getChangeType(),sourceControlId:this.getSource().getId(),combineFieldIds:f};return s;};
return C;},true);
sap.ui.predefine('sap/ui/rta/command/CommandFactory',['sap/ui/base/ManagedObject','sap/ui/dt/ElementUtil','sap/ui/dt/OverlayRegistry','sap/ui/fl/registry/ChangeRegistry'],function(M,E,O,C){"use strict";var c=function(o,k,A){var s;if(typeof(A)==="string"){s=A;}else{s=A&&A.changeType;}if(!s){return false;}k.setChangeType(s);return true;};var f=function(o,s,D){var n=s.element||sap.ui.getCore().byId(s.element.id);var A=D.getAggregationAction("createContainer",n)[0];return A;};var a=function(o,s,D){var k=s.movedElements[0].element||sap.ui.getCore().byId(s.movedElements[0].id);var A=D.getAction("move",k);if(!A&&D.getMetadata().getName()==="sap.ui.dt.ElementDesignTimeMetadata"){var S=s.source.aggregation;var l=D.createAggregationDesignTimeMetadata(S);A=l.getAction("move",k);l.destroy();}return A;};var b=function(o,s,D){var r=s.renamedElement;var A=D.getAction("rename",r);return A;};var d=function(o,s,D){var r=s.removedElement;if(!r){r=o;}else if(!(r instanceof M)){throw new Error("No valid 'removedElement' found");}var A=D.getAction("remove",r);return A;};var e=function(o,s,D){var k=s.source;var A=D.getAction("combine",k);return A;};var g=function(o,s,D){var S=s.source;var A=D.getAction("split",S);return A;};var h=function(o,s,D){var n=s.element;var A=D.getAction("addODataProperty",n);return A;};var i=function(o,s,D){var r=s.directParent;var A=D.getAction("reveal",r);return A;};var m={"composite":{clazz:'sap.ui.rta.command.CompositeCommand'},"property":{clazz:'sap.ui.rta.command.Property'},"bindProperty":{clazz:'sap.ui.rta.command.BindProperty'},"createContainer":{clazz:'sap.ui.rta.command.CreateContainer',configure:f},"move":{clazz:'sap.ui.rta.command.Move',configure:a},"remove":{clazz:'sap.ui.rta.command.Remove',configure:d},"rename":{clazz:'sap.ui.rta.command.Rename',configure:b},"addODataProperty":{clazz:'sap.ui.rta.command.AddODataProperty',configure:h},"reveal":{clazz:'sap.ui.rta.command.Reveal',configure:i},"combine":{clazz:'sap.ui.rta.command.Combine',configure:e},"split":{clazz:'sap.ui.rta.command.Split',configure:g},"settings":{clazz:'sap.ui.rta.command.Settings'},"addLibrary":{clazz:'sap.ui.rta.command.appDescriptor.AddLibrary'}};var _=function(v,s,S,D,F,V){s=s[0].toLowerCase()+s.slice(1);var k=m[s];if(!k){throw new Error("Command '"+s+"' doesn't exist, check typing");}var l=k.clazz;jQuery.sap.require(l);var n=jQuery.sap.getObject(l);var I=v instanceof sap.ui.base.ManagedObject;S=jQuery.extend(S,{element:I?v:undefined,selector:I?undefined:v,name:s});var A;if(k.configure){A=k.configure(v,S,D);}var o;if(A&&A.changeOnRelevantContainer){o=O.getOverlay(v);S=jQuery.extend(S,{element:o.getRelevantContainer()});v=S.element;}if(A&&A.getState){S=jQuery.extend(S,{fnGetState:A.getState});}if(A&&A.restoreState){S=jQuery.extend(S,{fnRestoreState:A.restoreState});}var p=new n(S);var q=true;if(k.configure){q=c(v,p,A);}var P=q&&p.prepare(F,V);if(P){return p;}else{p.destroy();return undefined;}};
var j=M.extend("sap.ui.rta.command.CommandFactory",{metadata:{library:"sap.ui.rta",properties:{"flexSettings":{type:"object"}},associations:{},events:{}}});
j.prototype.init=function(){this.setProperty("flexSettings",{layer:"CUSTOMER",developerMode:true});};
j.prototype.setFlexSettings=function(F){this.setProperty("flexSettings",jQuery.extend(this.getFlexSettings(),F));};
j.prototype.getCommandFor=function(v,s,S,D,V){return _(v,s,S,D,this.getFlexSettings(),V);};
j.getCommandFor=function(v,s,S,D,F){return _(v,s,S,D,F);};
return j;},true);
sap.ui.predefine('sap/ui/rta/command/CompositeCommand',['sap/ui/rta/command/BaseCommand','sap/ui/fl/Utils'],function(B,f){"use strict";
var C=B.extend("sap.ui.rta.command.CompositeCommand",{metadata:{library:"sap.ui.rta",properties:{},aggregations:{commands:{type:"sap.ui.rta.command.BaseCommand",multiple:true}},events:{}}});
C.prototype.execute=function(){var p=[];this._forEachCommand(function(c){p.push(c.execute.bind(c));});return f.execPromiseQueueSequentially(p);};
C.prototype.undo=function(){var p=[];this._forEachCommandInReverseOrder(function(c){p.push(c.undo.bind(c));});return f.execPromiseQueueSequentially(p);};
C.prototype._forEachCommand=function(d){var c=this.getCommands();c.forEach(d,this);};
C.prototype._forEachCommandInReverseOrder=function(d){var c=this.getCommands();for(var i=c.length-1;i>=0;i--){d.call(this,c[i]);}};
return C;},true);
sap.ui.predefine('sap/ui/rta/command/CreateContainer',['jquery.sap.global','sap/ui/rta/command/FlexCommand'],function(q,F){"use strict";
var C=F.extend("sap.ui.rta.command.CreateContainer",{metadata:{library:"sap.ui.rta",properties:{index:{type:"int"},newControlId:{type:"string"},label:{type:"string"}},associations:{},events:{}}});
C.prototype._getChangeSpecificData=function(f){var s={changeType:this.getChangeType(),index:this.getIndex(),newControlId:this.getNewControlId(),newLabel:this.getLabel()};return s;};
return C;},true);
sap.ui.predefine('sap/ui/rta/command/FlexCommand',['sap/ui/rta/command/BaseCommand',"sap/ui/fl/FlexControllerFactory","sap/ui/rta/ControlTreeModifier","sap/ui/fl/Utils"],function(B,F,R,U){"use strict";
var a=B.extend("sap.ui.rta.command.FlexCommand",{metadata:{library:"sap.ui.rta",properties:{changeType:{type:"string"},fnGetState:{type:"any"},state:{type:"any"},fnRestoreState:{type:"any"},selector:{type:"object"}},associations:{},events:{}}});
a.prototype.getElementId=function(){var e=this.getElement();return e?e.getId():this.getSelector().id;};
a.prototype.getAppComponent=function(){if(!this._oControlAppComponent){var e=this.getElement();this._oControlAppComponent=e?U.getAppComponentForControl(e):this.getSelector().appComponent;}return this._oControlAppComponent;};
a.prototype.prepare=function(f,v){if(!this.getSelector()&&this.getElement()){var s={id:this.getElement().getId(),appComponent:this.getAppComponent(),controlType:U.getControlType(this.getElement())};this.setSelector(s);}try{this._oPreparedChange=this._createChange(f,v);}catch(e){jQuery.sap.log.error(e.message||e.name);return false;}return true;};
a.prototype.getPreparedChange=function(){if(!this._oPreparedChange){this.prepare();}return this._oPreparedChange;};
a.prototype.execute=function(){var c=this.getPreparedChange();return this._applyChange(c);};
a.prototype._getChangeSpecificData=function(){return{changeType:this.getChangeType(),selector:{id:this.getElementId()}};};
a.prototype._createChange=function(f,v){return this._createChangeFromData(this._getChangeSpecificData(),f,v);};
a.prototype._createChangeFromData=function(c,f,v){if(f){jQuery.extend(c,f);}var m=this.getAppComponent().getModel("$FlexVariants");var V;if(m&&v){V=m.getCurrentVariantRef(v);}var o=F.createForControl(this.getAppComponent());var b={"variantManagementKey":v,"variantKey":V};if(V){jQuery.extend(c,b);}return o.createChange(c,this.getElement()||this.getSelector());};
a.prototype.undo=function(){if(this.getFnRestoreState()){this.getFnRestoreState()((this.getElement()||this.getSelector()),this.getState());}else if(this._aRecordedUndo){R.performUndo(this._aRecordedUndo);}else{jQuery.sap.log.warning("Undo is not available for "+this.getElement()||this.getSelector());}return Promise.resolve();};
a.prototype._applyChange=function(c,n){var C=c.change||c;var A=this.getAppComponent();var o=C.getDefinition();var s=R.bySelector(C.getSelector(),A);if(this.getFnGetState()){this.setState.call(this,(this.getFnGetState()((this.getElement()||this.getSelector()),o,{modifier:R,appComponent:A})));}else{R.startRecordingUndo();}var f=F.createForControl(this.getAppComponent());return Promise.resolve(f.checkTargetAndApplyChange(C,s,{modifier:R,appComponent:A})).then(function(){if(n){f.removeFromAppliedChangesOnControl(C,A,s);}}).then(function(){if(!this.getFnGetState()){this._aRecordedUndo=R.stopRecordingUndo();}}.bind(this));};
return a;},true);
sap.ui.predefine('sap/ui/rta/command/LREPSerializer',['sap/ui/base/ManagedObject','sap/ui/rta/command/Stack','sap/ui/fl/FlexControllerFactory','sap/ui/fl/Utils','sap/ui/rta/ControlTreeModifier'],function(M,C,F,a,R){"use strict";
var L=M.extend("sap.ui.rta.command.LREPSerializer",{metadata:{library:"sap.ui.rta",associations:{"rootControl":{type:"sap.ui.core.Control"}},properties:{"commandStack":{type:"object"}},aggregations:{}}});
L.prototype.setCommandStack=function(c){this.setProperty("commandStack",c);c.attachCommandExecuted(function(e){this.handleCommandExecuted(e);}.bind(this));};
L.prototype.handleCommandExecuted=function(e){var p=e.getParameters();var c=this.getCommandStack().getSubCommands(p.command);if(p.undo){var f;c.forEach(function(o){var b=o.getPreparedChange();var A=o.getAppComponent();f=F.createForControl(A);if(o instanceof sap.ui.rta.command.FlexCommand){var g=R.bySelector(b.getSelector(),A);f.removeFromAppliedChangesOnControl(b,A,g);}f.deleteChange(b);});}else{var d=[];c.forEach(function(o){if(o instanceof sap.ui.rta.command.FlexCommand){var A=o.getAppComponent();var f=F.createForControl(A);f.addPreparedChange(o.getPreparedChange(),A);}else if(o instanceof sap.ui.rta.command.AppDescriptorCommand){d.push(o.createAndStore());}});return Promise.all(d);}};
L.prototype.saveCommands=function(){var r=sap.ui.getCore().byId(this.getRootControl());if(!r){throw new Error("Can't save commands without root control instance!");}var f=F.createForControl(r);return f.saveAll().then(function(){var c=a.getComponentClassName(sap.ui.getCore().byId(this.getRootControl())).replace(".Component","");var r=sap.ui.getCore().byId(this.getRootControl());var A=a.getAppVersionFromManifest(a.getAppComponentForControl(r).getManifest());f=F.create(c,A);return f.saveAll();}.bind(this)).then(function(){jQuery.sap.log.info("UI adaptation successfully transfered changes to layered repository");this.getCommandStack().removeAllCommands();}.bind(this));};
return L;},true);
sap.ui.predefine('sap/ui/rta/command/Move',['jquery.sap.global','sap/ui/rta/command/FlexCommand'],function(q,F){"use strict";
var M=F.extend("sap.ui.rta.command.Move",{metadata:{library:"sap.ui.rta",properties:{movedElements:{type:"any[]"},target:{type:"any"},source:{type:"any"}},associations:{},events:{}}});
M.prototype._getChangeSpecificData=function(i){var s=i?this.getTarget():this.getSource();var t=i?this.getSource():this.getTarget();if(s.parent){s.id=s.parent.getId();delete s.parent;}if(t.parent){t.id=t.parent.getId();delete t.parent;}var S={changeType:this.getChangeType(),source:s,target:t,movedElements:[]};this.getMovedElements().forEach(function(m){S.movedElements.push({id:m.id||(m.element&&m.element.getId()),sourceIndex:i?m.targetIndex:m.sourceIndex,targetIndex:i?m.sourceIndex:m.targetIndex});});return S;};
M.prototype.prepare=function(l,d){var s=F.prototype.prepare.apply(this,arguments);if(s){this._oPreparedUndoChange=this._createChangeFromData(this._getChangeSpecificData(true),l,d);}return s;};
M.prototype.undo=function(){return this._applyChange(this._oPreparedUndoChange,true);};
return M;},true);
sap.ui.predefine('sap/ui/rta/command/Property',['sap/ui/rta/command/FlexCommand',"sap/ui/rta/Utils"],function(F,U){"use strict";
var P=F.extend("sap.ui.rta.command.Property",{metadata:{library:"sap.ui.rta",properties:{propertyName:{type:"string"},newValue:{type:"any"},semanticMeaning:{type:"string"},changeType:{type:"string",defaultValue:"propertyChange"}},associations:{},events:{}}});
P.prototype._getChangeSpecificData=function(){var e=this.getElement();return{changeType:this.getChangeType(),selector:{id:e.getId(),type:e.getMetadata().getName()},content:{property:this.getPropertyName(),newValue:this.getNewValue(),semantic:this.getSemanticMeaning()}};};
return P;},true);
sap.ui.predefine('sap/ui/rta/command/Remove',['sap/ui/rta/command/FlexCommand'],function(F){"use strict";
var R=F.extend("sap.ui.rta.command.Remove",{metadata:{library:"sap.ui.rta",properties:{removedElement:{type:"any"}},associations:{},events:{}}});
R.prototype._getChangeSpecificData=function(){var e=this.getRemovedElement()||this.getElement();var s={changeType:this.getChangeType(),removedElement:{id:e.getId()}};return s;};
return R;},true);
sap.ui.predefine('sap/ui/rta/command/Rename',['jquery.sap.global','sap/ui/rta/command/FlexCommand'],function(q,F){"use strict";
var R=F.extend("sap.ui.rta.command.Rename",{metadata:{library:"sap.ui.rta",properties:{renamedElement:{type:"object"},newValue:{type:"string",defaultValue:"new text"}},associations:{},events:{}}});
R.prototype._getChangeSpecificData=function(){var s={changeType:this.getChangeType(),selector:{id:this.getElement().getId()},renamedElement:{id:this.getRenamedElement().getId()},value:this.getNewValue()};return s;};
return R;},true);
sap.ui.predefine('sap/ui/rta/command/Reveal',['sap/ui/rta/command/FlexCommand'],function(F){"use strict";
var R=F.extend("sap.ui.rta.command.Reveal",{metadata:{library:"sap.ui.rta",properties:{revealedElementId:{type:"string"},directParent:"object"}}});
R.prototype._getChangeSpecificData=function(){var s={changeType:this.getChangeType()};if(this.getRevealedElementId()){s.revealedElementId=this.getRevealedElementId();}return s;};
return R;},true);
sap.ui.predefine('sap/ui/rta/command/Settings',['sap/ui/rta/command/FlexCommand'],function(F){"use strict";
var S=F.extend("sap.ui.rta.command.Settings",{metadata:{library:"sap.ui.rta",properties:{content:{type:"any"}},associations:{},events:{}}});
S.prototype._getChangeSpecificData=function(f){var s={changeType:this.getChangeType(),content:this.getContent()};return s;};
S.prototype.execute=function(){if(this.getElement()){return F.prototype.execute.apply(this,arguments);}else{return Promise.resolve();}};
S.prototype.undo=function(){if(this.getElement()){return F.prototype.undo.apply(this,arguments);}else{return Promise.resolve();}};
return S;},true);
sap.ui.predefine('sap/ui/rta/command/Split',['sap/ui/rta/command/FlexCommand'],function(F){"use strict";
var S=F.extend("sap.ui.rta.command.Split",{metadata:{library:"sap.ui.rta",properties:{newElementIds:{type:"string[]"},source:{type:"any"},parentElement:{type:"any"}},associations:{},events:{}}});
S.prototype._getChangeSpecificData=function(){var s={newElementIds:this.getNewElementIds(),sourceControlId:this.getSource().getId(),changeType:this.getChangeType(),parentId:this.getParentElement().getId()};return s;};
return S;},true);
sap.ui.predefine('sap/ui/rta/command/Stack',['sap/ui/base/ManagedObject'],function(M){"use strict";
var S=M.extend("sap.ui.rta.command.Stack",{metadata:{library:"sap.ui.rta",properties:{},aggregations:{commands:{type:"sap.ui.rta.command.BaseCommand",multiple:true}},events:{modified:{},commandExecuted:{parameters:{command:{type:"object"},undo:{type:"boolean"}}}}}});
S.prototype._toBeExecuted=-1;S.prototype._oLastCommand=Promise.resolve();
S.prototype._getCommandToBeExecuted=function(){return this.getCommands()[this._toBeExecuted];};
S.prototype.pushExecutedCommand=function(c){this.push(c,true);};
S.prototype.push=function(c,e){if(this._bUndoneCommands){this._bUndoneCommands=false;while(this._toBeExecuted>-1){this.pop();}}this.insertCommand(c,0);if(!e){this._toBeExecuted++;}this.fireModified();};
S.prototype.top=function(){return this.getCommands()[0];};
S.prototype.pop=function(){if(this._toBeExecuted>-1){this._toBeExecuted--;}return this.removeCommand(0);};
S.prototype.removeCommand=function(o,s){var r=this.removeAggregation("commands",o,s);this.fireModified();return r;};
S.prototype.removeAllCommands=function(s){var c=this.removeAllAggregation("commands",s);this._toBeExecuted=-1;this.fireModified();return c;};
S.prototype.isEmpty=function(){return this.getCommands().length===0;};
S.prototype.execute=function(){this._oLastCommand=this._oLastCommand.catch(function(){}).then(function(){var c=this._getCommandToBeExecuted();if(c){return c.execute().then(function(){this._toBeExecuted--;this.fireCommandExecuted({command:c,undo:false});this.fireModified();}.bind(this)).catch(function(e){this.pop();return Promise.reject(e);}.bind(this));}}.bind(this));return this._oLastCommand;};
S.prototype._unExecute=function(){if(this.canUndo()){this._bUndoneCommands=true;this._toBeExecuted++;var c=this._getCommandToBeExecuted();if(c){return c.undo().then(function(){this.fireCommandExecuted({command:c,undo:true});this.fireModified();}.bind(this));}else{return Promise.resolve();}}else{return Promise.resolve();}};
S.prototype.canUndo=function(){return(this._toBeExecuted+1)<this.getCommands().length;};
S.prototype.undo=function(){return this._unExecute();};
S.prototype.canRedo=function(){return!!this._getCommandToBeExecuted();};
S.prototype.redo=function(){return this.execute();};
S.prototype.pushAndExecute=function(c){this.push(c);return this.execute();};
S.prototype.getAllExecutedCommands=function(){var a=[];var c=this.getCommands();for(var i=c.length-1;i>this._toBeExecuted;i--){var s=this.getSubCommands(c[i]);a=a.concat(s);}return a;};
S.prototype.getSubCommands=function(c){var C=[];if(c.getCommands){c.getCommands().forEach(function(s){var a=this.getSubCommands(s);C=C.concat(a);},this);}else{C.push(c);}return C;};
return S;},true);
sap.ui.predefine('sap/ui/rta/command/appDescriptor/AddLibrary',['sap/ui/rta/command/appDescriptor/AppDescriptorCommand','sap/ui/fl/descriptorRelated/api/DescriptorInlineChangeFactory'],function(A,D){"use strict";
var a=A.extend("sap.ui.rta.command.appDescriptor.AddLibrary",{metadata:{library:"sap.ui.rta",properties:{requiredLibraries:{type:"object"},layer:{type:"string"}},events:{}}});
a.prototype.prepare=function(f){this.setLayer(f.layer);return true;};
a.prototype.execute=function(){var p=[];if(this.getRequiredLibraries()){var l=Object.keys(this.getRequiredLibraries());l.forEach(function(L){p.push(sap.ui.getCore().loadLibrary(L,true));});}return Promise.all(p);};
a.prototype._create=function(){var p={};p.libraries=this.getRequiredLibraries();return D.create_ui5_addLibraries(p);};
return a;},true);
sap.ui.predefine('sap/ui/rta/command/appDescriptor/AppDescriptorCommand',['sap/ui/rta/command/BaseCommand','sap/ui/fl/descriptorRelated/api/DescriptorInlineChangeFactory','sap/ui/fl/descriptorRelated/api/DescriptorChangeFactory'],function(B,D,a){"use strict";
var A=B.extend("sap.ui.rta.command.AppDescriptorCommand",{metadata:{library:"sap.ui.rta",properties:{reference:{type:"string"},appComponent:{type:"object"}},events:{}}});
A.prototype.getPreparedChange=function(){return this._oPreparedChange;};
A.prototype._create=function(){};
A.prototype.createAndStore=function(){return this._create().then(function(o){return new a().createNew(this.getReference(),o,this.getLayer(),this.getAppComponent());}.bind(this)).then(function(o){var c=o.store();this._oPreparedChange=c;}.bind(this));};
return A;},true);
sap.ui.predefine('sap/ui/rta/library',['jquery.sap.global','sap/ui/core/Core','sap/ui/core/library'],function(q,C,c){"use strict";sap.ui.getCore().initLibrary({name:"sap.ui.rta",version:"1.50.6",dependencies:["sap.ui.core","sap.m","sap.ui.fl","sap.ui.dt"],types:[],interfaces:[],controls:[],elements:[]});return sap.ui.rta;},true);
sap.ui.predefine('sap/ui/rta/plugin/Combine',['sap/ui/rta/plugin/Plugin','sap/ui/dt/Selection','sap/ui/dt/OverlayRegistry','sap/ui/rta/Utils'],function(P,S,O,U){"use strict";
var C=P.extend("sap.ui.rta.plugin.Combine",{metadata:{library:"sap.ui.rta",properties:{},associations:{},events:{}}});
C.prototype._isEditable=function(o){if(!U.getRelevantContainerDesigntimeMetadata(o)){return false;}var c=this._getCombineAction(o);if(c&&c.changeType&&c.changeOnRelevantContainer){return this.hasChangeHandler(c.changeType,o.getRelevantContainer())&&this.hasStableId(o);}else{return false;}};
C.prototype._getCombineAction=function(o){return o.getDesignTimeMetadata()?o.getDesignTimeMetadata().getAction("combine",o.getElementInstance()):null;};
C.prototype._checkForSameRelevantContainer=function(s){var e=[];var r=[];for(var i=0,n=s.length;i<n;i++){e[i]=s[i].getElementInstance();r[i]=s[i].getRelevantContainer();if(i>0){if((r[0]!==r[i])||(e[0].getMetadata().getName()!==e[i].getMetadata().getName())){return false;}}}return true;};
C.prototype.isCombineAvailable=function(o){var s=this.getDesignTime().getSelection();if(s.length<=1){return false;}return(this._isEditableByPlugin(o)&&this._checkForSameRelevantContainer(s));};
C.prototype.isCombineEnabled=function(o){var s=this.getDesignTime().getSelection();if(!this.isCombineAvailable(o)||s.length<=1){return false;}var a=s.map(function(b){return b.getElementInstance();});var A=s.every(function(b){var c=this._getCombineAction(b);if(!c){return false;}if(typeof c.isEnabled!=="undefined"){if(typeof c.isEnabled==="function"){return c.isEnabled(a);}else{return c.isEnabled;}}return true;},this);return A;};
C.prototype.handleCombine=function(c){var e=O.getOverlay(c);var d=e.getDesignTimeMetadata();var t=[];var s=this.getDesignTime().getSelection();for(var i=0;i<s.length;i++){var o=s[i].getElementInstance();t.push(o);}var a=this.getCommandFactory().getCommandFor(c,"combine",{source:c,combineFields:t},d);this.fireElementModified({"command":a});};
return C;},true);
sap.ui.predefine('sap/ui/rta/plugin/ControlVariant',['sap/ui/rta/plugin/Plugin','sap/ui/rta/Utils','sap/ui/dt/ElementOverlay','sap/ui/dt/OverlayRegistry','sap/ui/dt/OverlayUtil','sap/ui/fl/changeHandler/BaseTreeModifier','sap/ui/fl/Utils','sap/ui/base/ManagedObject'],function(P,U,E,O,a,B,f,M){"use strict";E.prototype._variantManagement=undefined;
E.prototype.getVariantManagement=function(){return this._variantManagement;};
E.prototype.setVariantManagement=function(k){this._variantManagement=k;};
E.prototype.hasVariantManagement=function(){this._variantManagement?true:false;};
var C=P.extend("sap.ui.rta.plugin.ControlVariant",{metadata:{library:"sap.ui.rta",properties:{},associations:{},events:{}}});
C.prototype.registerElementOverlay=function(o){if(o.getElementInstance().getMetadata().getName()==="sap.ui.fl.variants.VariantManagement"){var c=o.getElementInstance();var A=c.getAssociation("for");var v=!jQuery.isArray(A)?[A]:A;v.forEach(function(V){var b=V instanceof M?V:sap.ui.getCore().byId(V);var d=O.getOverlay(b);var s=B.getSelector(c,f.getComponentForControl(c)).id;this._propagateVariantManagement(d,s);}.bind(this));}};
C.prototype._propagateVariantManagement=function(p,v){var e=[];p.setVariantManagement(v);e=a.getAllChildOverlays(p);e.forEach(function(o){e=e.concat(this._propagateVariantManagement(o,v));}.bind(this));return e;};
C.prototype.deregisterElementOverlay=function(o){};
return C;},true);
sap.ui.predefine('sap/ui/rta/plugin/CreateContainer',['sap/ui/rta/plugin/Plugin','sap/ui/fl/Utils','sap/ui/rta/Utils','sap/ui/dt/OverlayRegistry'],function(P,F,R,O){"use strict";
var C=P.extend("sap.ui.rta.plugin.CreateContainer",{metadata:{library:"sap.ui.rta",properties:{},associations:{},events:{}}});
C.prototype._isEditable=function(o,b){if(b===undefined||b===null){return this._isEditableCheck(o,false)||this._isEditableCheck(o,true);}else{return this._isEditableCheck(o,b);}};
C.prototype._isEditableCheck=function(o,b){var e=false;var p=this._getParentOverlay(b,o);if(!p||!p.getParentElementOverlay()){return false;}e=this.checkAggregationsOnSelf(p,"createContainer");if(e){var a=F.getViewForControl(p.getElementInstance());return this.hasStableId(o)&&F.checkControlId(a);}else{return false;}};
C.prototype._getParentOverlay=function(s,o){var p;if(s){p=o.getParentElementOverlay();}else{p=o;}return p;};
C.prototype.getCreateAction=function(s,o){var p=this._getParentOverlay(s,o);var d=p.getDesignTimeMetadata();var a=d.getAggregationAction("createContainer",o.getElementInstance());return a[0];};
C.prototype.isCreateAvailable=function(s,o){return this._isEditable(o,s);};
C.prototype.isCreateEnabled=function(s,o){var a=this.getCreateAction(s,o);if(!a){return false;}if(a.isEnabled&&typeof a.isEnabled==="function"){var i=a.isEnabled;var p=this._getParentOverlay(s,o);return i.call(null,p.getElementInstance());}else{return true;}};
C.prototype.getCreatedContainerOverlay=function(a,n){var i=n;if(a.getCreatedContainerId&&typeof a.getCreatedContainerId==="function"){var m=a.getCreatedContainerId;i=m.call(null,n);}return O.getOverlay(i);};
C.prototype._determineIndex=function(p,s,a,g){return R.getIndex(p,s,a,g);};
C.prototype._getText=function(a,e,d,t){if(!a){return t;}var c=d.getAggregationDescription(a.aggregation,e).singular;var T=sap.ui.getCore().getLibraryResourceBundle("sap.ui.rta");return T.getText(t,c);};
C.prototype.getCreateContainerText=function(s,o){var a=this.getCreateAction(s,o);var p=this._getParentOverlay(s,o);var d=p.getDesignTimeMetadata();var e=p.getElementInstance();var t="CTX_CREATE_CONTAINER";return this._getText(a,e,d,t);};
C.prototype._getContainerTitle=function(a,e,d){var t="TITLE_CREATE_CONTAINER";return this._getText(a,e,d,t);};
C.prototype.handleCreate=function(s,o){var a=this.getCreateAction(s,o);var p=this._getParentOverlay(s,o);var d=p.getDesignTimeMetadata();var t=p.getElementInstance();var v=F.getViewForControl(t);var S;if(s){S=o.getElementInstance();}var n=v.createId(jQuery.sap.uid());var g=d.getAggregation(a.aggregation).getIndex;var i=this._determineIndex(t,S,a.aggregation,g);var c=this.getCommandFactory().getCommandFor(t,"createContainer",{newControlId:n,label:this._getContainerTitle(a,t,d),index:i},d);this.fireElementModified({"command":c,"action":a,"newControlId":n});};
return C;},true);
sap.ui.predefine('sap/ui/rta/plugin/CutPaste',['jquery.sap.global','sap/ui/dt/plugin/CutPaste','sap/ui/dt/OverlayUtil','sap/ui/rta/plugin/Plugin','sap/ui/rta/plugin/RTAElementMover'],function(q,C,O,P,R){"use strict";
var a=C.extend("sap.ui.rta.plugin.CutPaste",{metadata:{library:"sap.ui.rta",properties:{commandFactory:{type:"object",multiple:false}},events:{dragStarted:{},elementModified:{command:{type:"sap.ui.rta.command.BaseCommand"}}}}});
a.prototype.init=function(){C.prototype.init.apply(this,arguments);this.setElementMover(new R({commandFactory:this.getCommandFactory()}));};
a.prototype.registerElementOverlay=function(o){C.prototype.registerElementOverlay.apply(this,arguments);if(o.isMovable()){P.prototype.addToPluginsList.apply(this,arguments);}};
a.prototype.deregisterElementOverlay=function(o){C.prototype.deregisterElementOverlay.apply(this,arguments);P.prototype.removeFromPluginsList.apply(this,arguments);};
a.prototype.paste=function(t){this._executePaste(t);this.fireElementModified({"command":this.getElementMover().buildMoveCommand()});this.stopCutAndPaste();};
return a;},true);
sap.ui.predefine('sap/ui/rta/plugin/DragDrop',['jquery.sap.global','sap/ui/dt/plugin/ControlDragDrop','sap/ui/rta/plugin/RTAElementMover','sap/ui/rta/plugin/Plugin'],function(q,C,R,P){"use strict";
var D=C.extend("sap.ui.rta.plugin.DragDrop",{metadata:{library:"sap.ui.rta",properties:{commandFactory:{type:"object",multiple:false}},events:{dragStarted:{},elementModified:{command:{type:"sap.ui.rta.command.BaseCommand"}}}}});
D.prototype.init=function(){C.prototype.init.apply(this,arguments);this.setElementMover(new R({commandFactory:this.getCommandFactory()}));};
D.prototype.setCommandFactory=function(c){this.setProperty("commandFactory",c);this.getElementMover().setCommandFactory(c);};
D.prototype.registerElementOverlay=function(o){C.prototype.registerElementOverlay.apply(this,arguments);if(o.isMovable()){this._attachMovableBrowserEvents(o);P.prototype.addToPluginsList.apply(this,arguments);}};
D.prototype.deregisterElementOverlay=function(o){C.prototype.deregisterElementOverlay.apply(this,arguments);P.prototype.removeFromPluginsList.apply(this,arguments);this._detachMovableBrowserEvents(o);};
D.prototype._attachMovableBrowserEvents=function(o){o.attachBrowserEvent("mouseover",this._onMouseOver,this);o.attachBrowserEvent("mouseleave",this._onMouseLeave,this);};
D.prototype._detachMovableBrowserEvents=function(o){o.detachBrowserEvent("mouseover",this._onMouseOver,this);o.detachBrowserEvent("mouseleave",this._onMouseLeave,this);};
D.prototype.onDragStart=function(o){this.fireDragStarted();C.prototype.onDragStart.apply(this,arguments);this.getDesignTime().getSelection().forEach(function(o){o.setSelected(false);});o.$().addClass("sapUiRtaOverlayPlaceholder");};
D.prototype.onDragEnd=function(o){this.fireElementModified({"command":this.getElementMover().buildMoveCommand()});o.$().removeClass("sapUiRtaOverlayPlaceholder");o.setSelected(true);o.focus();C.prototype.onDragEnd.apply(this,arguments);};
D.prototype.onMovableChange=function(o){C.prototype.onMovableChange.apply(this,arguments);if(o.isMovable()){this._attachMovableBrowserEvents(o);}else{this._detachMovableBrowserEvents(o);}};
D.prototype._onMouseOver=function(e){var o=sap.ui.getCore().byId(e.currentTarget.id);if(o!==this._oPreviousHoverTarget){if(this._oPreviousHoverTarget){this._oPreviousHoverTarget.$().removeClass("sapUiRtaOverlayHover");}this._oPreviousHoverTarget=o;o.$().addClass("sapUiRtaOverlayHover");}e.preventDefault();e.stopPropagation();};
D.prototype._onMouseLeave=function(e){if(this._oPreviousHoverTarget){this._oPreviousHoverTarget.$().removeClass("sapUiRtaOverlayHover");}delete this._oPreviousHoverTarget;e.preventDefault();e.stopPropagation();};
return D;},true);
sap.ui.predefine('sap/ui/rta/plugin/EasyAdd',['sap/ui/rta/plugin/additionalElements/AdditionalElementsPlugin','sap/ui/dt/OverlayRegistry'],function(A,O){"use strict";
var E=A.extend("sap.ui.rta.plugin.EasyAdd",{metadata:{library:"sap.ui.rta",properties:{},associations:{},events:{}}});
E.prototype.registerElementOverlay=function(o){this._oDelegate={"onAfterRendering":function(){var a=function(d,o,i){var C;if(d){C=o.getDesignTimeMetadata().getName().plural;}else{C=o.getDesignTimeMetadata().getAggregation("sections").childNames.plural();}this.showAvailableElements(d,[o],i,C);}.bind(this);var f=function(o,d,s,C,i){var e=function(h){var o=sap.ui.getCore().byId(h.getSource().getId().replace("-AddButton",""));a(s,o,i);h.cancelBubble();};var g=typeof C==="function"?C():C;this._addButton(o,e,d,g);}.bind(this);if(o.$().hasClass("sapUiRtaPersAdd")){var b=o.$().hasClass("sapUiRtaPersAdd")&&o.$().children(".sapUiRtaPersAddIconOuter").length<=0;var p=o.getElementInstance().getParent();var P=O.getOverlay(p);if(p.getMetadata().getName()==="sap.uxap.ObjectPageLayout"){if(P.$().hasClass("sapUiRtaPersAddTop")&&P.getAggregationOverlay("sections").$().children(".sapUiRtaPersAddIconOuter").length>-1){p.$("sectionsContainer").addClass("sapUiRtaPaddingTop");}}if(b){f(o,o.$(),true,o.getDesignTimeMetadata().getName().singular);}}else if(o.$().hasClass("sapUiRtaPersAddTop")){if(o.getAggregationOverlay("sections").$().children(".sapUiRtaPersAddIconOuter").length<=0){var $=o.getAggregationOverlay("sections").$();f(o,$,false,o.getDesignTimeMetadata().getAggregation("sections").childNames.singular,0);}}o.removeEventDelegate(this._oDelegate,this);}};var c=o.getElementInstance();if(c.getMetadata().getName()==="sap.uxap.ObjectPageSection"&&this.hasStableId(o)){o.addStyleClass("sapUiRtaPersAdd");c.addStyleClass("sapUiRtaMarginBottom");}else if(c.getMetadata().getName()==="sap.uxap.ObjectPageLayout"&&this.hasStableId(o)){o.addStyleClass("sapUiRtaPersAddTop");c.$("sectionsContainer").addClass("sapUiRtaPaddingTop");}o.addEventDelegate(this._oDelegate,this);A.prototype.registerElementOverlay.apply(this,arguments);};
E.prototype.deregisterElementOverlay=function(o){var c=o.getElementInstance();if(o._oAddButton){o._oAddButton.destroy();}if(c.getMetadata().getName()==="sap.uxap.ObjectPageSection"){o.removeStyleClass("sapUiRtaPersAdd");c.removeStyleClass("sapUiRtaMarginBottom");o.removeEventDelegate(this._oDelegate,this);}else if(c.getMetadata().getName()==="sap.uxap.ObjectPageLayout"){o.removeStyleClass("sapUiRtaPersAddTop");c.$("sectionsContainer").removeClass("sapUiRtaPaddingTop");}};
E.prototype._addButton=function(o,c,a,C){var i=o.getId()+"-AddButton";var h=jQuery("<div class='sapUiRtaPersAddIconOuter' draggable='true'> </div>");o._oAddButton=new sap.m.Button(i,{text:"Add "+C,icon:"sap-icon://add",press:c}).placeAt(h.get(0));a.append(h);h[0].addEventListener("mouseover",function(e){e.stopPropagation();var o=e.fromElement?sap.ui.getCore().byId(e.fromElement.id):null;if(o&&o.getMetadata().getName()==="sap.ui.dt.ElementOverlay"){var p=o.getParentElementOverlay();p.$().removeClass("sapUiRtaOverlayHover");}});h[0].addEventListener("mouseleave",function(e){e.stopPropagation();var o=e.toElement?sap.ui.getCore().byId(e.toElement.id):null;if(o&&o.getMetadata().getName()==="sap.ui.dt.ElementOverlay"){var p=o.getParentElementOverlay();if(p.getMovable()){p.$().addClass("sapUiRtaOverlayHover");}}});h[0].addEventListener("dragstart",function(e){e.stopPropagation();e.preventDefault();});};
return E;},true);
sap.ui.predefine('sap/ui/rta/plugin/EasyRemove',['sap/ui/rta/plugin/Remove'],function(R){"use strict";
var E=R.extend("sap.ui.rta.plugin.EasyRemove",{metadata:{library:"sap.ui.rta",properties:{},associations:{},events:{}}});
E.prototype.registerElementOverlay=function(o){this._oDelegate={"onAfterRendering":function(){var a=function(o){this._handleRemove([o]);}.bind(this);if(o.$().hasClass("sapUiRtaPersDelete")&&o.$().children(".sapUiRtaPersDeleteClick").length<=0){var i=o.getId()+"-DeleteIcon";var h=jQuery("<div class='sapUiRtaPersDeleteClick' draggable='true'> </div>");var H=jQuery("<div class='sapUiRtaPersDeleteIconOuter'> </div>");o._oDeleteIcon=new sap.ui.core.Icon(i,{src:"sap-icon://decline",tooltip:sap.ui.getCore().getLibraryResourceBundle("sap.ui.rta").getText("CTX_REMOVE"),press:function(e){var o=sap.ui.getCore().byId(e.getSource().getId().replace("-DeleteIcon",""));a(o);e.cancelBubble();},noTabStop:true}).placeAt(H.get(0));h.append(H);o.$().append(h);o._oDeleteIcon.attachBrowserEvent("contextmenu",function(e){e.stopPropagation();e.preventDefault();});h[0].addEventListener("dragstart",function(e){e.stopPropagation();e.preventDefault();});}o.removeEventDelegate(this._oDelegate,this);}};var c=o.getElementInstance();if(c.getMetadata().getName()==="sap.uxap.ObjectPageSection"&&this.hasStableId(o)){o.addStyleClass("sapUiRtaPersDelete");}o.addEventDelegate(this._oDelegate,this);R.prototype.registerElementOverlay.apply(this,arguments);};
E.prototype.deregisterElementOverlay=function(o){var c=o.getElementInstance();if(c.getMetadata().getName()==="sap.uxap.ObjectPageSection"){o.removeStyleClass("sapUiRtaPersDelete");o.removeEventDelegate(this._oDelegate,this);if(o._oDeleteIcon){o._oDeleteIcon.destroy();}}};
return E;},true);
sap.ui.predefine('sap/ui/rta/plugin/Plugin',['sap/ui/dt/Plugin','sap/ui/fl/Utils','sap/ui/fl/registry/ChangeRegistry'],function(P,F,C){"use strict";
var B=P.extend("sap.ui.rta.plugin.Plugin",{metadata:{"abstract":true,library:"sap.ui.rta",properties:{commandFactory:{type:"object",multiple:false}},events:{elementModified:{command:{type:"sap.ui.rta.command.BaseCommand"}}}}});
B.prototype._isEditable=function(){};
B.prototype._isEditableByPlugin=function(o){var p=this.getMetadata().getName();var a=o.getEditableByPlugins();return a.indexOf(p)>-1;};
B.prototype.registerElementOverlay=function(o){if(this._isEditable(o)){this.addToPluginsList(o);}};
B.prototype.deregisterElementOverlay=function(o){this.removeFromPluginsList(o);};
B.prototype.hasStableId=function(o){if(!o){return false;}else if(!o.getDesignTimeMetadata()){return F.checkControlId(o.getElementInstance());}var s=false;var d=o.getDesignTimeMetadata();var e=o.getElementInstance();var g=d.getData().getStableElements;if(g){var S=g(e);var u=S?S.some(function(v){var c=v.id||v;if(!F.checkControlId(c,v.appComponent)){return true;}}):true;s=!u;}else{s=F.checkControlId(e);}return s;};
B.prototype.getVariantManagementKey=function(o,e,c){var v;if(o.getVariantManagement&&this._hasVariantChangeHandler(c,e)){v=o.getVariantManagement();}return v;};
B.prototype._hasVariantChangeHandler=function(c,e){var o=this._getChangeHandler(c,e);o.revertChange=true;return(o&&o.revertChange);};
B.prototype.checkAggregationsOnSelf=function(o,a){var d=o.getDesignTimeMetadata();var e=o.getElementInstance();var i=false;var A=d.getAggregationAction(a,o.getElementInstance())[0];var c=A?A.changeType:null;var b=A&&A.changeOnRelevantContainer;if(b){e=o.getRelevantContainer();}if(c&&this.hasChangeHandler(c,e)){i=true;}return i;};
B.prototype.removeFromPluginsList=function(o){o.removeEditableByPlugin(this.getMetadata().getName());if(!o.getEditableByPlugins().length){o.setEditable(false);}};
B.prototype.addToPluginsList=function(o){o.addEditableByPlugin(this.getMetadata().getName());o.setEditable(true);};
B.prototype.hasChangeHandler=function(c,e){return!!this._getChangeHandler(c,e);};
B.prototype._getChangeHandler=function(c,e){var s=e.getMetadata().getName();var r=C.getInstance().getRegistryItems({controlType:s,changeTypeName:c,layer:this.getCommandFactory().getFlexSettings().layer});if(r&&r[s]&&r[s][c]){var R=r[s][c];return R.getChangeTypeMetadata().getChangeHandler();}return undefined;};
return B;},true);
sap.ui.predefine('sap/ui/rta/plugin/RTAElementMover',['sap/ui/dt/plugin/ElementMover','sap/ui/dt/OverlayUtil','sap/ui/dt/ElementUtil','sap/ui/fl/Utils','sap/ui/rta/Utils','sap/ui/rta/command/CommandFactory','sap/ui/rta/plugin/Plugin','sap/ui/dt/OverlayRegistry','sap/ui/rta/util/BindingsExtractor'],function(E,O,a,F,U,C,P,b,B){"use strict";
var R=E.extend("sap.ui.rta.plugin.RTAElementMover",{metadata:{library:"sap.ui.rta",properties:{commandFactory:{type:"any",defaultValue:C},movableTypes:{type:"string[]",defaultValue:["sap.ui.core.Element"]}},associations:{},events:{}}});
R.prototype.init=function(){this.oBasePlugin=new P({commandFactory:this.getCommandFactory()});};
R.prototype.exit=function(){this.oBasePlugin.destroy();};
R.prototype.setCommandFactory=function(c){this.setProperty("commandFactory",c);this.oBasePlugin.setCommandFactory(c);};
function i(o){var v=false,d=o.getDesignTimeMetadata(),p=o.getParentElementOverlay(),c;if(!d||!p){return false;}var r=o.getRelevantContainer();var e=sap.ui.dt.OverlayRegistry.getOverlay(r);if(!U.getRelevantContainerDesigntimeMetadata(o)){return false;}var m=this._getMoveAction(o);if(m&&m.changeType){c=o.getRelevantContainer();v=this.oBasePlugin.hasChangeHandler(m.changeType,c);}if(v){v=this.oBasePlugin.hasStableId(o)&&this.oBasePlugin.hasStableId(p)&&this.oBasePlugin.hasStableId(e);}return v;}
function h(A,e,r){var o=A.getDesignTimeMetadata();var m=o.getAction("move",e);if(!m){return false;}return this.oBasePlugin.hasChangeHandler(m.changeType,r);}
E.prototype._getMoveAction=function(o){var p,c=o.getParentAggregationOverlay();if(c){p=c.getDesignTimeMetadata();}return p?p.getAction("move",o.getElementInstance()):undefined;};
E.prototype.isMovableType=function(e){return true;};
R.prototype.checkMovable=function(o){return i.call(this,o);};
R.prototype.checkTargetZone=function(A){var t=E.prototype.checkTargetZone.call(this,A);if(!t){return false;}var m=this.getMovedOverlay();var M=m.getElementInstance();var T=A.getParent();var o=m.getRelevantContainer();var c=T.getElementInstance();var v=A.getDesignTimeMetadata().getRelevantContainerForPropagation(M);v=v?v:c;if(!o||!v||!P.prototype.hasStableId(T)||o!==v){return false;}if(m.getParent().getElementInstance()!==c){var d=B.getBindings(M,M.getModel());if(Object.keys(d).length>0&&c.getBindingContext()){var s=U.getEntityTypeByPath(M.getModel(),M.getBindingContext().getPath());var e=U.getEntityTypeByPath(c.getModel(),c.getBindingContext().getPath());if(!(s===e)){return false;}}}return h.call(this,A,M,v);};
R.prototype.buildMoveCommand=function(){var m=this.getMovedOverlay();var p=m.getParentAggregationOverlay();var M=m.getElementInstance();var s=this._getSource();var r=m.getRelevantContainer();var t=O.getParentInformation(m);var S=s.index;var T=t.index;var c=this._compareSourceAndTarget(s,t);if(c){return undefined;}delete s.index;delete t.index;var o=this.getCommandFactory().getCommandFor(r,"Move",{movedElements:[{element:M,sourceIndex:S,targetIndex:T}],source:s,target:t},p.getDesignTimeMetadata());return o;};
return R;},true);
sap.ui.predefine('sap/ui/rta/plugin/Remove',['sap/ui/rta/plugin/Plugin','sap/ui/rta/Utils','sap/ui/rta/command/CompositeCommand','sap/ui/dt/OverlayRegistry'],function(P,U,C,O){"use strict";
var R=P.extend("sap.ui.rta.plugin.Remove",{metadata:{library:"sap.ui.rta",properties:{},associations:{},events:{}}});
R.prototype.registerElementOverlay=function(o){if(this.isRemoveEnabled(o)){o.attachBrowserEvent("keydown",this._onKeyDown,this);}P.prototype.registerElementOverlay.apply(this,arguments);};
R.prototype._isEditable=function(o){var e=false;var E=o.getElementInstance();var p=U.getRelevantContainerDesigntimeMetadata(o);if(!p){return false;}var r=this._getRemoveAction(o);if(r&&r.changeType){if(r.changeOnRelevantContainer){E=o.getRelevantContainer();}e=this.hasChangeHandler(r.changeType,E);}if(e){return this.hasStableId(o);}return e;};
R.prototype._getRemoveAction=function(o){return o.getDesignTimeMetadata()?o.getDesignTimeMetadata().getAction("remove",o.getElementInstance()):null;};
R.prototype.isRemoveAvailable=function(o){return this._isEditableByPlugin(o);};
R.prototype.isRemoveEnabled=function(o){var a=this._getRemoveAction(o);if(!a){return false;}if(typeof a.isEnabled!=="undefined"){if(typeof a.isEnabled==="function"){return a.isEnabled(o.getElementInstance());}else{return a.isEnabled;}}return true;};
R.prototype._getConfirmationText=function(o){var a=this._getRemoveAction(o);if(a&&a.getConfirmationText){return a.getConfirmationText(o.getElementInstance());}};
R.prototype.deregisterElementOverlay=function(o){if(this.isRemoveEnabled(o)){o.detachBrowserEvent("keydown",this._onKeyDown,this);}P.prototype.deregisterElementOverlay.apply(this,arguments);};
R.prototype._onKeyDown=function(e){if(e.keyCode===jQuery.sap.KeyCodes.DELETE){e.stopPropagation();this.removeElement();}};
R.prototype.removeElement=function(o){var s;if(o){s=o;}else{var d=this.getDesignTime();s=d.getSelection();}s=s.filter(this.isRemoveEnabled,this);if(s.length>0){this._handleRemove(s);}};
R.prototype._getRemoveCommand=function(r,d,v){return this.getCommandFactory().getCommandFor(r,"Remove",{removedElement:r},d,v);};
R.prototype._fireElementModified=function(c){if(c.getCommands().length){this.fireElementModified({"command":c});}};
R.prototype._handleRemove=function(s){var p=[];var c=new C();var S=function(o){o.setSelected(true);setTimeout(function(){o.focus();},0);};var n=R._getElementToFocus(s);s.forEach(function(o){var a;var r=o.getElementInstance();var d=o.getDesignTimeMetadata();var b=this._getRemoveAction(o);var e;if(b.changeOnRelevantContainer){e=o.getRelevantContainer();}else{e=r;}var v=this.getVariantManagementKey(o,e,b.changeType);var f=this._getConfirmationText(o);if(f){p.push(U.openRemoveConfirmationDialog(r,f).then(function(g){if(g){a=this._getRemoveCommand(r,d,v);c.addCommand(a);}}.bind(this)));}else{a=this._getRemoveCommand(r,d,v);c.addCommand(a);}},this);if(p.length){Promise.all(p).then(function(){this._fireElementModified(c);S(n);}.bind(this));}else{this._fireElementModified(c);S(n);}};
R._getElementToFocus=function(s){var n;if(s.length===1){var o=s[0];var S=o.getParent().getAggregation(o.sParentAggregationName);if(S.length>1){var i=S.indexOf(o);var c=S.slice(i+1);if(i!==0){c=c.concat(S.slice(0,i).reverse());}n=c.filter(function(a){return a.getElementInstance().getVisible();}).shift();}}if(!n){n=O.getOverlay(s[0].getRelevantContainer());}return n;};
return R;},true);
sap.ui.predefine('sap/ui/rta/plugin/Rename',['jquery.sap.global','sap/ui/rta/plugin/Plugin','sap/ui/dt/Overlay','sap/ui/dt/ElementUtil','sap/ui/dt/OverlayUtil','sap/ui/dt/OverlayRegistry','sap/ui/rta/Utils','sap/ui/dt/DOMUtil'],function(q,P,O,E,a,b,U,D){"use strict";
var R=P.extend("sap.ui.rta.plugin.Rename",{metadata:{library:"sap.ui.rta",properties:{oldValue:"string"},associations:{},events:{"editable":{},"nonEditable":{}}}});
R.prototype.exit=function(){P.prototype.exit.apply(this,arguments);if(this._$oEditableControlDomRef){this._stopEdit();}clearTimeout(this._iStopTimeout);};
R.prototype.setDesignTime=function(d){this._aSelection=[];var o=this.getDesignTime();if(o){o.detachSelectionChange(this._onDesignTimeSelectionChange,this);}P.prototype.setDesignTime.apply(this,arguments);if(d){d.attachSelectionChange(this._onDesignTimeSelectionChange,this);this._aSelection=d.getSelection();}};
R.prototype._getRenameAction=function(o){var d=o.getDesignTimeMetadata();if(d&&d.getAction){return d.getAction("rename",o.getElementInstance());}};
R.prototype.isRenameAvailable=function(o){return this._isEditableByPlugin(o);};
R.prototype.isRenameEnabled=function(o){var i=true;var A=this._getRenameAction(o);if(!A){i=false;}if(i&&typeof A.isEnabled!=="undefined"){if(typeof A.isEnabled==="function"){i=A.isEnabled(o.getElementInstance());}else{i=A.isEnabled;}}if(i){var d=o.getDesignTimeMetadata();if(!d.getAssociatedDomRef(o.getElementInstance(),A.domRef)){i=false;}}return i;};
R.prototype.registerElementOverlay=function(o){o.attachEvent("editableChange",this._manageClickEvent,this);P.prototype.registerElementOverlay.apply(this,arguments);};
R.prototype._isEditable=function(o){var e=false;var c=o.getElementInstance();if(!U.getRelevantContainerDesigntimeMetadata(o)){return false;}var r=this._getRenameAction(o);if(r&&r.changeType){if(r.changeOnRelevantContainer){c=o.getRelevantContainer();}e=this.hasChangeHandler(r.changeType,c);}if(e){return this.hasStableId(o);}return e;};
R.prototype.deregisterElementOverlay=function(o){o.detachEvent("editableChange",this._manageClickEvent,this);o.detachBrowserEvent("click",this._onClick,this);this.removeFromPluginsList(o);};
R.prototype._onClick=function(e){var o=sap.ui.getCore().byId(e.currentTarget.id);if(this.isRenameEnabled(o)&&!e.metaKey&&!e.ctrlKey){this.startEdit(o);e.preventDefault();}};
R.prototype._onDesignTimeSelectionChange=function(e){var s=e.getParameter("selection");this._aSelection.forEach(this._manageClickEvent,this);s.forEach(this._manageClickEvent,this);this._aSelection=s;};
R.prototype._manageClickEvent=function(e){var o=e.getSource?e.getSource():e;if(o.isSelected()&&this.isRenameAvailable(o)){o.attachBrowserEvent("click",this._onClick,this);}else{o.detachBrowserEvent("click",this._onClick,this);}};
R.prototype.startEdit=function(o){this._oEditedOverlay=o;var e=o.getElementInstance();var d=this._oEditedOverlay.getDesignTimeMetadata();var v=d.getAction("rename",e).domRef;var c=d.getAssociatedDomRef(e,v);if(!U.isElementInViewport(c)){c.get(0).scrollIntoView();}this._$oEditableControlDomRef=q(c);var f=sap.ui.dt.OverlayRegistry.getOverlay(c.id)||o;var w=q("<div class='sapUiRtaEditableField'></div>").appendTo(f.$());this._$editableField=q("<div contentEditable='true'></div>").appendTo(w);if(this._$oEditableControlDomRef.text()===""){this._$oEditableControlDomRef.text("_?_");this._$editableField.text("");}else{this._$editableField.text(this._$oEditableControlDomRef.text());}D.copyComputedStyle(this._$oEditableControlDomRef,this._$editableField);this._$editableField.children().remove();this._$editableField.css('visibility','hidden');this._$editableField.css({"-moz-user-modify":"read-write","-webkit-user-modify":"read-write","-ms-user-modify":"read-write","user-modify":"read-write","text-overflow":"clip"});O.getMutationObserver().ignoreOnce({target:this._$oEditableControlDomRef.get(0)});this._$editableField.one("focus",this._onEditableFieldFocus.bind(this));this._$editableField.on("blur",this._onEditableFieldBlur.bind(this));this._$editableField.on("keydown",this._onEditableFieldKeydown.bind(this));this._$editableField.on("dragstart",this._stopPropagation.bind(this));this._$editableField.on("drag",this._stopPropagation.bind(this));this._$editableField.on("dragend",this._stopPropagation.bind(this));this._$editableField.on("click",this._stopPropagation.bind(this));this._$editableField.on("mousedown",this._stopPropagation.bind(this));this.setOldValue(this._getCurrentEditableFieldText());setTimeout(function(){this._$oEditableControlDomRef.css("visibility","hidden");this._$editableField.offset({left:this._$oEditableControlDomRef.offset().left});this._$editableField.offset({top:this._$oEditableControlDomRef.offset().top});this._$editableField.css('visibility','');this._$editableField.focus();o.setSelected(true);sap.ui.getCore().getEventBus().publish('sap.ui.rta','plugin.Rename.startEdit',{overlay:o,editableField:this._$editableField});}.bind(this),0);};
R.prototype._stopPropagation=function(e){e.stopPropagation();};
R.prototype._onEditableFieldFocus=function(e){this._oEditedOverlay.setSelected(false);var c=e.target;var r=document.createRange();r.selectNodeContents(c);var s=window.getSelection();s.removeAllRanges();s.addRange(r);};
R.prototype._stopEdit=function(r){if(this._$oEditableControlDomRef.text()==="_?_"){this._$oEditableControlDomRef.text("");}this._oEditedOverlay.$().find(".sapUiRtaEditableField").remove();O.getMutationObserver().ignoreOnce({target:this._$oEditableControlDomRef.get(0)});this._$oEditableControlDomRef.css("visibility","visible");if(r){var o=this._oEditedOverlay;this._iStopTimeout=setTimeout(function(){o.setSelected(true);o.focus();sap.ui.getCore().getEventBus().publish('sap.ui.rta','plugin.Rename.stopEdit',{overlay:o});},500);}this._oEditedOverlay.setSelected(false);delete this._$editableField;delete this._$oEditableControlDomRef;delete this._oEditedOverlay;};
R.prototype._onEditableFieldBlur=function(e){this._emitLabelChangeEvent();this._stopEdit();};
R.prototype._onEditableFieldKeydown=function(e){switch(e.keyCode){case q.sap.KeyCodes.ENTER:this._emitLabelChangeEvent();this._stopEdit(true);e.preventDefault();break;case q.sap.KeyCodes.ESCAPE:this._stopEdit(true);e.preventDefault();break;case q.sap.KeyCodes.DELETE:e.stopPropagation();break;default:}};
R.prototype._emitLabelChangeEvent=function(){var t=this._getCurrentEditableFieldText();if(this.getOldValue()!==t){this._$oEditableControlDomRef.text(t);try{var r;var o=this._oEditedOverlay.getElementInstance();var d=this._oEditedOverlay.getDesignTimeMetadata();r=this.getCommandFactory().getCommandFor(o,"rename",{renamedElement:o,newValue:t},d);this.fireElementModified({"command":r});}catch(e){q.sap.log.error("Error during rename : ",e);}}};
R.prototype._getCurrentEditableFieldText=function(){var t=this._$editableField.text();if(t===""){t='\xa0';}return t;};
return R;},true);
sap.ui.predefine('sap/ui/rta/plugin/Selection',['sap/ui/rta/plugin/Plugin','sap/ui/rta/Utils','sap/ui/fl/Utils'],function(P,U,F){"use strict";
var S=P.extend("sap.ui.rta.plugin.Selection",{metadata:{library:"sap.ui.rta",properties:{multiSelectionRequiredPlugins:{type:"string[]"}},associations:{},events:{elementEditableChange:{parameters:{editable:{type:"boolean"}}}}}});
S.prototype._checkDeveloperMode=function(o){if(o.getDesignTimeMetadata()){var d=this.getCommandFactory().getFlexSettings().developerMode;if(d&&this.hasStableId(o)){o.setEditable(true);o.setSelectable(true);this.fireElementEditableChange({editable:true});return true;}}return false;};
S.prototype.registerElementOverlay=function(o){if(!this._checkDeveloperMode(o)){o.attachEditableChange(this._onEditableChange,this);this._adaptSelectable(o);}o.attachBrowserEvent("click",this._selectOverlay,this);o.attachBrowserEvent("keydown",this._onKeyDown,this);o.attachBrowserEvent("mousedown",this._onMouseDown,this);};
S.prototype._onEditableChange=function(e){var o=e.getSource();this._adaptSelectable(o);};
S.prototype._adaptSelectable=function(o){var s=o.getEditable();if(o.getSelectable()!==s){o.setSelectable(s);this.fireElementEditableChange({editable:s});}};
S.prototype.deregisterElementOverlay=function(o){o.detachBrowserEvent("click",this._selectOverlay,this);o.detachBrowserEvent("keydown",this._onKeyDown,this);o.detachBrowserEvent("mousedown",this._onMouseDown,this);o.detachEditableChange(this._onEditableChange,this);};
S.prototype._setFocusOnOverlay=function(o,e){if(o&&o.getSelectable()){o.focus();e.stopPropagation();}};
S.prototype._onKeyDown=function(e){var o=U.getFocusedOverlay();if(e.keyCode===jQuery.sap.KeyCodes.ENTER){this._selectOverlay(e);}else if(e.keyCode===jQuery.sap.KeyCodes.ARROW_UP&&e.shiftKey===false&&e.altKey===false){if(o){var p=U.getFocusableParentOverlay(o);this._setFocusOnOverlay(p,e);e.preventDefault();}}else if(e.keyCode===jQuery.sap.KeyCodes.ARROW_DOWN&&e.shiftKey===false&&e.altKey===false){if(o){var f=U.getFirstFocusableDescendantOverlay(o);this._setFocusOnOverlay(f,e);e.preventDefault();}}else if(e.keyCode===jQuery.sap.KeyCodes.ARROW_LEFT&&e.shiftKey===false&&e.altKey===false){if(o){var d=U.getPreviousFocusableSiblingOverlay(o);this._setFocusOnOverlay(d,e);e.preventDefault();}}else if(e.keyCode===jQuery.sap.KeyCodes.ARROW_RIGHT&&e.shiftKey===false&&e.altKey===false){if(o){var n=U.getNextFocusableSiblingOverlay(o);this._setFocusOnOverlay(n,e);e.preventDefault();}}};
S.prototype._selectOverlay=function(e){var o=sap.ui.getCore().byId(e.currentTarget.id);var m=e.metaKey||e.ctrlKey;var t=e.target.className;if(o.getSelectable()&&t.indexOf("sapUiDtOverlay")>-1){if(m){this.getDesignTime().setSelectionMode(sap.ui.dt.SelectionMode.Multi);}o.setSelected(!o.getSelected());if(m){this.getDesignTime().setSelectionMode(sap.ui.dt.SelectionMode.Single);}e.preventDefault();e.stopPropagation();}};
S.prototype._onMouseDown=function(e){if(sap.ui.Device.browser.name=="ie"){var t=sap.ui.getCore().byId(e.target.id);var T=e.target.className==="sapUiDtOverlayScrollContainer";var o=sap.ui.getCore().byId(e.currentTarget.id);if((T||t instanceof sap.ui.dt.Overlay)&&o instanceof sap.ui.dt.Overlay){if(o.getSelectable()){o.focus();e.stopPropagation();}else{o.getDomRef().blur();}}}};
S.prototype.setDesignTime=function(d){if(this.getDesignTime()){this.getDesignTime().detachSelectionChange(this._onDesignTimeSelectionChange,this);}P.prototype.setDesignTime.apply(this,arguments);if(this.getDesignTime()){this.getDesignTime().attachSelectionChange(this._onDesignTimeSelectionChange,this);}};
S.prototype._onDesignTimeSelectionChange=function(e){if(this.getDesignTime().getSelectionMode()===sap.ui.dt.SelectionMode.Single){return;}var C=e.getParameter("selection")[e.getParameter("selection").length-1];var s=this.getDesignTime().getSelection();if(s&&s.length===1){C.setSelected(true);return;}if(!C||this.getDesignTime().getSelectionMode()===sap.ui.dt.SelectionMode.Single){return;}var m=_(s,this.getMultiSelectionRequiredPlugins())&&a(s)&&(b(s,C)||c(s,C));C.setSelected(m);};
function _(s,m){var d=m;s.forEach(function(o){var e=o.getEditableByPlugins();d=d.reduce(function(f,p){if(e.indexOf(p)!==-1){f.push(p);}return f;},[]);});return d.length>0;}
function a(s){var C=s[s.length-1];var p=s[s.length-2];var o=C.getRelevantContainer();var d=p.getRelevantContainer();return o===d;}
function b(s,o){return!s.some(function(d){return d.getParentElementOverlay()!==o.getParentElementOverlay();});}
function c(s,o){var d=o.getElementInstance().getMetadata().getName();return!s.some(function(e){var C=e.getElementInstance().getMetadata().getName();return(C!==d);});}
return S;},true);
sap.ui.predefine('sap/ui/rta/plugin/Settings',['sap/ui/rta/plugin/Plugin','sap/ui/rta/Utils'],function(P,U){"use strict";
var S=P.extend("sap.ui.rta.plugin.Settings",{metadata:{library:"sap.ui.rta",properties:{commandStack:{type:"any"}},associations:{},events:{}}});
S.prototype._isEditable=function(o){if(!U.getRelevantContainerDesigntimeMetadata(o)){return false;}var s=this._getSettingsAction(o);if(s&&s.handler){return this.hasStableId(o);}return false;};
S.prototype._getUnsavedChanges=function(i,c){var e;var u=this.getCommandStack().getAllExecutedCommands().filter(function(C){e=C.getElementId();if(e===i&&c.indexOf(C.getChangeType())>=0){return true;}}).map(function(C){return C.getPreparedChange();});return u;};
S.prototype._getSettingsAction=function(o){return o.getDesignTimeMetadata()?o.getDesignTimeMetadata().getAction("settings",o.getElementInstance()):null;};
S.prototype.isSettingsAvailable=function(o){return this._isEditableByPlugin(o);};
S.prototype.isSettingsEnabled=function(o){var a=this._getSettingsAction(o);if(!a){return false;}if(typeof a.isEnabled!=="undefined"){if(typeof a.isEnabled==="function"){return a.isEnabled(o.getElementInstance());}else{return a.isEnabled;}}return true;};
S.prototype.handleSettings=function(s){var o;var e=s[0].getElementInstance();var p={getUnsavedChanges:this._getUnsavedChanges.bind(this),styleClass:U.getRtaStyleClassName()};return s[0].getDesignTimeMetadata().getAction("settings").handler(e,this._getUnsavedChanges.bind(this),p).then(function(c){c.forEach(function(C){o=this.getCommandFactory().getCommandFor(C.selectorControl,"settings",C.changeSpecificData);this.fireElementModified({"command":o});},this);}.bind(this))['catch'](function(E){if(E){throw E;}});};
return S;},true);
sap.ui.predefine('sap/ui/rta/plugin/Split',['sap/ui/rta/plugin/Plugin','sap/ui/dt/Selection','sap/ui/dt/OverlayRegistry','sap/ui/rta/Utils','sap/ui/fl/Utils'],function(P,S,O,U,F){"use strict";
var a=P.extend("sap.ui.rta.plugin.Split",{metadata:{library:"sap.ui.rta",properties:{},associations:{},events:{}}});
a.prototype._isEditable=function(o){if(!U.getRelevantContainerDesigntimeMetadata(o)){return false;}var s=this._getSplitAction(o);if(s&&s.changeType&&s.changeOnRelevantContainer){return this.hasStableId(o)&&this.hasChangeHandler(s.changeType,o.getRelevantContainer());}else{return false;}};
a.prototype._getSplitAction=function(o){return o.getDesignTimeMetadata()?o.getDesignTimeMetadata().getAction("split",o.getElementInstance()):null;};
a.prototype.isSplitAvailable=function(o){if(!this._isEditableByPlugin(o)){return false;}var s=this.getDesignTime().getSelection();if(s.length!==1){return false;}var v=this._getSplitAction(o);var e=s[0].getElementInstance();if(v&&v.getControlsCount(e)<=1){return false;}return true;};
a.prototype.isSplitEnabled=function(o){var A=this._getSplitAction(o);if(!A||!this.isSplitAvailable(o)){return false;}var b=true;if(typeof A.isEnabled!=="undefined"){if(typeof A.isEnabled==="function"){b=A.isEnabled(o.getElementInstance());}else{b=A.isEnabled;}}return b;};
a.prototype.handleSplit=function(s){var p=s.getParent();var e=O.getOverlay(s);var d=e.getDesignTimeMetadata();var f=this._getSplitAction(e).getControlsCount(s);var v=F.getViewForControl(s);var n=[];for(var i=0;i<f-1;i++){n.push(v.createId(jQuery.sap.uid()));}var o=this.getCommandFactory().getCommandFor(s,"split",{newElementIds:n,source:s,parentElement:p},d);this.fireElementModified({"command":o});};
return a;},true);
sap.ui.predefine('sap/ui/rta/plugin/additionalElements/AddElementsDialog',['jquery.sap.global','sap/ui/base/ManagedObject','sap/ui/commons/Label','sap/ui/commons/LabelDesign','sap/m/Dialog','sap/ui/model/json/JSONModel','sap/m/SearchField','sap/m/Button','sap/m/Toolbar','sap/m/ToolbarSpacer','sap/ui/model/Filter','sap/ui/model/FilterOperator','sap/ui/rta/command/CommandFactory','sap/ui/rta/command/CompositeCommand','sap/m/List','sap/m/CustomListItem','sap/m/ListType','sap/m/ScrollContainer','sap/ui/model/Sorter','sap/ui/dt/ElementUtil','sap/m/VBox','sap/ui/rta/Utils'],function(q,M,L,a,D,J,S,B,T,b,F,c,C,d,e,f,g,h,i,E,V,U){"use strict";
var A=M.extend("sap.ui.rta.plugin.additionalElements.AddElementsDialog",{metadata:{library:"sap.ui.rta",properties:{"customFieldEnabled":{type:"boolean",defaultValue:false},"title":{type:"string"}},events:{"opened":{},"openCustomField":{}}}});
A.prototype.init=function(){this._oTextResources=sap.ui.getCore().getLibraryResourceBundle("sap.ui.rta");this._bAscendingSortOrder=false;this._oDialog=new D().addStyleClass("sapUIRtaFieldRepositoryDialog");this._oDialog.addStyleClass(U.getRtaStyleClassName());this._oDialog.removeStyleClass("sapUiPopupWithPadding");this._oDialog.setModel(new J({elements:[]}));var j=this._createContent();var k=this._createButtons();j.forEach(function(o){this._oDialog.addContent(o);},this);k.forEach(function(o){this._oDialog.addButton(o);},this);this._oDialog.setInitialFocus(this._oInput);};
A.prototype._createContent=function(){this._oInput=new S({width:"100%",liveChange:[this._updateModelFilter,this]}).addStyleClass("resourceListIF");var r=new B({text:"",icon:"sap-icon://sort",press:[this._resortList,this]});this._oCustomFieldButton=new B({text:"",icon:"sap-icon://add",tooltip:this._oTextResources.getText("BTN_FREP_CCF"),enabled:this.getCustomFieldEnabled(),press:[this._redirectToCustomFieldCreation,this]});this._oToolbarSpacer1=new b();this.oInputFields=new T({content:[this._oInput,r,this._oToolbarSpacer1,this._oCustomFieldButton]});var o=new L({design:a.Bold,tooltip:"{tooltip}",text:{parts:[{path:"label"},{path:"referencedComplexPropertyName"},{path:"duplicateComplexName"}],formatter:function(m,R,n){if(n&&R){m+=" ("+R+")";}return m;}}});var j=new L({text:{parts:[{path:"originalLabel"}],formatter:function(O){if(O){return this._oTextResources.getText("LBL_FREP",O);}return"";}.bind(this)},visible:{parts:[{path:"originalLabel"}],formatter:function(O){if(O){return true;}return false;}}});var v=new V();v.addItem(o);v.addItem(j);var s=new i("label",this._bAscendingSortOrder);this._oList=new e({mode:"MultiSelect",includeItemInSelection:true,growing:true,growingScrollToLoad:true}).setNoDataText(this._oTextResources.getText("MSG_NO_FIELDS",this._oTextResources.getText("MULTIPLE_CONTROL_NAME").toLowerCase()));var l=new f({type:g.Active,selected:"{selected}",content:[v]});this._oList.bindItems({path:"/elements",template:l,sorter:s});var k=new h({content:this._oList,vertical:true,horizontal:false}).addStyleClass("sapUIRtaCCDialogScrollContainer");return[this.oInputFields,k];};
A.prototype._createButtons=function(){this._oOKButton=new B({text:this._oTextResources.getText("BTN_FREP_OK"),press:[this._submitDialog,this]});var o=new B({text:this._oTextResources.getText("BTN_FREP_CANCEL"),press:[this._cancelDialog,this]});return[this._oOKButton,o];};
A.prototype._submitDialog=function(){this._oDialog.close();this._fnResolve();};
A.prototype._cancelDialog=function(){this._oList.removeSelections();this._oDialog.close();this._fnReject();};
A.prototype.setElements=function(j){this._oDialog.getModel().setProperty("/elements",j);};
A.prototype.getElements=function(){return this._oDialog.getModel().getProperty("/elements");};
A.prototype.getSelectedElements=function(){return this._oDialog.getModel().getObject("/elements").filter(function(o){return o.selected;});};
A.prototype.open=function(o){return new Promise(function(r,j){this._fnResolve=r;this._fnReject=j;this._oDialog.oPopup.attachOpened(function(){this.fireOpened();}.bind(this));this._oDialog.open();}.bind(this));};
A.prototype._resortList=function(o){this._bAscendingSortOrder=!this._bAscendingSortOrder;var j=this._oList.getBinding("items");var s=[];s.push(new i("label",this._bAscendingSortOrder));j.sort(s);};
A.prototype._updateModelFilter=function(o){var v=o.getParameter("newValue");var j=this._oList.getBinding("items");if((typeof v)==="string"){var k=new F("label",c.Contains,v);var O=new F("originalLabel",c.Contains,v);var r=new F("referencedComplexPropertyName",c.Contains,v);var l=new F("duplicateComplexName",c.EQ,true);var m=new F({filters:[r,l],and:true});var n=new F({filters:[k,O,m],and:false});j.filter([n]);}else{j.filter([]);}};
A.prototype._redirectToCustomFieldCreation=function(o){this.fireOpenCustomField();this._oDialog.close();};
A.prototype.setTitle=function(t){M.prototype.setProperty.call(this,"title",t,true);this._oDialog.setTitle(t);};
A.prototype.setCustomFieldEnabled=function(j){M.prototype.setProperty.call(this,"customFieldEnabled",j,true);this._oCustomFieldButton.setEnabled(j);};
return A;},true);
sap.ui.predefine('sap/ui/rta/plugin/additionalElements/AdditionalElementsAnalyzer',['jquery.sap.global','sap/ui/core/StashedControlSupport','sap/ui/dt/ElementUtil','sap/ui/rta/Utils','sap/ui/rta/util/BindingsExtractor'],function(q,S,E,R,B){"use strict";
function _(P,i){var j=q.extend({},P);j.entityName=i.name;var l=P["com.sap.vocabularies.Common.v1.Label"];j.fieldLabel=l&&l.String;var Q=P["com.sap.vocabularies.Common.v1.QuickInfo"];j.quickInfo=Q&&Q.String;var F=P["com.sap.vocabularies.Common.v1.FieldControl"];j.visible=!(F&&F.EnumMember==="com.sap.vocabularies.Common.v1.FieldControlType/Hidden");return j;}
function a(P){if(P&&P.type){if(P.type.toLowerCase().indexOf("edm")!==0){return true;}}return false;}
function b(O,M,i){return O.reduce(function(j,P){var v=_(P,i);if(a(v)){var C=M.getODataComplexType(v.type);v=C.property.map(function(l){l=_(l,i);l.bindingPath=v.name+"/"+l.name;l.referencedComplexPropertyName=v.fieldLabel||v.name;return l;});}else{v.bindingPath=P.name;}return j.concat(v);},[]);}
function c(O,i){return O.filter(function(P){return P.visible;}).filter(function(P){var F=P["com.sap.vocabularies.Common.v1.FieldControl"];var j=F&&F.Path;if(j){var l=i.getBindingContext().getProperty(j);return l!==0;}return true;});}
function d(i){var M=i.getModel();var D={property:[],navigationProperty:[],navigationEntityNames:[]};if(M){var j=M.getMetadata().getName();if(j==="sap.ui.model.odata.ODataModel"||j==="sap.ui.model.odata.v2.ODataModel"){var l=M.getMetaModel();return l.loaded().then(function(){var t=i.getBindingContext();if(t){var u=t.getPath();var v=l.getMetaContext(u);var O=v.getObject();D.property=O.property||[];D.property=b(D.property,l,O);D.property=c(D.property,i);if(O.navigationProperty){D.navigationProperty=O.navigationProperty;O.navigationProperty.forEach(function(N){var F=l.getODataAssociationEnd(O,N.name)&&l.getODataAssociationEnd(O,N.name).type;var w=l.getODataEntityType(F);if(w&&w.name){if(D.navigationEntityNames.indexOf(w.name)===-1){D.navigationEntityNames.push(w.name);}}});}}return D;});}}return Promise.resolve(D);}
function e(O){return{selected:false,label:O.fieldLabel||O.name,referencedComplexPropertyName:O.referencedComplexPropertyName?O.referencedComplexPropertyName:"",duplicateComplexName:O.duplicateComplexName?O.duplicateComplexName:false,tooltip:O.quickInfo||O.fieldLabel,originalLabel:"",type:"odata",entityType:O.entityName,name:O.name,bindingPath:O.bindingPath};}
function f(D){var i=D.element;var j=D.action;return{selected:false,label:R.getLabelForElement(i,j.getLabel),tooltip:R.getLabelForElement(i,j.getLabel),referencedComplexPropertyName:i.referencedComplexPropertyName?i.referencedComplexPropertyName:"",duplicateComplexName:i.duplicateComplexName?i.duplicateComplexName:false,bindingPaths:i.bindingPaths,originalLabel:i.renamedLabel&&i.fieldLabel!==i.labelFromOData?i.labelFromOData:"",type:"invisible",element:i};}
function g(i,j){if(j){var l=R.getEntityTypeByPath(i.getModel(),i.getBindingContext().getPath());return E.findAllSiblingsInContainer(i,j).filter(function(t){return R.getEntityTypeByPath(t.getModel(),t.getBindingContext().getPath())===l;});}else{return[i];}}
function h(O){O.forEach(function(i,l,O){if(i["duplicateComplexName"]!==true){for(var j=l+1;j<O.length-1;j++){if(i.fieldLabel===O[j].fieldLabel){i["duplicateComplexName"]=true;O[j]["duplicateComplexName"]=true;}}}});return O;}
function k(i,O){return O.some(function(D){return D.fieldLabel===i.fieldLabel;});}
function m(I,M){I.bindingPaths=[];I.bindingContextPaths=[];var j=B.getBindings(I,M);for(var i=0,l=j.length;i<l;i++){if(j[i].getPath&&j[i].getPath()){if(I.bindingPaths.indexOf(j[i].getPath())===-1){I.bindingPaths.push(j[i].getPath());}}if(j[i].getContext&&j[i].getContext()){if(I.bindingContextPaths.indexOf(j[i].getContext().getPath())===-1){I.bindingContextPaths.push(j[i].getContext().getPath());}}}return I;}
function n(i){return Array.isArray(i)&&i.length>0;}
function o(i,N,j,l){var t=n(i)&&i.some(function(P){var v=P.trim().replace(/^\//gi,'').split('/');if(v.length>1){return N.indexOf(v.shift())!==-1;}});var u=l.some(function(C){C=C.match(/^\/?([A-Za-z0-9_]+)/)[0];return(j.indexOf(C)>=0);});return t||u;}
function p(i,O){return O.filter(function(D){return i.indexOf(D.bindingPath)!==-1;}).pop();}
function r(i,O){i.labelFromOData=O.fieldLabel;if(i.fieldLabel!==i.labelFromOData){i.renamedLabel=true;}if(O.referencedComplexPropertyName){i.referencedComplexPropertyName=O.referencedComplexPropertyName;}}
function s(i,O,N,j){var l=i.bindingPaths,t=i.bindingContextPaths,u;return(!n(l)||o(l,N,j,t)||((u=p(l,O))&&(r(i,u)||true)));}
var A={enhanceInvisibleElements:function(P,i){var M=P.getModel();var j=i.reveal;var l=i.addODataProperty;return Promise.resolve().then(function(){return d(P);}).then(function(D){var O=D.property;var t=D.navigationProperty.map(function(N){return N.name;});var u=D.navigationEntityNames;O=h(O);var v=[];var I=j.elements||[];I.forEach(function(w){var T=w.getMetadata().getName();var x=j.types[T].action;var y=true;if(P.getBindingContext()===w.getBindingContext()){w=m(w,M);w.fieldLabel=R.getLabelForElement(w,x.getLabel);w.duplicateComplexName=k(w,O);if(l&&O.length>0){y=s(w,O,t,u);}}else if(w.getParent()&&w.getBindingContext()===w.getParent().getBindingContext()&&B.getBindings(w,M).length>0){y=false;}if(y){v.push({element:w,action:x});}});return v;}).then(function(t){return t.map(f);});},getUnboundODataProperties:function(i,j){var M=i.getModel();return Promise.resolve().then(function(){return d(i);}).then(function(D){var O=D.property;var l=g(i,j.relevantContainer);var t=[];l.forEach(function(i){t=t.concat(B.getBindings(i,M));});var F=j.action.filter?j.action.filter:function(){return true;};O=O.filter(function(u){var H=false;if(t){H=t.some(function(v){return!!v.getPath&&(v.getPath()===u.bindingPath);});}return!H&&F(j.relevantContainer,u);});O=h(O);return O;}).then(function(u){return u.map(e);});}};return A;});
sap.ui.predefine('sap/ui/rta/plugin/additionalElements/AdditionalElementsPlugin',["jquery.sap.global","sap/ui/rta/plugin/Plugin",'sap/ui/dt/ElementUtil','sap/ui/dt/OverlayRegistry','sap/ui/rta/Utils','sap/ui/fl/Utils','sap/ui/core/StashedControlSupport','sap/ui/dt/ElementDesignTimeMetadata'],function(q,P,E,O,U,F,S,a){"use strict";
function _(s,o){var p,r=o.getRelevantContainer(!s),R=O.getOverlay(r);if(s){p=o.getParentElementOverlay();}else{p=o;}return{relevantContainerOverlay:R,parentOverlay:p,relevantContainer:r,parent:p.getElementInstance()};}
function b(p,C){return C.sParentAggregationName;}
function c(o,s){var I=E.getAggregation(o,s).filter(function(C){var m=O.getOverlay(C);if(o.getVisible&&!o.getVisible()){return C.getVisible&&sap.ui.rta.plugin.Plugin.prototype.hasStableId(m);}return C.getVisible&&!C.getVisible()&&sap.ui.rta.plugin.Plugin.prototype.hasStableId(m);});var l=S.getStashedControls(o.getId());return I.concat(l);}
var d=true,e=false;
function f(r,m,p,s,C){var n=[];var l;var o;if(m.addODataProperty){var t=m.aggregation;var D=m.addODataProperty.designTimeMetadata;l=D.getAggregationDescription(t,p);if(l){o=s?l.singular:l.plural;n.push(o);}}if(m.reveal){Object.keys(m.reveal.types).forEach(function(u){var v=m.reveal.types[u];l=v.designTimeMetadata.getName(p);if(l){o=s?l.singular:l.plural;n.push(o);}});}var N=n.reduce(function(u,v){if(u.indexOf(v)===-1){u.push(v);}return u;},[]);var T=sap.ui.getCore().getLibraryResourceBundle("sap.ui.rta");if(N.length===1){o=N[0];}else if(C){o=C;}else{o=T.getText("MULTIPLE_CONTROL_NAME");}return T.getText(r,o);}
function g(){return{designTimeMetadata:new a({data:{name:{singular:function(){return sap.uxap.i18nModel.getResourceBundle().getText("SECTION_CONTROL_NAME");},plural:function(){return sap.uxap.i18nModel.getResourceBundle().getText("SECTION_CONTROL_NAME_PLURAL");}},actions:{reveal:{changeType:"unstashControl",getAggregationName:b}}}}),action:{changeType:"unstashControl",getAggregationName:b}};}
var A=P.extend("sap.ui.rta.plugin.additionalElements.AdditionalElementsPlugin",{
metadata:{library:"sap.ui.rta",properties:{analyzer:"object",dialog:"object",commandFactory:"object"},associations:{},events:{}},
getContextMenuTitle:function(o,l){var p=_(o,l);var m=this._getActions(o,l);return f("CTX_ADD_ELEMENTS",m,p.parent,d);},
isAvailable:function(o,l){return this._isEditable(l,o);},
isEnabled:function(o,l){var p;if(o){p=l.getParentElementOverlay();if(p&&this.hasStableId(p)){return true;}else{return false;}}var m=this._getActions(o,l);if(m.reveal&&m.reveal.elements.length===0&&!m.addODataProperty){return false;}return true;},
_getRevealActions:function(s,o){var p=_(s,o);var r=this._getTypes(r,p,s,o);return r;},
_getTypes:function(r,p,s,o){var l=[p.parentOverlay];var R=o.getRelevantContainer(!s);if(R!==p.parent){l=E.findAllSiblingsInContainer(p.parent,R).map(function(n){return O.getOverlay(n);});}var m;if(s){m=[o.getParentAggregationOverlay().getAggregationName()];}else{m=p.parentOverlay.getAggregationOverlays().filter(function(n){return!n.getDesignTimeMetadata().isIgnored(p.parent);}).map(function(n){return n.getAggregationName();});}r=m.reduce(this._getRevealActionFromAggregations.bind(this,l),{});return r;},
_getRevealActionFromAggregations:function(p,l,s){var I=p.reduce(function(m,o){return o?m.concat(c(o.getElementInstance(),s)):m;},[]);var C=function(t,o){var T=o.getMetadata().getName();if(!t[T]){if(T==="sap.ui.core._StashedControl"){t[T]=g();}else{var m=O.getOverlay(o);if(m){var D=m.getDesignTimeMetadata();var r=D&&D.getAction("reveal",o);if(r&&r.changeType){if(r.changeOnRelevantContainer){o=m.getRelevantContainer();}if(this.hasChangeHandler(r.changeType,o)){if(!r.getAggregationName){r.getAggregationName=b;}t[T]={designTimeMetadata:D,action:r};}}}}}return t;};var t=I.reduce(C.bind(this),{});I=I.filter(function(o){return!!t[o.getMetadata().getName()];});if(I.length>0&&Object.keys(t).length>0){l[s]={reveal:{elements:I,types:t}};}return l;},
_getAddODataPropertyActions:function(s,o){var p=_(s,o);var D=p.parentOverlay.getDesignTimeMetadata();var l=D.getAggregationAction("addODataProperty",p.parent);var C=p.parent;var m=function(n,r){if(r){if(r.changeOnRelevantContainer){C=p.relevantContainer;}if(r.changeType&&this.hasChangeHandler(r.changeType,C)){n[r.aggregation]={addODataProperty:{designTimeMetadata:D,action:r}};}return n;}};if(l&&l.length>0){return l.reduce(m.bind(this),{});}},
_getActions:function(s,o){var r=this._getRevealActions(s,o);var m=this._getAddODataPropertyActions(s,o);var l=q.extend(true,r,m);var n=Object.keys(l);if(n.length===0){return{};}else if(n.length>1){q.sap.log.error("reveal or addODataProperty action defined for more than 1 aggregation, that is not yet possible");}var p=n[0];l[p].aggregation=p;return l[p];},
_hasRevealActionsOnChildren:function(o){var r=this._getRevealActions(false,o);return!!r&&Object.keys(r).length>0;},
showAvailableElements:function(o,l,I,C){var m=l[0];var p=_(o,m);var s=o&&m.getElementInstance();var n=[];var r=this._getActions(o,m);if(r.reveal){n.push(this.getAnalyzer().enhanceInvisibleElements(p.parent,r));}if(r.addODataProperty){r.addODataProperty.relevantContainer=m.getRelevantContainer(!o);n.push(this.getAnalyzer().getUnboundODataProperties(p.parent,r.addODataProperty));}if(r.aggregation||C){this._setDialogTitle(r,p.parent,C);}return Promise.resolve().then(function(){if(r.addODataProperty){return U.isServiceUpToDate(p.parent);}}).then(function(){if(r.addODataProperty){this.getDialog()._oCustomFieldButton.setVisible(true);return U.isCustomFieldAvailable(p.parent);}else{this.getDialog()._oCustomFieldButton.setVisible(false);}}.bind(this)).then(function(t){if(t){this._oCurrentFieldExtInfo=t;this.getDialog().setCustomFieldEnabled(true);this.getDialog().detachEvent('openCustomField',this._onOpenCustomField,this);this.getDialog().attachEvent('openCustomField',null,this._onOpenCustomField,this);}}.bind(this)).then(i.bind(null,n)).then(function(t){this.getDialog().setElements(t);return this.getDialog().open().then(function(){this._createCommands(o,m,p,s,r.designTimeMetadata,r,I);}.bind(this)).catch(function(u){if(u instanceof Error){throw u;}});}.bind(this)).catch(function(t){if(t instanceof Error){throw t;}else{q.sap.log.info("Service not up to date, skipping add dialog","sap.ui.rta");}});},
_setDialogTitle:function(m,p,C){var D=f("HEADER_ADDITIONAL_ELEMENTS",m,p,e,C);this.getDialog().setTitle(D);if(C){this.getDialog()._oList.setNoDataText(this.getDialog()._oTextResources.getText("MSG_NO_FIELDS",C.toLowerCase()));}},
_onOpenCustomField:function(o){var C=sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService("CrossApplicationNavigation");var H=(C&&C.hrefForExternal({target:{semanticObject:"CustomField",action:"develop"},params:{businessContexts:this._oCurrentFieldExtInfo.BusinessContexts,serviceName:this._oCurrentFieldExtInfo.ServiceName,serviceVersion:this._oCurrentFieldExtInfo.ServiceVersion,entityType:this._oCurrentFieldExtInfo.EntityType}}));U.openNewWindow(H);},
_createCommands:function(s,o,p,l,D,m,I){var n=this.getDialog().getSelectedElements();if(n.length>0){var C=this.getCommandFactory().getCommandFor(p.parent,"composite");n.forEach(function(r){var t;switch(r.type){case"invisible":t=this._createRevealCommandForInvisible(r,m,p,l);C.addCommand(t);t=this._createMoveCommandForInvisible(r,m,p,l,I);if(t){C.addCommand(t);}else{q.sap.log.warning("No move action configured for "+p.parent.getMetadata().getName()+", aggregation: "+m.aggregation,"sap.ui.rta");}break;case"odata":var u=p.parentOverlay.getAggregationOverlay(m.aggregation);var v=u.getDesignTimeMetadata();var w=v.getAction("addODataProperty",p.parent);var x=w.changeHandlerSettings;var R;if(x&&x.content){R=x.content.requiredLibraries;}if(R){var y=this._createCommandForAddLibrary(p,m,R,v);C.addCommand(y);}t=this._createCommandsForOData(r,m,p,l,I);C.addCommand(t);break;default:q.sap.log.error("Can't create command for untreated element.type "+r.type);}},this);this.fireElementModified({"command":C});}},
_createCommandsForOData:function(s,m,p,o,I){var l=p.parentOverlay.getAggregationOverlay(m.aggregation);var n=l.getDesignTimeMetadata();var r=n.getAction("addODataProperty",p.parent);var C=r.changeHandlerSettings;var t;if(C&&C.key){t=C.key.oDataServiceVersion;}var R=p.parent;if(r.changeOnRelevantContainer){R=p.relevantContainer;}var u=U.getIndex(p.parent,o,m.aggregation,n.getData().getIndex);return this.getCommandFactory().getCommandFor(p.parent,"addODataProperty",{newControlId:U.createFieldLabelId(R,s.entityType,s.bindingPath),index:I!==undefined?I:u,bindingString:s.bindingPath,parentId:p.parent.getId(),oDataServiceVersion:t},n);},
_createCommandForAddLibrary:function(p,m,r,o){var C=F.getAppComponentForControl(p.relevantContainer);var M=C.getManifest();var R=M["sap.app"].id;return this.getCommandFactory().getCommandFor(p.publicParent,"addLibrary",{reference:R,requiredLibraries:r,appComponent:C},o);},
_createRevealCommandForInvisible:function(s,m,p,o){var r=s.element;var t=r.getMetadata().getName();var T=m.reveal.types[t];var D=T.designTimeMetadata;if(D.getAction("reveal").changeOnRelevantContainer){return this.getCommandFactory().getCommandFor(r,"reveal",{revealedElementId:r.getId(),directParent:p.parent},D);}else{return this.getCommandFactory().getCommandFor(r,"reveal",{},D);}},
_createMoveCommandForInvisible:function(s,m,p,o,I){var r=s.element;var R=O.getOverlay(r);var t=r.getMetadata().getName();var l;if(R){l=R.getParentAggregationOverlay().getAggregationName();}else{var T=m.reveal.types[t];l=T.action.getAggregationName(p.parent,r);}var n=j(r,p,R);var u=p.parent;var v=U.getIndex(p.parent,o,l);var w=U.getIndex(n,r,l)-1;v=I!==undefined?I:k(n,u,w,v);var C;if(v!==w||p.parent!==r.getParent()){var x=O.getOverlay(r)?O.getOverlay(r).getParentAggregationOverlay():p.relevantContainerOverlay;var y=x.getDesignTimeMetadata();C=this.getCommandFactory().getCommandFor(p.relevantContainer,"move",{movedElements:[{element:r,sourceIndex:w,targetIndex:v}],source:{publicParent:p.relevantContainer,parent:n,aggregation:l},target:{publicParent:p.relevantContainer,parent:u,aggregation:l}},y);}return C;},
_isEditable:function(o,l){if(l===undefined||l===null){return h.call(this,o,true)||h.call(this,o,false);}else{return h.call(this,o,l);}}
});
function h(o,l){var m=false;var r=U.getRelevantContainerDesigntimeMetadata(o);if(!r){return false;}var n=this._getActions(l,o);var p=_(l,o);if(n.addODataProperty){var s=n.addODataProperty.action;m=s&&s.aggregation===o.getParentAggregationOverlay().getAggregationName();}if(!m&&n.reveal){m=true;}if(!m&&!l){m=this._hasRevealActionsOnChildren(o)||this.checkAggregationsOnSelf(p.parentOverlay,"addODataProperty");}if(m){return this.hasStableId(o);}else{return false;}}
function i(p){return Promise.all(p).then(function(l){var m=l[0]||[];if(m&&l[1]){m=m.concat(l[1]);}return m;});}
function j(r,p,R){var o;if(R){o=R.getParentElementOverlay().getElementInstance();}if(!o&&r.sParentId){o=sap.ui.getCore().byId(r.sParentId);}else if(!o){o=p.parent;}return o;}
function k(s,t,l,T){if(s===t&&l<T&&l>-1){return T-1;}return T;}
return A;});
sap.ui.predefine('sap/ui/rta/toolbar/Adaptation',['sap/m/ToolbarSpacer','sap/m/Button','sap/m/SegmentedButton','sap/m/SegmentedButtonItem','./Base'],function(T,B,S,a,b){"use strict";
var A=b.extend("sap.ui.rta.toolbar.Adaptation",{
renderer:'sap.ui.rta.toolbar.BaseRenderer',
animation:true,
metadata:{events:{"undo":{},"redo":{},"exit":{},"restore":{},"transport":{},"modeChange":{},"manageApps":{}},properties:{"publishVisible":{"type":"boolean","defaultValue":false},"modeSwitcher":{type:"string",defaultValue:"adaptation"},"manageAppsVisible":{"type":"boolean","defaultValue":false}}}
});
A.prototype.onAfterRendering=function(){var s=-1;var i=false;var w=this.getAggregation('content').reduce(function(r,c){switch(c.data('name')){case'spacerLeft':s=1;i=true;break;case'spacerRight':i=false;break;}return!(c instanceof T)&&!i?r+s*c.$().outerWidth(true):r;},0);if(w>0){this.getControl('spacerBalancer').setWidth(w+'px');}b.prototype.onAfterRendering.apply(this,arguments);};
A.prototype.buildControls=function(){return[new T().data('name','spacerBalancer'),new T().data('name','spacerLeft'),new S({width:"auto",selectedKey:this.getModeSwitcher(),items:[new a({text:this.getTextResources().getText("BTN_ADAPTATION"),tooltip:this.getTextResources().getText("BTN_ADAPTATION"),width:"auto",key:"adaptation"}),new a({text:this.getTextResources().getText("BTN_NAVIGATION"),tooltip:this.getTextResources().getText("BTN_NAVIGATION"),width:"auto",key:"navigation"})],select:this.eventHandler.bind(this,'ModeChange')}).data('name','modeSwitcher'),new T().data('name','spacerRight'),new B({type:"Transparent",icon:"sap-icon://undo",enabled:false,tooltip:this.getTextResources().getText("BTN_UNDO"),press:this.eventHandler.bind(this,'Undo')}).data('name','undo'),new B({type:"Transparent",icon:"sap-icon://redo",iconFirst:false,enabled:false,tooltip:this.getTextResources().getText("BTN_REDO"),press:this.eventHandler.bind(this,'Redo')}).data('name','redo'),new B({type:"Transparent",icon:"sap-icon://message-information",visible:this.getManageAppsVisible(),tooltip:this.getTextResources().getText("BTN_MANAGE_APPS"),press:this.eventHandler.bind(this,'ManageApps')}).data('name','manageApps'),new B({type:"Transparent",text:this.getTextResources().getText("BTN_RESTORE"),visible:true,enabled:false,tooltip:this.getTextResources().getText("BTN_RESTORE"),press:this.eventHandler.bind(this,'Restore')}).data('name','restore'),new sap.m.Button({type:"Transparent",enabled:false,visible:this.getPublishVisible(),text:this.getTextResources().getText("BTN_PUBLISH"),tooltip:this.getTextResources().getText("BTN_PUBLISH"),press:this.eventHandler.bind(this,'Transport')}).data('name','publish'),new B({type:"Transparent",text:this.getTextResources().getText("BTN_EXIT"),tooltip:this.getTextResources().getText("BTN_EXIT"),press:this.eventHandler.bind(this,'Exit')}).data('name','exit')];};
A.prototype.setUndoRedoEnabled=function(c,C){this.getControl('undo').setEnabled(c);this.getControl('redo').setEnabled(C);};
A.prototype.setPublishEnabled=function(e){this.getControl('publish').setEnabled(e);};
A.prototype.setRestoreEnabled=function(e){this.getControl('restore').setEnabled(e);};
A.prototype.show=function(){return b.prototype.show.apply(this,arguments);};
A.prototype.hide=function(){return b.prototype.hide.apply(this,arguments);};
return A;},true);
sap.ui.predefine('sap/ui/rta/toolbar/Base',['jquery.sap.global','sap/ui/rta/library','sap/ui/core/Popup','sap/m/Toolbar','sap/ui/core/BusyIndicator','sap/ui/rta/util/Animation'],function(q,l,P,T,B,A){"use strict";
var a=T.extend("sap.ui.rta.toolbar.Base",{
metadata:{library:"sap.ui.rta",properties:{"color":{type:"string",defaultValue:"default"},"zIndex":{type:"int"},"textResources":"object"}},
constructor:function(){T.apply(this,arguments);this.setVisible(false);this.placeToContainer();this.buildContent();},
type:null,
animation:false
});
a.prototype.init=function(){T.prototype.init.apply(this,arguments);};
a.prototype.onBeforeRendering=function(){T.prototype.onBeforeRendering.apply(this,arguments);};
a.prototype.onAfterRendering=function(){T.prototype.onAfterRendering.apply(this,arguments);};
a.prototype.eventHandler=function(e,E){this['fire'+e](E.getParameters());};
a.prototype.buildControls=function(){return[];};
a.prototype.placeToContainer=function(){this.placeAt(q('#sap-ui-static').get(0));};
a.prototype.buildContent=function(){this.buildControls().forEach(this.addContent,this);};
a.prototype.show=function(){return new Promise(function(r){var d={onAfterRendering:function(){this.removeEventDelegate(d);r();}};this.addEventDelegate(d,this);this.bringToFront();this.setVisible(true);}.bind(this)).then(function(){return this.animation?A.waitTransition(this.$(),this.addStyleClass.bind(this,'is_visible')):Promise.resolve();}.bind(this)).then(function(){this.focus();}.bind(this));};
a.prototype.hide=function(){return(this.animation?A.waitTransition(this.$(),this.removeStyleClass.bind(this,'is_visible')):Promise.resolve()).then(function(){this.setVisible(false);}.bind(this));};
a.prototype.getControl=function(n){return this.getAggregation('content').filter(function(c){return c.data('name')===n;}).pop();};
a.prototype.bringToFront=function(){var n;var b=B.oPopup;if(b&&b.isOpen()&&b.getModal()){n=b._iZIndex-3;}else{n=P.getNextZIndex();}return this.setZIndex(n);};
a.prototype.setUndoRedoEnabled=function(){};
a.prototype.setPublishEnabled=function(){};
a.prototype.setRestoreEnabled=function(){};
return a;},true);
sap.ui.predefine('sap/ui/rta/toolbar/BaseRenderer',['sap/ui/core/Renderer','sap/m/ToolbarRenderer'],function(R,T){"use strict";var B=R.extend('sap.ui.rta.toolbar.BaseRenderer',T);
B.decorateRootElement=function(r,c){r.addClass('sapUiRtaToolbar');r.addClass('sapContrastPlus');r.addClass("color_"+c.getColor());c.type&&r.addClass("type_"+c.type);var z=c.getZIndex();z&&r.addStyle("z-index",z);T.decorateRootElement(r,c);};
return B;});
sap.ui.predefine('sap/ui/rta/toolbar/Fiori',['sap/m/Image','./Adaptation','../Utils'],function(I,A,U){"use strict";var F='sapUiRtaFioriHeaderInvisible';
var a=A.extend("sap.ui.rta.toolbar.Fiori",{
renderer:'sap.ui.rta.toolbar.BaseRenderer',
type:'fiori'
});
a.prototype.init=function(){A.prototype.init.apply(this,arguments);this._oRenderer=U.getFiori2Renderer();this._oFioriHeader=this._oRenderer.getRootControl().getOUnifiedShell().getHeader();};
a.prototype.show=function(){this._oFioriHeader.addStyleClass(F);return A.prototype.show.apply(this,arguments);};
a.prototype.buildControls=function(){var c=A.prototype.buildControls.apply(this,arguments);var l=this._oFioriHeader.getLogo();if(this._oFioriHeader.getShowLogo()&&l){var $=this._oFioriHeader.$().find('#shell-header-icon');var w,h;if($.length){var n=$.get(0).naturalWidth;var N=$.get(0).naturalHeight;w=$.width();h=$.height();if(w!==n||h!==N){jQuery.sap.log.error(["sap.ui.rta: please check Fiori Launchpad logo, expected size is",w+"x"+h+",","but actual is "+n+"x"+N].join(' '));}}c.unshift(new I({src:l,width:w?w+'px':w,height:h?h+'px':h}).data('name','logo'));}return c;};
a.prototype.hide=function(){return A.prototype.hide.apply(this,arguments).then(function(){this._oFioriHeader.removeStyleClass(F);}.bind(this));};
return a;},true);
sap.ui.predefine('sap/ui/rta/toolbar/Personalization',['./Base','sap/m/ToolbarSpacer'],function(B,T){"use strict";
var P=B.extend("sap.ui.rta.toolbar.Personalization",{
renderer:'sap.ui.rta.toolbar.BaseRenderer',
type:'personalization',
metadata:{events:{"exit":{},"restore":{}}}
});
P.prototype.buildControls=function(){var c=[new T(),new sap.m.Button({type:"Transparent",text:this.getTextResources().getText("BTN_RESTORE"),tooltip:this.getTextResources().getText("BTN_RESTORE"),visible:true,press:this.eventHandler.bind(this,'Restore')}).data('name','restore'),new sap.m.Button({type:"Emphasized",text:this.getTextResources().getText("BTN_DONE"),tooltip:this.getTextResources().getText("BTN_DONE_TOOLTIP"),press:this.eventHandler.bind(this,'Exit')}).data('name','exit')];return c;};
P.prototype.setUndoRedoEnabled=function(){};
P.prototype.setPublishEnabled=function(){};
P.prototype.setRestoreEnabled=function(e){this.getControl('restore').setEnabled(e);};
return P;},true);
sap.ui.predefine('sap/ui/rta/toolbar/Standalone',['./Adaptation'],function(A){"use strict";
var S=A.extend("sap.ui.rta.toolbar.Standalone",{
renderer:'sap.ui.rta.toolbar.BaseRenderer',
type:'standalone'
});
return S;},true);
sap.ui.predefine('sap/ui/rta/ui/SettingsDialog',['jquery.sap.global','sap/ui/rta/library','sap/ui/core/Control','sap/m/Dialog','sap/ui/layout/VerticalLayout','sap/m/Label','sap/m/Input','sap/m/Select','sap/ui/core/Item','sap/m/Button','sap/m/CheckBox','sap/ui/rta/command/CommandFactory','sap/ui/rta/command/CompositeCommand','sap/ui/dt/ElementUtil'],function(q,l,C,D,V,L,I,S,a,B,b,c,d,E){"use strict";
var e=C.extend("sap.ui.rta.ui.SettingsDialog",{metadata:{library:"sap.ui.rta",properties:{"commandStack":{type:"sap.ui.core.Control"}},associations:{"element":{type:"sap.ui.core.Element"}}}});
e.prototype.init=function(){this._oTextResources=sap.ui.getCore().getLibraryResourceBundle("sap.ui.rta");this._oDialog=this._createDialog();};
e.prototype._createDialog=function(){return new D({title:this._oTextResources.getText("HEADER_SETTINGS"),contentHeight:"500px",draggable:true,buttons:[new B({text:this._oTextResources.getText("BTN_FREP_OK"),press:[this._applyChangesAndClose,this]}),new B({text:this._oTextResources.getText("BTN_FREP_CANCEL"),press:[this._cancelDialog,this]})]}).addStyleClass("sapUiPopupWithPadding").addStyleClass("sapUiSizeCompact");};
e.prototype._applyChangesAndClose=function(){this._applyChanges();this._oDialog.close();};
e.prototype._iterateExecutedCommands=function(f){Object.keys(this._mCommands).forEach(function(p){f(this._mCommands[p]);},this);};
e.prototype._applyChanges=function(){var o=new d();this._iterateExecutedCommands(function(f){o.addCommand(f);});if(o.getCommands().length){this.getCommandStack().pushExecutedCommand(o);}};
e.prototype._cancelDialog=function(){this._iterateExecutedCommands(function(o){o.undo();});this._oDialog.close();};
e.prototype._executePropertyChangeCommand=function(o,p,n,O){if(!this._mCommands[p]){var P=c.getCommandFor(o,"property",{propertyName:p,newValue:n,oldValue:O});this._mCommands[p]=P;P.execute();}else{this._mCommands[p].undo();delete this._mCommands[p];}};
e.prototype._createBooleanEditor=function(o,p,P){var f=new b({text:p,selected:P});f.attachSelect(function(g){var n=g.getParameter("selected");var O=!n;this._executePropertyChangeCommand(o,p,n,O);},this);return f;};
e.prototype._createStringEditor=function(o,p,P){var i=new I({value:P});i.attachChange(function(f){var n=f.getParameter("value");var O=P;this._executePropertyChangeCommand(o,p,n,O);},this);return i;};
e.prototype._createEnumEditor=function(o,p,P,v){var s=new S();Object.keys(p).forEach(function(k){s.addItem(new a({text:k,key:p[k]}));});s.setSelectedKey(v);s.attachChange(function(f){var i=f.getParameter("selectedItem");if(i){var n=i.getKey();var O=v;this._executePropertyChangeCommand(o,P,n,O);}},this);return s;};
e.prototype._updateDialogContent=function(o){this._oDialog.removeAllContent();var v=new V();var p=o.getMetadata().getAllProperties();Object.keys(p).forEach(function(P){var f;var g=p[P];var h=o[g._sGetter]();if(g.type==="boolean"){f=this._createBooleanEditor(o,P,h);v.addContent(f);}else if(g.type==="string"||g.type==="sap.ui.core.CSSSize"){f=new V();var i=this._createStringEditor(o,P,h);f.addContent(new L({text:P,labelFor:i.getId()}));f.addContent(i);f.addStyleClass("sapUiRtaDialogEntryWithMargin");}else{var j=q.sap.getObject(g.type);if(j){f=new V();var k=this._createEnumEditor(o,j,P,h);f.addContent(new L({text:P,labelFor:k.getId()}));f.addContent(k);f.addStyleClass("sapUiRtaDialogEntryWithMargin");}}if(f){v.addContent(f);}},this);this._oDialog.addContent(v);};
e.prototype.open=function(o){this._mCommands={};this._updateDialogContent(o);this._oDialog.open();};
return e;},true);
sap.ui.predefine('sap/ui/rta/util/Animation',['jquery.sap.global'],function(q){"use strict";var m={};
m.waitTransition=function($,c){if(!($ instanceof q)){throw new Error('$element should be wrapped into jQuery object');}if(!q.isFunction(c)){throw new Error('fnCallback should be a function');}return new Promise(function(r){$.one('transitionend',r);var t;var a=function(T){if(!t){t=T;}if(T!==t){c();}else{window.requestAnimationFrame(a);}};window.requestAnimationFrame(a);});};
return m;},true);
sap.ui.predefine('sap/ui/rta/util/BindingsExtractor',['sap/ui/dt/ElementUtil','sap/ui/rta/Utils'],function(E,R){"use strict";
function g(e,p){var b=[];for(var A in e.getMetadata().getAllAggregations()){E.getAggregation(e,A).forEach(function(c){if(c.getMetadata){b=b.concat(a(c,p),g(c,p));}});}return b;}
function f(b,p){var B=[];var m=b.getMetadata().getName();if(m==="sap.ui.model.CompositeBinding"){b.getBindings().forEach(function(b){B=B.concat(f(b,p));});}else if((m==="sap.ui.model.odata.ODataPropertyBinding"||m==="sap.ui.model.odata.v2.ODataPropertyBinding"||m==="sap.ui.model.odata.v4.ODataPropertyBinding"||m==="sap.ui.model.json.JSONPropertyBinding"||m==="sap.ui.model.json.XMLPropertyBinding"||m==="sap.ui.model.resource.ResourcePropertyBinding")&&b.getModel()===p&&b.isRelative()&&jQuery.isFunction(b.getPath)&&b.getPath()){B.push(b);}return B;}
function a(c,p){var P=Object.keys(c.getMetadata().getAllProperties());return P.filter(c.getBinding.bind(c)).reduce(function(b,s){return b.concat(f(c.getBinding(s),p));},[]);}
return{getBindings:g,flattenBindings:f,getBindingsFromProperties:a};},true);
sap.ui.predefine('sap/ui/rta/util/PopupManager',['jquery.sap.global','sap/ui/base/ManagedObject','sap/m/Dialog','sap/m/Popover','sap/m/InstanceManager','sap/ui/core/Popup','sap/ui/dt/OverlayRegistry','sap/ui/dt/Overlay','sap/ui/fl/Utils','sap/ui/core/Component'],function(q,M,D,P,I,a,O,b,f,C){"use strict";var F={"add":"_addFocusEventListeners","remove":"_removeFocusEventListeners"};
var c=M.extend("sap.ui.rta.util.PopupManager",{metadata:{properties:{rta:"any"},events:{open:{parameters:{oControl:{type:"sap.ui.core.Control"}}},close:{parameters:{oControl:{type:"sap.ui.core.Control"}}}},library:"sap.ui.rta"}});
c.prototype._overrideInstanceFunctions=function(){this._applyPopupMethods(this._createPopupOverlays);this._overrideAddPopupInstance();this._overrideRemovePopupInstance();};
c.prototype.getRelevantPopups=function(){var o,d;o=I.getOpenDialogs();d=I.getOpenPopovers();var r={aDialogs:this._getValidatedPopups(o),aPopovers:this._getValidatedPopups(d)};return r;};
c.prototype._getValidatedPopups=function(o){o.forEach(function(p,i){if(!this._isSupportedPopup(p)||(this.oRtaRootAppComponent!==this._getAppComponentForControl(p)&&!this._isComponentInsidePopup(p))){o.splice(i,1);}}.bind(this));return(o.length>0)?o:false;};
c.prototype._isComponentInsidePopup=function(p){return p.getContent().some(function(o){if(o instanceof sap.ui.core.ComponentContainer){return this.oRtaRootAppComponent===this._getAppComponentForControl(sap.ui.getCore().getComponent(o.getComponent()));}}.bind(this));};
c.prototype._isSupportedPopup=function(p){return(p instanceof sap.m.Dialog||p instanceof sap.m.Popover);};
c.prototype.setRta=function(r){if(r&&r._oDesignTime){this.setProperty("rta",r);var R=sap.ui.getCore().byId(r.getRootControl());this.oRtaRootAppComponent=this._getAppComponentForControl(R);this._overrideInstanceFunctions();var m=this._onModeChange.bind(this);r.attachModeChanged(m);}};
c.prototype._onModeChange=function(e){var s,n=e.getParameters().mode;var A=function(p){p.oPopup[s]();};if(n==='navigation'){s=this._getFocusEventName("add");this._applyFocusEventsToOpenPopups(A);}else{s=this._getFocusEventName("remove");this._removeFocusEventsFromOpenPopups(A);}};
c.prototype._applyFocusEventsToOpenPopups=function(d){this._applyPopupMethods(d,true);};
c.prototype._removeFocusEventsFromOpenPopups=function(d){this._applyPopupMethods(d);};
c.prototype._getFocusEventName=function(o){return F[o];};
c.prototype._overrideAddPopupInstance=function(){this._fnOriginalAddDialogInstance=I.addDialogInstance;I.addDialogInstance=this._overrideAddFunctions(this._fnOriginalAddDialogInstance);this._fnOriginalAddPopoverInstance=I.addPopoverInstance;I.addPopoverInstance=this._overrideAddFunctions(this._fnOriginalAddPopoverInstance);};
c.prototype._overrideAddFunctions=function(o){return function(p){var v=o.apply(I,arguments);if(this.getRta()._oDesignTime&&this.oRtaRootAppComponent===this._getAppComponentForControl(p)&&this._isSupportedPopup(p)){p.attachAfterOpen(this._createPopupOverlays,this);this.fireOpen(p);}return v;}.bind(this);};
c.prototype._applyPopupMethods=function(p,d){var r=this.getRelevantPopups();Object.keys(r).forEach(function(k){if(r[k]){if(d){q.sap.focus(r[k][0].oPopup.oContent);}r[k].forEach(function(o){p.call(this,o);}.bind(this));}}.bind(this));};
c.prototype._applyPopupPatch=function(p){var o=O.getOverlay(p);var d=b.getOverlayContainer(o);var e=p.oPopup;var A=[e.oContent.getDomRef(),d];if(this.getRta().getShowToolbars()){A.push(this.getRta().getToolbar().getDomRef());}e.setAutoCloseAreas(A);if(!this.fnOriginalPopupOnAfterRendering){this.fnOriginalPopupOnAfterRendering=e.onAfterRendering;}e.onAfterRendering=function(){var v=this.fnOriginalPopupOnAfterRendering.apply(e,arguments);e[this._getFocusEventName("remove")]();return v;}.bind(this);if(this.getRta().getMode()==='adaptation'){e[this._getFocusEventName("remove")]();}};
c.prototype._overrideRemovePopupInstance=function(){this._fnOriginalRemoveDialogInstance=I.removeDialogInstance;I.removeDialogInstance=this._overrideRemoveFunctions(this._fnOriginalRemoveDialogInstance);this._fnOriginalRemovePopoverInstance=I.removePopoverInstance;I.removePopoverInstance=this._overrideRemoveFunctions(this._fnOriginalRemovePopoverInstance);};
c.prototype._overrideRemoveFunctions=function(o){return function(p){var v=o.apply(I,arguments);if(this.getRta()._oDesignTime&&this.oRtaRootAppComponent===this._getAppComponentForControl(p)&&this._isSupportedPopup(p)){this.getRta()._oDesignTime.removeRootElement(p);this.fireClose(p);}return v;}.bind(this);};
c.prototype._getAppComponentForControl=function(o){var d,A;if(o instanceof sap.ui.core.Component){d=o;}else{d=this._getComponentForControl(o);}if(d){A=f.getAppComponentForControl(d);}return A;};
c.prototype._getComponentForControl=function(o){var d;if(o){d=C.getOwnerComponentFor(o);if(!d&&typeof o.getParent==="function"&&!(o.getParent()instanceof sap.ui.core.UIArea)){o=o.getParent();d=this._getComponentForControl(o);}}return d;};
c.prototype._createPopupOverlays=function(e){if(!e){return;}var p=(e instanceof sap.ui.core.Control)?e:e.getSource();if(this.getRta()._oDesignTime.getRootElements().indexOf(p.getId())===-1&&!this._isComponentInsidePopup(p)){this.getRta()._oDesignTime.addRootElement(p);}p.detachAfterOpen(this._createPopupOverlays,this);this._applyPopupPatch(p);};
c.prototype._restoreInstanceFunctions=function(){if(this._fnOriginalAddDialogInstance){I.addDialogInstance=this._fnOriginalAddDialogInstance;}if(this._fnOriginalRemoveDialogInstance){I.removeDialogInstance=this._fnOriginalRemoveDialogInstance;}if(this._fnOriginalAddPopoverInstance){I.addPopoverInstance=this._fnOriginalAddPopoverInstance;}if(this._fnOriginalRemovePopoverInstance){I.removePopoverInstance=this._fnOriginalRemovePopoverInstance;}this._applyPopupMethods(this._removePopupPatch);};
c.prototype._removePopupPatch=function(p){var o=p.oPopup;o[this._getFocusEventName("add")]();if(this.fnOriginalPopupOnAfterRendering){o.onAfterRendering=this.fnOriginalPopupOnAfterRendering;}};
c.prototype.exit=function(){this._restoreInstanceFunctions();};
return c;},true);
sap.ui.predefine('sap/ui/rta/util/StylesLoader',['jquery.sap.global'],function(q){"use strict";var m={};
m.loadStyles=function(f){return q.get(q.sap.getModulePath('sap.ui.rta.themes.base.'+f)+'.css').then(function(d){if(sap.ui.getCore().getConfiguration().getRTL()){return d.replace(/right/g,'left');}return d;});};
return m;},true);
sap.ui.predefine('sap/ui/rta/util/UrlParser',[],function(q){"use strict";var m={};
m.getParam=function(p){return m.getParams()[p];};
m.getParams=function(){return document.location.search.replace(/^\?/,'').split('&').reduce(function(p,P){var a=P.split('=');var v=a[1];switch(v){case'true':v=true;break;case'false':v=false;break;}p[a[0]]=v;return p;},{});};
return m;},true);
jQuery.sap.registerPreloadedModules({
"name":"sap/ui/rta/library-preload",
"version":"2.0",
"modules":{
	"sap/ui/rta/appVariant/manageApps/webapp/manifest.json":'{\n\t"_version": "1.5.0",\n\t"sap.app": {\n\t\t"id": "manageApps",\n\t\t"type": "application",\n\t\t"i18n": "i18n/i18n.properties",\n\t\t"applicationVersion": {\n\t\t\t"version": "1.0.0"\n\t\t},\n\t\t"title": "{{appTitle}}",\n\t\t"description": "{{appDescription}}",\n\t\t"resources": "resources.json",\n\t\t"ach": "ach",\n\t\t"sourceTemplate": {\n\t\t\t"id": "ui5template.basicSAPUI5ApplicationProject",\n\t\t\t"version": "1.40.12"\n\t\t}\n\t},\n\n\t"sap.ui": {\n\t\t"technology": "UI5",\n\t\t"icons": {\n\t\t\t"icon": "",\n\t\t\t"favIcon": "",\n\t\t\t"phone": "",\n\t\t\t"phone@2": "",\n\t\t\t"tablet": "",\n\t\t\t"tablet@2": ""\n\t\t},\n\t\t"deviceTypes": {\n\t\t\t"desktop": true,\n\t\t\t"tablet": true,\n\t\t\t"phone": true\n\t\t},\n\t\t"supportedThemes": [\n\t\t\t"sap_hcb",\n\t\t\t"sap_belize"\n\n\t\t]\n\t},\n\n\t"sap.ui5": {\n\t\t"rootView": {\n\t\t\t"viewName": "sap.ui.rta.appVariant.manageApps.webapp.view.ManageApps",\n\t\t\t"type": "XML"\n\t\t},\n\t\t"dependencies": {\n\t\t\t"minUI5Version": "1.30.0",\n\t\t\t"libs": {\n\t\t\t\t"sap.ui.core": {},\n\t\t\t\t"sap.m": {},\n\t\t\t\t"sap.ui.layout": {},\n\t\t\t\t"sap.ui.rta": {}\n\t\t\t}\n\t\t},\n\t\t"contentDensities": {\n\t\t\t"compact": true,\n\t\t\t"cozy": true\n\t\t},\n\t\t"models": {\n\t\t\t"i18n": {\n\t\t\t\t"type": "sap.ui.model.resource.ResourceModel",\n\t\t\t\t"settings": {\n\t\t\t\t\t"bundleName": "sap.ui.rta.appVariant.manageApps.webapp.i18n.i18n"\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t"resources": {\n\t\t\t"css": [{\n\t\t\t\t"uri": "css/style.css"\n\t\t\t}]\n\t\t}\n\t}\n}',
	"sap/ui/rta/appVariant/manageApps/webapp/view/ManageApps.view.xml":'<mvc:View\n\tcontrollerName="sap.ui.rta.appVariant.manageApps.webapp.controller.ManageApps"\n\txmlns="sap.m"\n\txmlns:core="sap.ui.core"\n\txmlns:mvc="sap.ui.core.mvc"\n\txmlns:l="sap.ui.layout"\n\txmlns:table="sap.ui.table"\n\tdisplayBlock="true">\n\t<App id="app">\n\t\t<pages>\n\t\t\t<Page id="pageTitle" enableScrolling="false" class="maaPageTitle" title="{i18n>title}">\n\t\t\t\t<content>\n\t\t\t\t    <table:Table\n\t\t\t\t    \tid="Table1"\n\t\t\t\t    \trows="{/appVariants}"\n\t\t\t\t    \tselectionMode="None"\n\t\t\t\t    \tcolumnHeaderVisible="false"\n\t\t\t\t    \tvisibleRowCountMode="Auto"\n\t\t\t\t    \tfixedRowCount="2"\n\t\t\t\t    \trowHeight="48px">\n\n\t\t\t\t        <table:columns>\n\t\t\t\t        \t<table:Column id="appVariantType" sortProperty="id" filterProperty="id">\n\t\t\t\t                <Label text="{i18n>MAA_DIALOG_ID}"/>\n\t\t\t                \t<table:template>\n\t\t\t                \t\t<l:VerticalLayout>\n\t\t\t\t                \t\t<Text text="{type}" wrapping="false" class="maaType" />\n\t\t\t\t\t\t\t\t\t\t<Text text="{currentStatus}" wrapping="false" class="maaCurrentStatus" />\n\t\t\t\t\t\t\t\t\t</l:VerticalLayout>\n\t\t\t\t\t\t\t\t</table:template>\n\t\t\t\t            </table:Column>\n\t\t\t\t        \t<table:Column width="5rem" hAlign="Center">\n\t\t\t\t                <Label text="{i18n>MAA_DIALOG_ICON}" />\n\t\t\t                \t<table:template>\n\t\t\t\t\t\t\t\t\t<core:Icon src="{icon}" class="sapUiListTableIconSize" />\n\t\t\t\t\t\t\t\t</table:template>\n\t\t\t\t            </table:Column>\n\t\t\t\t            <table:Column id="title">\n\t\t\t\t\t\t        <Label text="{i18n>MAA_DIALOG_TITLE}" />\n\t\t\t\t\t        \t<table:template>\n\t\t\t\t\t        \t\t<l:VerticalLayout>\n\t\t\t\t\t\t\t\t\t\t<Text text="{title}" wrapping="false" class="maaTitle" />\n\t\t\t\t\t\t\t\t\t\t<Text text="{subTitle}" wrapping="false" class="maaSubTitle" />\n\t\t\t\t\t\t\t\t\t</l:VerticalLayout>\n\t\t\t\t\t\t\t\t</table:template>\n\t\t\t\t            </table:Column>\n\t\t\t\t            <table:Column>\n\t\t\t\t                <Label text="{i18n>MAA_DIALOG_DESCRIPTION}"/>\n\t\t\t                \t<table:template>\n\t\t\t\t\t\t\t\t\t<Text text="{description}" wrapping="true" class="maaDescription"/>\n\t\t\t\t\t\t\t\t</table:template>\n\t\t\t\t            </table:Column>\n\t\t\t\t            <table:Column id="appVariantId" sortProperty="id" filterProperty="id">\n\t\t\t\t                <Label text="{i18n>MAA_DIALOG_ID}"/>\n\t\t\t                \t<table:template>\n\t\t\t\t\t\t\t\t\t<Text text="{id}" wrapping="true" />\n\t\t\t\t\t\t\t\t</table:template>\n\t\t\t\t            </table:Column>\n\t\t\t\t        </table:columns>\n\t\t\t\t    </table:Table>\n\t\t\t\t</content>\n\t\t\t</Page>\n\t\t</pages>\n\t</App>\n</mvc:View>',
	"sap/ui/rta/manifest.json":'{\n  "_version": "1.2.0",\n  "sap.app": {\n    "_version": "1.2.0",\n    "id": "sap.ui.rta",\n    "type": "library",\n    "embeds": [\n      "appVariant/manageApps/webapp"\n    ],\n    "applicationVersion": {\n      "version": "1.50.6"\n    },\n    "title": "SAPUI5 library with RTA controls.",\n    "description": "SAPUI5 library with RTA controls.",\n    "ach": "CA-UI5-RTA",\n    "resources": "resources.json",\n    "offline": true\n  },\n  "sap.ui": {\n    "_version": "1.1.0",\n    "technology": "UI5",\n    "supportedThemes": [\n      "base",\n      "sap_hcb"\n    ]\n  },\n  "sap.ui5": {\n    "_version": "1.1.0",\n    "dependencies": {\n      "minUI5Version": "1.50",\n      "libs": {\n        "sap.ui.core": {\n          "minVersion": "1.50.6"\n        },\n        "sap.ui.layout": {\n          "minVersion": "1.50.6"\n        },\n        "sap.m": {\n          "minVersion": "1.50.6"\n        },\n        "sap.ui.fl": {\n          "minVersion": "1.50.6"\n        },\n        "sap.ui.dt": {\n          "minVersion": "1.50.6"\n        }\n      }\n    }\n  }\n}',
	"sap/ui/rta/view/RemoveElementDialog.fragment.xml":'<core:FragmentDefinition xmlns:core="sap.ui.core"\n\txmlns:commons="sap.ui.commons" xmlns:layout="sap.ui.layout"\n\txmlns:sap.m="sap.m">\n\t<sap.m:Dialog class="sapUiRtaConfirmationDialog" verticalScrolling="false" title="{/titleText}" icon="{/icon}">\n\t\t<layout:VerticalLayout width="100%">\n\t\t\t<commons:TextView class="sapUiRtaConfirmationDialogText" text="{/messageText}" />\n\t\t</layout:VerticalLayout>\n\t\t<sap.m:beginButton>\n\t\t\t<sap.m:Button class="sapUiRtaConfirmationDialogRemoveButton" text="{/removeText}" press="removeField" />\n\t\t</sap.m:beginButton>\n\t\t<sap.m:endButton>\n\t\t\t<sap.m:Button class="sapUiRtaConfirmationDialogCancelButton" text="{/cancelText}" press="closeDialog" />\n\t\t</sap.m:endButton>\n\t</sap.m:Dialog>\n</core:FragmentDefinition>'
}});
//# sourceMappingURL=library-preload.js.map