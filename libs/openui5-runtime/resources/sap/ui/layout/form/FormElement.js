/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2017 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['jquery.sap.global','sap/ui/core/Element','sap/ui/core/EnabledPropagator','sap/ui/layout/library'],function(q,E,a,l){"use strict";var F=E.extend("sap.ui.layout.form.FormElement",{metadata:{library:"sap.ui.layout",properties:{visible:{type:"boolean",group:"Misc",defaultValue:true}},defaultAggregation:"fields",aggregations:{label:{type:"sap.ui.core.Label",altTypes:["string"],multiple:false},_label:{type:"sap.ui.core.Label",multiple:false,visibility:"hidden"},fields:{type:"sap.ui.core.Control",multiple:true,singularName:"field"}},designTime:true}});F.prototype.init=function(){this._oFieldDelegate={oElement:this,onAfterRendering:e};};F.prototype.exit=function(){if(this._oLabel){delete this._oLabel;}this._oFieldDelegate=undefined;};F.prototype.setLabel=function(A){if(!this._oLabel){var o=this.getLabel();if(o&&o.isRequired){o.isRequired=o._sapuiIsRequired;o._sapuiIsRequired=undefined;o.disableRequiredChangeCheck(false);}}this.setAggregation("label",A);var L=A;if(typeof L==="string"){if(!this._oLabel){this._oLabel=sap.ui.layout.form.FormHelper.createLabel(L);this.setAggregation("_label",this._oLabel,true);this._oLabel.disableRequiredChangeCheck(true);if(this._oLabel.isRequired){this._oLabel.isRequired=_;}}else{this._oLabel.setText(L);}}else{if(this._oLabel){this._oLabel.destroy();delete this._oLabel;}if(L&&L.isRequired){L._sapuiIsRequired=L.isRequired;L.isRequired=_;L.disableRequiredChangeCheck(true);}}b(this);return this;};F.prototype.destroyLabel=function(){this.destroyAggregation("label");if(this._oLabel){this._oLabel.destroy();delete this._oLabel;}return this;};F.prototype.getLabelControl=function(){if(this._oLabel){return this._oLabel;}else{return this.getLabel();}};F.prototype.addField=function(o){this.addAggregation("fields",o);if(o){if(!o.getMetadata().isInstanceOf("sap.ui.core.IFormContent")){q.sap.log.warning(o+" is not valid Form content",this);}c.call(this,o);b(this);}return this;};F.prototype.insertField=function(o,i){this.insertAggregation("fields",o,i);if(o){if(!o.getMetadata().isInstanceOf("sap.ui.core.IFormContent")){q.sap.log.warning(o+" is not valid Form content",this);}c.call(this,o);b(this);}return this;};F.prototype.removeField=function(o){var r=this.removeAggregation("fields",o);d.call(this,r);b(this);return r;};F.prototype.removeAllFields=function(){var r=this.removeAllAggregation("fields");for(var i=0;i<r.length;i++){var R=r[i];d.call(this,R);}b(this);return r;};F.prototype.destroyFields=function(){var g=this.getFields();for(var i=0;i<g.length;i++){var o=g[i];d.call(this,o);}this.destroyAggregation("fields");b(this);return this;};F.prototype.updateFields=function(){var g=this.getFields();var o;var i=0;for(i=0;i<g.length;i++){o=g[i];d.call(this,o);}this.updateAggregation("fields");g=this.getFields();for(i=0;i<g.length;i++){o=g[i];c.call(this,o);}b(this);return this;};F.prototype.enhanceAccessibilityState=function(o,A){var L=this.getLabelControl();if(L&&L!=o){var s=A["labelledby"];if(!s){s=L.getId();}else{var g=s.split(" ");if(q.inArray(L.getId(),g)<0){g.splice(0,0,L.getId());s=g.join(" ");}}A["labelledby"]=s;}return A;};F.prototype.onLayoutDataChange=function(o){var p=this.getParent();if(p&&p.onLayoutDataChange){p.onLayoutDataChange(o);}};F.prototype.getRenderedDomRef=function(){var t=this;var C=this.getParent();if(C&&C.getElementRenderedDomRef){return C.getElementRenderedDomRef(t);}else{return null;}};function _(){if(this.getRequired&&this.getRequired()){return true;}var o=this.getParent();var g=o.getFields();for(var i=0;i<g.length;i++){var h=g[i];if(h.getRequired&&h.getRequired()===true&&(!h.getEditable||h.getEditable())){return true;}}return false;}function b(o){var g=o.getFields();var h=g.length>0?g[0]:null;var L=o._oLabel;if(L){L.setLabelFor(h);}L=o.getLabel();if(L instanceof sap.ui.core.Control){L.setAlternativeLabelFor(h);}}function c(o){o.addDelegate(this._oFieldDelegate);if(o.getMetadata().getProperty("required")){o.attachEvent("_change",f,this);}}function d(o){o.removeDelegate(this._oFieldDelegate);if(o.getMetadata().getProperty("required")){o.detachEvent("_change",f,this);}}function e(o){var p=this.oElement.getParent();if(p&&p.contentOnAfterRendering){p.contentOnAfterRendering(this.oElement,o.srcControl);}}function f(o){if(o.getParameter("name")=="required"){var L=this.getLabelControl();if(L){L.invalidate();}}}return F;},true);
