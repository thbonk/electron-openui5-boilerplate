/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
(function(d,c){"use strict";var s,m,b,C;s=document.querySelector("[src$='runTest.js']");if(s){m=/^([^?#]*\/)?runTest.js/.exec(s.getAttribute("src"));if(m){b=m[1]+"../../../../";}}if(b==null){throw new Error("runTest.js: could not identify script tag!");}C=/(?:^|\?|&)coverage(?:&|=|$)/.test(window.location.search);function l(u,c){var p=u.length,a=0;function f(e){p--;if(e.type==='error'){a++;}e.target.removeEventListener("load",f);e.target.removeEventListener("error",f);if(p===0&&a===0&&c){c();}}for(var i=0;i<u.length;i++){var g=document.createElement("script");g.addEventListener("load",f);g.addEventListener("error",f);g.src=b+u[i];document.head.appendChild(g);}}window["sap-ui-optimized"]=window["sap-ui-optimized"]||(/\.head/.test(l)&&!/pending/.test(l));window["sap-ui-debug-no-reboot"]=true;l(["sap/ui/thirdparty/baseuri.js","sap/ui/thirdparty/es6-promise.js","sap/ui/thirdparty/es6-string-methods.js","sap/ui/thirdparty/es6-object-assign.js"],function(){l(["ui5loader.js"],function(){sap.ui.loader.config({async:!C});l(["ui5loader-autoconfig.js"],function(){sap.ui.require(d,c);});});});}(["sap/base/util/UriParameters","sap/ui/test/starter/_utils"],function(U,u){"use strict";function m(b){return Array.isArray(b)?b:[b];}function r(d){return new Promise(function(b,e){sap.ui.require(m(d),function(){b(Array.prototype.slice.call(arguments));},e);});}function c(b,d,f){if(d){for(var k in d){if(Object.prototype.hasOwnProperty.call(f,k)){b[k]=d[k];}}}return b;}function a(){function b(d){if(document.body.querySelector("#"+d)==null){var e=document.createElement("div");e.id=d;document.body.insertBefore(e,document.body.firstChild);}}return u.whenDOMReady().then(function(){b("qunit");b("qunit-fixture");});}function o(e){var l=e.sourceFile+":"+e.lineNumber+":"+e.columnNumber,b="Security policy violation: directive '"+e.violatedDirective+"'";if(e.blockedURI){b+=" violated by '"+String(e.blockedURI).slice(0,20)+"'";}if(QUnit.config.current){QUnit.pushFailure(b,l);}else{throw new Error(b+" at "+l);}}var Q={altertitle:1,collapse:1,filter:1,fixture:1,hidepassed:1,maxDepth:1,module:1,moduleId:1,notrycatch:1,noglobals:1,seed:1,reorder:1,requireExpects:1,testId:1,testTimeout:1,scrolltop:1};function i(C){var b,d,e,f,g,h,j,q,k,J;document.title=C.title;if(C.loader){sap.ui.loader.config(C.loader);}if(C.runAfterLoader){b=r(C.runAfterLoader);}else{b=Promise.resolve();}if(C.qunit.version==="edge"||C.qunit.version===true){C.qunit.version=2;}if(typeof C.qunit.version==="number"){if(C.qunit.version===1){q="sap/ui/thirdparty/qunit";k="sap/ui/thirdparty/qunit.css";}else if(C.qunit.version===2){q="sap/ui/thirdparty/qunit-2";k="sap/ui/thirdparty/qunit-2.css";}else{throw new TypeError("unsupported qunit version "+C.qunit.version);}window.QUnit=window.QUnit||{};QUnit.config=QUnit.config||{};if(C.qunit!=null&&typeof C.qunit==='object'){c(QUnit.config,C.qunit,Q);}QUnit.config.autostart=false;d=b.then(function(){u.addStylesheet(k);return r(q);}).then(function(){J=[];QUnit.jUnitDone=function(v){J.push(v);};return r("sap/ui/qunit/qunit-junit");}).then(function(){delete QUnit.jUnitDone;return r("sap/ui/thirdparty/qunit-reporter-junit");}).then(function(){J.forEach(function(v){QUnit.jUnitDone(v);});J=undefined;});}if(C.sinon.version==="edge"||C.sinon.version===true){C.sinon.version=4;}if(typeof C.sinon.version==="number"){var l,n;if(C.sinon.version===1){l="sap/ui/thirdparty/sinon";n="sap/ui/thirdparty/sinon-qunit";}else if(C.sinon.version===4){l="sap/ui/thirdparty/sinon-4";n="sap/ui/qunit/sinon-qunit-bridge";}else{throw new TypeError("unsupported sinon version "+C.sinon.version);}e=b.then(function(){return r(l);});if(C.sinon.qunitBridge&&d){f=Promise.all([d,e]).then(function(){return r(n);});}if(C.sinon!=null&&typeof C.sinon==='object'){g=Promise.all([e,f]).then(function(){sinon.config=c(sinon.config||{},C.sinon,sinon.defaultConfig);return arguments;});}}else if(q){sap.ui.loader.config({shim:{"sap/ui/thirdparty/sinon-qunit":{deps:[q,"sap/ui/thirdparty/sinon"]},"sap/ui/qunit/sinon-qunit-bridge":{deps:[q,"sap/ui/thirdparty/sinon-4"]}}});}h=d.then(function(){if(QUnit.urlParams.coverage){return r("sap/ui/thirdparty/blanket").then(function(){if(C.coverage&&window.blanket){if(C.coverage.only!=null){window.blanket.options("sap-ui-cover-only",C.coverage.only);}if(C.coverage.never!=null){window.blanket.options("sap-ui-cover-never",C.coverage.never);}if(C.coverage.branchTracking){window.blanket.options("branchTracking",true);}}return r("sap/ui/qunit/qunit-coverage");}).then(function(){QUnit.config.autostart=false;});}else{return r(["sap/ui/qunit/qunit-coverage"]);}}).then(function(){if(QUnit.urlParams["sap-ui-xx-csp-policy"]){document.addEventListener("securitypolicyviolation",o);QUnit.done(function(){document.removeEventListener("securitypolicyviolation",o);});}QUnit.config.urlConfig.push({id:"sap-ui-xx-csp-policy",label:"CSP",value:{"sap-target-level-1:report-only":"Level 1","sap-target-level-2:report-only":"Level 2"},tooltip:"What Content-Security-Policy should the server send"});});j=Promise.all([b,d,e,f,g,h]);if(C.beforeBootstrap){j=j.then(function(){return r(C.beforeBootstrap);});}window["sap-ui-config"]=C.ui5||{};if(Array.isArray(window["sap-ui-config"].libs)){window["sap-ui-config"].libs=window["sap-ui-config"].libs.join(",");}if(C.bootCore){j=j.then(function(){return new Promise(function(v,w){sap.ui.require(["sap/ui/core/Core"],function(x){x.boot();x.attachInit(v);});});});}return j.then(function(){if(C.autostart){return r(C.module).then(function(T){return Promise.all(T);}).then(function(){return a();}).then(function(){QUnit.start();});}else{return a().then(function(){return r(C.module).then(function(T){return Promise.all(T);});});}});}var p=new U(window.location.href),s=u.getAttribute('data-sap-ui-testsuite')||p.get("testsuite"),t=u.getAttribute('data-sap-ui-test')||p.get("test");u.getSuiteConfig(s).then(function(S){var T=S.tests[t];if(!T){throw new TypeError("Invalid test name");}return i(T);}).catch(function(e){console.error(e.stack||e);if(typeof QUnit!=="undefined"){QUnit.test("Test Starter",function(){throw e;});QUnit.start();}else{u.whenDOMReady().then(function(){document.body.innerHTML="<pre style='color:red;'>"+u.encode(e.stack||e.message||String(e))+"</pre>";});}});}));
