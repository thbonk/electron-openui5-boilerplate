/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['sap/ui/thirdparty/URI','sap/ui/test/Opa','sap/ui/test/Opa5',"sap/ui/thirdparty/jquery"],function(U,O,a,q){"use strict";QUnit.begin(function(D){O._usageReport.begin({uri:new U().toString(),totalTests:D.totalTests});});QUnit.moduleStart(function(D){O._usageReport.moduleUpdate(D);});QUnit.testDone(function(D){O._usageReport.testDone(D);var Q=D.assertions.some(function(A){return!A.result&&A.message==="Test timed out";});if(Q){O._stopQueue({qunitTimeout:QUnit.config.testTimeout/1000});}});QUnit.moduleDone(function(D){O._usageReport.moduleUpdate(D);});QUnit.done(function(D){O._usageReport.done(D);});window.opaSkip=c;window.opaTest=o;window.opaTodo=QUnit.todo?b:o;function o(){d("test",arguments,function(g,D){O._usageReport.opaEmpty();r();D();},function(g,D,h){O._usageReport.opaEmpty(h);g.ok(false,h.errorMessage);r();if(!h.qunitTimeout){setTimeout(D,0);}});}function b(){d("todo",arguments,function(g,D){r();D();},function(g,D,h){if(h.qunitTimeout){r();}else{g.ok(false,h.errorMessage);r();setTimeout(D,0);}});}function c(t,g,h,j){f();var T=function(){};if(i()){QUnit.skip(t,T);}else{QUnit.skip(t,g,T,j);}}function d(Q,A,D,F){f();var t={testName:A[0],expected:A.length===2?null:A[1],callback:A.length===2?A[1]:A[2],async:A[3]};if(i()&&typeof t.async!=="undefined"){throw new Error("Qunit >=2.0 is used, which no longer supports the 'async' parameter for tests.");}var T=e(t,D,F);var m=[t.testName,T,t.async];if(!i()){m.splice(1,0,t.expected);}QUnit[Q].apply(this,m);}function e(C,D,F){return function(g){var A=g.async();O.config.testName=C.testName;O.assert=g;a.assert=g;if(i()&&C.expected!==null){g.expect(C.expected);}C.callback.call(this,O.config.arrangements,O.config.actions,O.config.assertions);O.emptyQueue().done(function(){D(g,A);}).fail(function(h){F(g,A,h);});};}function f(){if(!QUnit.config.testTimeout||QUnit.config.testTimeout===30000){QUnit.config.testTimeout=90000;}QUnit.config.reorder=false;QUnit.config.scrolltop=false;}function r(){O.assert=undefined;a.assert=undefined;}function i(){return QUnit.test.length===2;}QUnit.config.urlConfig.push({id:"opaExecutionDelay",value:{400:"fast",700:"medium",1000:"slow"},label:"Opa speed",tooltip:"Each waitFor will be delayed by a number of milliseconds. If it is not set Opa will execute the tests as fast as possible"});a._getEventProvider().attachEvent('onExtensionAfterInit',function(E){var p=E.getParameters();if(p.extension.getAssertions){var A=p.extension.getAssertions();q.each(A,function(n,g){QUnit.assert[n]=function(){var h=this;var j=g.bind(p.appWindow)(arguments).always(function(R){h.push(R.result,R.actual,R.expected,R.message);});O.config.assertions._schedulePromiseOnFlow(j);};});}});return o;});
