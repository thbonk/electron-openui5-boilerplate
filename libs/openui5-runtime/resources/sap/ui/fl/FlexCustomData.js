/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/CustomData"],function(C){"use strict";var F={};F.appliedChangesCustomDataKey="sap.ui.fl.appliedChanges";F.failedChangesCustomDataKeyJs="sap.ui.fl.failedChanges.js";F.failedChangesCustomDataKeyXml="sap.ui.fl.failedChanges.xml";F.notApplicableChangesCustomDataKey="sap.ui.fl.notApplicableChanges";F.getAppliedCustomDataValue=function(c,o,m){var a=this._getCustomData(c,m,this._getCustomDataKey(o,F.appliedChangesCustomDataKey));return a.customDataValue;};F.getParsedRevertDataFromCustomData=function(c,o,m){var s=this.getAppliedCustomDataValue(c,o,m);return s&&JSON.parse(s);};F.hasFailedCustomDataJs=function(c,o,m){var a=this._getCustomData(c,m,this._getCustomDataKey(o,F.failedChangesCustomDataKeyJs));return!!a.customDataValue;};F.hasAppliedCustomData=function(c,o,m){return!!this.getAppliedCustomDataValue(c,o,m);};F.hasNotApplicableCustomData=function(c,o,m){var a=this._getCustomData(c,m,this._getCustomDataKey(o,F.notApplicableChangesCustomDataKey));return!!a.customDataValue;};F.addAppliedCustomData=function(c,o,p,s){var a;var b=this._getCustomDataKey(o,F.appliedChangesCustomDataKey);if(s){a=this._escapeCurlyBracketsInString(JSON.stringify(o.getRevertData()));}else{a="true";}this._writeCustomData(c,b,a,p);};F.addFailedCustomData=function(c,o,p,i){var s=this._getCustomDataKey(o,i);this._writeCustomData(c,s,"true",p);};F.destroyAppliedCustomData=function(c,o,m){var k=this._getCustomDataKey(o,F.appliedChangesCustomDataKey);var a=this._getCustomData(c,m,k);if(a.customData){m.destroy(a.customData);}};F.getCustomDataIdentifier=function(s,e,x){if(s){return F.appliedChangesCustomDataKey;}if(!e){return F.notApplicableChangesCustomDataKey;}if(x){return F.failedChangesCustomDataKeyXml;}return F.failedChangesCustomDataKeyJs;};F._escapeCurlyBracketsInString=function(t){return t.replace(/{/g,'\\\{').replace(/}/g,'\\\}');};F._getCustomDataKey=function(c,i){return i+"."+c.getId();};F._writeCustomData=function(c,k,v,p){var m=this._getCustomData(c,p.modifier,k);if(!m.customData){this._createAndAddCustomDataControl(c,p,k,v);}else{p.modifier.setProperty(m.customData,"value",v);}};F._createAndAddCustomDataControl=function(c,p,s,v){var m=p.modifier,V=p.view,o=p.appComponent;var a=m.createControl("sap.ui.core.CustomData",o,V,undefined,undefined,false);m.setProperty(a,"key",s);m.setProperty(a,"value",v);m.insertAggregation(c,"customData",a,0,V);return a;};F._getCustomData=function(c,m,s){var a=m.getAggregation(c,"customData")||[];var r={};a.some(function(o){var k=m.getProperty(o,"key");if(k===s){r.customData=o;r.customDataValue=m.getProperty(o,"value");return true;}});return r;};return F;},true);
