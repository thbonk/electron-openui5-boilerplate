/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2017 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['jquery.sap.global','sap/ui/core/Component','sap/ui/fl/FlexControllerFactory','sap/ui/fl/Utils','sap/ui/fl/LrepConnector','sap/ui/fl/ChangePersistenceFactory'],function(jQuery,Component,FlexControllerFactory,Utils,LrepConnector,ChangePersistenceFactory){'use strict';var PreprocessorImpl=function(){};PreprocessorImpl.prototype.getControllerExtensions=function(c,C,a){if(a){if(!C){jQuery.sap.log.warning("No component ID for determining the anchor of the code extensions was passed.");return[];}var o=sap.ui.component(C);var A=Utils.getAppComponentForControl(o);var f=Utils.getComponentClassName(A);var s=Utils.getAppVersionFromManifest(A.getManifest());var b=ChangePersistenceFactory.getChangePersistenceForComponent(f,s);return b.getChangesForComponent().then(function(d){var e=[];jQuery.each(d,function(i,g){var h=g.getDefinition();if(h.changeType==="codeExt"&&h.content&&c===h.selector.id){e.push(PreprocessorImpl.getExtensionProvider(h));}});return e;});}};PreprocessorImpl.getExtensionProvider=function(oChange){var sConvertedAsciiCodeContent=oChange.content.code||{};var sConvertedCodeContent=Utils.asciiToString(sConvertedAsciiCodeContent);var oExtensionProvider;eval("oExtensionProvider = "+sConvertedCodeContent);return oExtensionProvider;};return PreprocessorImpl;},true);
