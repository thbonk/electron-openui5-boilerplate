/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['sap/ui/thirdparty/jquery','./Dialog','./library','sap/ui/core/Control','./MessageRenderer','./Button'],function(q,D,l,C,M,B){"use strict";var a=C.extend("sap.ui.commons.Message",{metadata:{deprecated:true,library:"sap.ui.commons",properties:{type:{type:"sap.ui.commons.MessageType",group:"Behavior",defaultValue:null},text:{type:"string",group:"Data",defaultValue:null},associatedElementId:{type:"string",group:"Data",defaultValue:null},design:{type:"string",group:"Misc",defaultValue:null}}}});a.prototype.init=function(){this.isRTL=sap.ui.getCore().getConfiguration().getRTL();this.fnCallBack=null;this.oLink=null;this.oContainer=null;this.oDetails=null;this.oBtnOK=null;};a.prototype.exit=function(){if(this.oLink){this.oLink.destroy();this.oLink=null;}if(this.oDetails){this.oDetails.destroy();this.oDetails=null;}if(this.oContainer){this.oContainer.destroy();this.oContainer=null;}if(this.oBtnOK){this.oBtnOK.destroy();this.oBtnOK=null;}};a.closeDetails=function(c){c.getSource().getParent().close();};a.prototype.closeDetails=function(){if(this.oContainer){this.oContainer.close();}};a.prototype.openDetails=function(){if(!this.oContainer){var r=sap.ui.getCore().getLibraryResourceBundle("sap.ui.commons");var O=r.getText("MSGBAR_DETAILS_DIALOG_CLOSE");var t=r.getText("MSGBAR_DETAILS_DIALOG_TITLE");var h=this.fnCallBack(this.getId());this.oDetails=new a({type:this.getType(),text:h});this.oBtnOK=new B({text:O,press:a.closeDetails});this.oContainer=new D();this.oContainer.addContent(this.oDetails);this.oContainer.setTitle(t);this.oContainer.addButton(this.oBtnOK);}var c=this.oContainer.getId();var o=0;var b=q('.sapUiDlg');for(var i=b.length-1;i>=0;i--){if(q(b[i]).css('visibility')!="visible"){b.splice(i,1);}else if(b[i].id==c){b.splice(i,1);}else{o=Math.max(o,q(b[i]).css('zIndex'));}}var w=this.oContainer.isOpen();this.oContainer.open();var j=this.oContainer.$();var d=j.rect();if(b.length==0){if(this.isRTL){d.left=Number(j.css('right').replace("px",""));}this.setLastOffsets(d);return;}if(w){if(o>j.css('zIndex')){j.css('zIndex',o+1);}return;}var n=this.getNextOffsets();j.css('top',(n.top-a.TOP_INCR)+"px");if(this.isRTL){j.css('right',(n.left-a.LEFT_INCR)+"px");}else{j.css('left',(n.left-a.LEFT_INCR)+"px");}var d=j.rect();var s=q(window).scrollTop();var e=q(window).scrollLeft();var f=-e;if((q(window).height()+s)<(n.top+d.height)){n.top=s;this.setLastOffsets(n);}if(this.isRTL){if((q(window).width()+f)<(n.left+d.width)){n.left=f;this.setLastOffsets(n);}j.animate({top:n.top+"px",right:n.left+"px"},200);}else{if((q(window).width()+e)<(n.left+d.width)){n.left=e;this.setLastOffsets(n);}j.animate({top:n.top+"px",left:n.left+"px"},200);}};a.TOP_INCR=20;a.LEFT_INCR=10;var L=null;a.setLastOffsets=function(o){L=o;};a.prototype.setLastOffsets=function(o){a.setLastOffsets(o);};a.getNextOffsets=function(){L.top+=a.TOP_INCR;L.left+=a.LEFT_INCR;return L;};a.prototype.getNextOffsets=function(){return a.getNextOffsets();};a.prototype.bindDetails=function(c){this.fnCallBack=c;};return a;});
