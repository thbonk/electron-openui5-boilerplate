/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['sap/ui/dom/containsOrEquals','./library','sap/ui/core/Element','./RoadMapRenderer'],function(c,l,E,R){"use strict";var a=E.extend("sap.ui.commons.RoadMapStep",{metadata:{library:"sap.ui.commons",properties:{label:{type:"string",group:"Misc",defaultValue:null},enabled:{type:"boolean",group:"Misc",defaultValue:true},expanded:{type:"boolean",group:"Misc",defaultValue:false,deprecated:true},visible:{type:"boolean",group:"Misc",defaultValue:true}},defaultAggregation:"subSteps",aggregations:{subSteps:{type:"sap.ui.commons.RoadMapStep",multiple:true,singularName:"subStep",deprecated:true}}}});a.prototype.setLabel=function(L){s(this,"label",L,function(){R.setStepLabel(this,L);this.setProperty("label",L,true);R.addEllipses(this);return true;});return this;};a.prototype.setEnabled=function(e){var o=this.getEnabled();if((e&&o)||(!e&&!o)){return this;}s(this,"enabled",e,function(){var r=g(this);var w=R.setStepEnabled(r,this,e);if(w){r.setProperty("selectedStep","",true);}if(!e){this.setExpanded(false);}return false;});return this;};a.prototype.setExpanded=function(e){var o=this.getExpanded();if((e&&o)||(!e&&!o)){return this;}s(this,"expanded",e,function(){if(i(this)||this.getSubSteps().length==0||!this.getEnabled()||!e){this.setProperty("expanded",false,true);if(!i(this)&&this.getSubSteps().length>0&&this.getEnabled()){R.selectStep(g(this),this,false,true,null,true);}}else{this.setProperty("expanded",true,true);R.selectStep(g(this),this,false,true,null,true);}return true;});return this;};a.prototype.setVisible=function(v){var o=this.getVisible();if((v&&o)||(!v&&!o)){return this;}s(this,"visible",v,function(){var r=g(this);var w=R.setStepVisible(r,this,i(this),v);if(w){r.setProperty("selectedStep","",true);}this.setProperty("visible",v,true);R.updateStepArea(r);R.updateStepAria(this);return true;});return this;};a.prototype.getFocusDomRef=function(){return this.getFocusInfo().id?document.getElementById(this.getFocusInfo().id):null;};a.prototype.getFocusInfo=function(){return{id:this.getId()+"-box"};};a.prototype.onclick=function(e){this.handleSelect(e);};a.prototype.onsapselect=function(e){this.handleSelect(e);};a.prototype.handleSelect=function(e,I){e.stopPropagation();e.preventDefault();if(!I&&!c(this.getDomRef(),e.target)){return;}if(this.getEnabled()){var r=g(this);var t=this;R.selectStep(r,this,i(this),false,function(T){var w=r.getSelectedStep()==t.getId();r.setProperty("selectedStep",t.getId(),true);t.focus();if(T!="selected"){t.setProperty("expanded",T=="expanded",true);r.fireStepExpanded({stepId:t.getId()});}if(!w){r.fireStepSelected({stepId:t.getId()});}});}else{this.focus();}};var g=function(t){var r=t.getParent();if(i(t)){r=r.getParent();}return r;};var i=function(t){return!(t.getParent()instanceof sap.ui.commons.RoadMap);};var s=function(t,n,v,d){if(!t.getDomRef()){t.setProperty(n,v);return;}var S=d.apply(t,[]);if(!S){t.setProperty(n,v,true);}};return a;});
