/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['./Button','./Menu','./MenuItemBase','./library','./MenuButtonRenderer','sap/ui/core/Popup','sap/ui/events/checkMouseEnterOrLeave'],function(B,M,a,l,b,P,c){"use strict";var D=P.Dock;var d=B.extend("sap.ui.commons.MenuButton",{metadata:{library:"sap.ui.commons",properties:{dockButton:{type:"string",group:"Misc",defaultValue:null},dockMenu:{type:"string",group:"Misc",defaultValue:null}},defaultAggregation:"menu",aggregations:{menu:{type:"sap.ui.unified.Menu",multiple:false}},events:{itemSelected:{parameters:{itemId:{type:"string"},item:{type:"sap.ui.unified.MenuItemBase"}}}}}});d.prototype.init=function(){this.addStyleClass("sapUiMenuButton");this.bWithKeyboard=false;};d.prototype.onclick=function(e){if(this.getEnabled()&&!this._bSkipOpen){var t=this.getTooltip();if(t&&t instanceof sap.ui.core.TooltipBase){t._closeOrPreventOpen();}var s=this.getDockButton()?this.getDockButton():D.BeginBottom;var f=this.getDockMenu()?this.getDockMenu():D.BeginTop;this.getMenu().open(this.bWithKeyboard,this,f,s,this);}this.bWithKeyboard=false;this._bSkipOpen=false;e.preventDefault();e.stopPropagation();};d.prototype.onmousedown=function(e){this.handleMouseDown(e,false);this._bSkipOpen=this.getMenu()&&this.getMenu().bOpen;};d.prototype.onmouseout=function(e){if(B.prototype.onmouseout){B.prototype.onmouseout.apply(this,arguments);}if(this._bSkipOpen&&c(e,this.getDomRef())){this._bSkipOpen=false;}};d.prototype.onsapenter=function(e){this.bWithKeyboard=true;};d.prototype.onsapspace=function(e){this.bWithKeyboard=true;};d.prototype.onsapdownmodifiers=function(e){if(e.altKey){this.bWithKeyboard=true;this.onclick(e);}};d.prototype.clone=function(i,L){u(this);var C=B.prototype.clone.apply(this,arguments);u(this,this.getMenu());return C;};d.prototype.setMenu=function(m){u(this,m);this.setAggregation("menu",m);return this;};d.prototype.destroyMenu=function(){u(this,null);this.destroyAggregation("menu");return this;};var u=function(t,n){var m=t.getMenu();if(m){m.detachItemSelect(t._fItemSelectHandler);}t._fItemSelectHandler=o.bind(t);if(n){n.attachItemSelect(t._fItemSelectHandler);}};var o=function(e){var i=e.getParameter("item");this.fireItemSelected({itemId:i.getId(),item:i});this.firePress({itemId:i.getId(),item:i});};return d;});
