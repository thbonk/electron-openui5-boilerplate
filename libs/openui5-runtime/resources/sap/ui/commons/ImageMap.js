/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['sap/ui/thirdparty/jquery','./library','sap/ui/core/Control','sap/ui/core/delegate/ItemNavigation','./ImageMapRenderer','./Area','sap/ui/Device'],function(q,l,C,I,a,A,D){"use strict";var b=C.extend("sap.ui.commons.ImageMap",{metadata:{library:"sap.ui.commons",properties:{name:{type:"string",group:"Misc",defaultValue:null}},aggregations:{areas:{type:"sap.ui.commons.Area",multiple:true,singularName:"area"}},events:{press:{parameters:{areaId:{type:"string"}}}}}});b.prototype.createArea=function(){var o=new A();for(var i=0;i<arguments.length;i++){var c=arguments[i];var o;if(c instanceof A){o=c;}else{o=new A(c);}this.addArea(o);}return this;};b.prototype.onAfterRendering=function(){this.oDomRef=this.getDomRef();if(!this.oItemNavigation){this.oItemNavigation=new I();}if(D.browser.msie){var t=this;var c=[];this.oItemNavigation.setTabIndex0();var $=q("img[usemap='#"+this.getName()+"']");$.each(function(i,f){var g=f.getAttribute("id");var h=sap.ui.getCore().byId(g);h.addDelegate(t.oItemNavigation);t.oItemNavigation.setRootDomRef(f);c.push(h);});this.aImageControls=c;}else{this.addDelegate(this.oItemNavigation);this.oItemNavigation.setRootDomRef(this.oDomRef);}var d=[];var e=this.getAreas();for(var i=0;i<e.length;i++){var o=e[i].getFocusDomRef();if(o){d.push(o);}}this.oItemNavigation.setItemDomRefs(d);this.oItemNavigation.setCycling(true);this.oItemNavigation.setSelectedIndex(-1);this.oItemNavigation.setFocusedIndex(-1);};b.prototype.exit=function(){if(this.oItemNavigation){if(D.browser.msie){for(var i=0;i<this.aImageControls.length;i++){this.aImageControls[i].removeDelegate(this.oItemNavigation);}}else{this.removeDelegate(this.oItemNavigation);}this.oItemNavigation.destroy();delete this.oItemNavigation;}};return b;});
