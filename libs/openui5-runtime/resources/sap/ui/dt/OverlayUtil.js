/*
 * ! UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2017 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['jquery.sap.global','sap/ui/dt/OverlayRegistry','sap/ui/dt/ElementUtil'],function(q,O,E){"use strict";var a={};a.isInTargetZoneAggregation=function(e){var A=e.getParent();return A&&A.isTargetZone&&A.isTargetZone();};a.getParentInformation=function(e){var p=e.getParentElementOverlay();if(p){var P=p.getElementInstance();var s=e.getParentAggregationOverlay().getAggregationName();var c=E.getAggregation(P,s);var o=e.getElementInstance();var i=c.indexOf(o);return{parent:P,aggregation:s,index:i};}else{return{parent:null,aggregation:"",index:-1};}};a.getClosestOverlayFor=function(e){if(!e){return null;}var p=e;var P=O.getOverlay(p);while(p&&!P){p=p.getParent();P=O.getOverlay(p);}return P;};a.getGeometry=function(g){var m,b,c,d;g.forEach(function(e){if(e){if(!m||e.position.left<m){m=e.position.left;}if(!c||e.position.top<c){c=e.position.top;}var r=e.position.left+e.size.width;if(!b||r>b){b=r;}var B=e.position.top+e.size.height;if(!d||B>d){d=B;}}});if(typeof m==="number"){return{size:{width:b-m,height:d-c},position:{left:m,top:c},visible:true};}};a.getClosestOverlayForType=function(t,o){while(o&&!E.isInstanceOf(o.getElementInstance(),t)){o=o.getParentElementOverlay();}return o;};a.getClosestScrollable=function(o){if(!o){return;}o=o.getParent();while(o&&o.isScrollable&&!o.isScrollable()){o=o.getParent();}return o&&o.isScrollable?o:null;};a.getFirstDescendantByCondition=function(o,c){if(!c){throw new Error("expected condition is 'undefined' or not a function");}var C=a.getAllChildOverlays(o);for(var i=0,n=C.length;i<n;i++){var b=C[i];if(c(b)){return b;}var d=this.getFirstDescendantByCondition(b,c);if(d){return d;}}return undefined;};a.getAllChildOverlays=function(o){var c=[],C=[];if(!o){return c;}var A=o.getAggregationOverlays();for(var i=0;i<A.length;i++){C=A[i].getChildren();if(C&&C.length>0){c=c.concat(C);}}return c;};a.getFirstChildOverlay=function(o){var c=this.getAllChildOverlays(o);if(c.length){return c[0];}return undefined;};a.getLastChildOverlay=function(o){var c=this.getAllChildOverlays(o);if(c.length){return c[c.length-1];}return undefined;};a.getNextSiblingOverlay=function(o){if(!o){return;}var p=o.getParentAggregationOverlay();if(p){var A=p.getChildren();var i=A.indexOf(o);if(i!==A.length-1){return A[i+1];}else if(i===A.length-1){var P=o.getParentElementOverlay();A=P.getAggregationOverlays();for(i=A.indexOf(p)+1;i<A.length;i++){var b=A[i].getChildren();if(b.length){return b[0];}}}}};a.getPreviousSiblingOverlay=function(o){if(!o){return;}var p=o.getParentAggregationOverlay();if(p){var A=p.getChildren();var i=A.indexOf(o);if(i>0){return A[i-1];}else if(i===0){var P=o.getParentElementOverlay();A=P.getAggregationOverlays();for(i=A.indexOf(p)-1;i>=0;i--){var b=A[i].getChildren();if(b.length){return b[b.length-1];}}}}};a.getNextOverlay=function(o){if(!o){return;}var f=this.getFirstChildOverlay(o);if(f){return f;}var n=this.getNextSiblingOverlay(o);if(n){return n;}do{o=o.getParentElementOverlay();n=this.getNextSiblingOverlay(o);}while(o&&!n);return n;};a.getPreviousOverlay=function(o){if(!o){return;}var p=o.getParentAggregationOverlay();if(!p){return;}var P=this.getPreviousSiblingOverlay(o);if(P){var l=P;do{P=l;l=this.getLastChildOverlay(P);}while(l);return P;}return o.getParentElementOverlay();};a.getRootOverlay=function(o){var p=o;do{o=p;p=o.getParentElementOverlay();}while(p);return o;};a.iterateOverlayElementTree=function(e,c){c(e);e.getAggregationOverlays().forEach(function(A){A.getChildren().forEach(function(C){this.iterateOverlayElementTree(C,c);},this);},this);};a.iterateOverAggregationLikeChildren=function(e,A,c){var o=e.getElementInstance();var C;if(e.getAggregationOverlay(A).isAssociation()){C=E.getAssociationInstances(o,A);}else{C=E.getAggregation(o,A);}E.iterateOverElements(C,c);};a.iterateOverlayTree=function(o,c){c(o);o.getChildren().forEach(function(C){this.iterateOverlayTree(C,c);},this);};a.isInOverlayContainer=function(n){if(n&&q(n).closest(".sapUiDtOverlay, #overlay-container").length){return true;}};a.getClosestOverlayForNode=function(n){var e=E.getClosestElementForNode(n);return a.getClosestOverlayFor(e);};return a;},true);
