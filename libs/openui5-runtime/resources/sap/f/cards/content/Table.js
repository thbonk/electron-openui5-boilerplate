/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/m/Table","sap/ui/core/Control","sap/ui/model/json/JSONModel","sap/f/cards/Data"],function(R,C,J,D){"use strict";var T=C.extend("sap.f.cards.content.Table",{metadata:{properties:{data:{type:"object"},columns:{type:"array"},row:{type:"array"}},aggregations:{_content:{multiple:false,visibility:"hidden"}}},renderer:function(r,c){r.write("<div");r.writeElementData(c);r.write(">");r.renderControl(c.getAggregation("_content"));r.write("</div>");}});T.prototype.applySettings=function(s,S){var d=s.data;if(d){this.setData(d);delete s.data;}C.prototype.applySettings.apply(this,[s,S]);s.data=d;return this;};T.prototype.init=function(){this.oTable=new R({id:this.getId()+"-Table"});this.setAggregation("_content",this.oTable);var m=new J();this.setModel(m);};T.prototype.onBeforeRendering=function(){var c=[];this.getColumns().forEach(function(o){this.getAggregation("_content").addColumn(new sap.m.Column({header:new sap.m.Text({text:o.label})}));c.push(new sap.m.Text({text:o.value}));}.bind(this));this.getAggregation("_content").bindItems({path:this.getAggregation("_content").getBindingContext().getPath(),template:new sap.m.ColumnListItem({cells:c})});};T.prototype.exit=function(){if(this.oTable){this.oTable.destroy();this.oTable=null;}};T.prototype.destroy=function(){this.setAggregation("_content",null);this.setModel(null);return C.prototype.destroy.apply(this,arguments);};T.prototype.setData=function(d){this.setProperty("data",d,true);if(!d){return this;}this.getAggregation("_content").bindElement({path:d.path||"/"});var r=d.request;if(d.json&&!r){this.getModel().setData(d.json);}if(r){D.fetch(r).then(function(a){this.getModel().setData(a);}.bind(this)).catch(function(e){});}return this;};return T;});
