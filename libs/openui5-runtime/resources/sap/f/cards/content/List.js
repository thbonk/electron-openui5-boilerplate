/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['jquery.sap.global','sap/ui/core/Control','sap/ui/model/json/JSONModel','sap/m/List','sap/m/StandardListItem','sap/ui/base/ManagedObject',"sap/f/cards/Data"],function(q,C,J,s,S,M,D){"use strict";var L=C.extend("sap.f.cards.content.List",{metadata:{properties:{data:{type:"object"},item:{type:"object"}},aggregations:{_content:{multiple:false,visibility:"hidden"}}},renderer:function(r,c){r.write("<div");r.writeElementData(c);r.write(">");r.renderControl(c.getAggregation("_content"));r.write("</div>");}});L.prototype.init=function(){this.oList=new s({id:this.getId()+"-list",growing:false,showNoData:false,showSeparators:"None"});var t=this;this.oList.attachUpdateFinished(function(){if(t._iVisibleItems){var I=this.oList.getItems();for(var i=t._iVisibleItems+1;i<I.length;i++){I[i].setVisible(false);}}}.bind(this));this.setAggregation("_content",this.oList);var m=new J();this.setModel(m);this._oItemTemplate=new S({iconDensityAware:false,iconInset:false});};L.prototype.exit=function(){if(this._oItemTemplate){this._oItemTemplate.destroy();this._oItemTemplate=null;}if(this.oList){this.oList.destroy();this.oList=null;}};L.prototype.destroy=function(){this.setAggregation("_content",null);this.setModel(null);return C.prototype.destroy.apply(this,arguments);};L.prototype.setItem=function(i){this.setProperty("item",i,true);if(!i){return this;}this._oItemTemplate.bindProperty("title",M.bindingParser(i["title"].value));this._oItemTemplate.bindProperty("description",M.bindingParser(i["description"].value));this._oItemTemplate.bindProperty("icon",M.bindingParser(i["icon"].value));var l=this.getAggregation("_content");if(l.isBound("items")){l.bindItems({path:l.getBindingInfo("items").path,template:this._oItemTemplate});}return this;};L.prototype.setData=function(d){this.setProperty("data",d,true);if(!d){return this;}var r=d.request;if(d.json&&!r){this._updateModel(d.json,d.path);}if(r){D.fetch(r).then(function(a){this._updateModel(a,d.path);}.bind(this)).catch(function(e){});}return this;};L.prototype._updateModel=function(d,p){this.getModel().setData(d);this.getAggregation("_content").bindItems({path:p||"/",template:this._oItemTemplate});};return L;});
